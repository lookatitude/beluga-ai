---
title: memory
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# memory

```go
import "github.com/lookatitude/beluga-ai/pkg/memory"
```

Package memory provides configuration management for memory implementations. It follows the framework's configuration patterns with struct tags for validation and functional options for runtime configuration.

Package memory provides custom error types for package-specific errors. It follows the framework's error handling patterns with custom error types that preserve error chains and provide context about failed operations.

Package memory provides interfaces and implementations for managing conversation history. It follows the Beluga AI Framework design patterns with proper separation of concerns, configuration management, observability, and error handling.

The package supports multiple memory types: - Buffer memory for storing all messages - Window buffer memory for keeping a fixed number of recent interactions - Summary memory for condensing conversations using LLMs - Summary buffer memory combining buffer and summarization - Vector store memory for semantic retrieval

Package memory provides observability and monitoring for memory implementations. It integrates OpenTelemetry for metrics and tracing as the default observability solution.

Package memory provides a standardized registry pattern for memory creation. This follows the Beluga AI Framework design patterns with consistent factory interfaces.

Package memory provides advanced test utilities and comprehensive mocks for testing memory implementations. This file contains utilities designed to support both unit tests and integration tests.

Test Coverage Exclusions:

1. Redis Memory Implementation:

- File: internal/redis/redis\_memory.go
- Reason: Requires actual Redis instance or complex mocking setup
- Coverage Impact: \~2% of code
- Workaround: Test Redis memory via integration tests with test containers

2. Internal Mock Package:

- File: internal/mock/memory.go
- Reason: Internal testing utilities, not part of public API
- Coverage Impact: \~0.5% of code
- Workaround: Covered indirectly through tests that use these mocks

3. Factory Error Paths:

- File: memory.go:70-81 (validation error handling)
- Reason: Some validation error paths are difficult to trigger without invalid struct tags
- Coverage Impact: \~0.3% of code
- Workaround: Test validation separately with invalid configs

4. Vector Store Memory Edge Cases:

- File: internal/vectorstore/vectorstore\_memory.go
- Reason: Some edge cases require complex vector store state
- Coverage Impact: \~1% of code
- Workaround: Test with mock vector stores in integration tests

5. Summary Memory LLM Integration:

- File: internal/summary/summary\_memory.go
- Reason: Some LLM error scenarios are difficult to simulate
- Coverage Impact: \~0.5% of code
- Workaround: Test with mock LLMs that simulate specific error conditions

All exclusions are documented here to maintain transparency about coverage goals. Target: 100% coverage of testable code paths (excluding the above).

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [`func AssertErrorType(t *testing.T, err error, expectedCode string)`](<#AssertErrorType>)
- [`func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)`](<#AssertHealthCheck>)
- [`func AssertMemoryContent(t *testing.T, content map[string]any, expectedKeys []string)`](<#AssertMemoryContent>)
- [`func AssertMemoryVariables(t *testing.T, memory iface.Memory, expectedVars []string)`](<#AssertMemoryVariables>)
- [`func AssertMessageHistory(t *testing.T, messages []schema.Message, expectedCount int)`](<#AssertMessageHistory>)
- [`func CreateMemory(ctx context.Context, memoryType string, config Config) (iface.Memory, error)`](<#CreateMemory>)
- [`func CreateTestInputOutput(input, output string) (map[string]any, map[string]any)`](<#CreateTestInputOutput>)
- [`func CreateTestMessages(count int) []schema.Message`](<#CreateTestMessages>)
- [`func GetBufferString(messages []schema.Message, humanPrefix, aiPrefix string) string`](<#GetBufferString>)
- [`func GetInputOutputKeys(inputs, outputs map[string]any) (string, string, error)`](<#GetInputOutputKeys>)
- [`func InitMetrics(meter metric.Meter, tracer trace.Tracer)`](<#InitMetrics>)
- [`func IsMemoryError(err error, code string) bool`](<#IsMemoryError>)
- [`func ListAvailableMemoryTypes() []string`](<#ListAvailableMemoryTypes>)
- [`func NewBaseChatMessageHistory(options ...providers.BaseHistoryOption) iface.ChatMessageHistory`](<#NewBaseChatMessageHistory>)
- [`func NewChatMessageBufferMemory(history iface.ChatMessageHistory) iface.Memory`](<#NewChatMessageBufferMemory>)
- [`func NewCompositeChatMessageHistory(primary iface.ChatMessageHistory, options ...providers.CompositeHistoryOption) iface.ChatMessageHistory`](<#NewCompositeChatMessageHistory>)
- [`func NewConversationBufferWindowMemory(history iface.ChatMessageHistory, k int, memoryKey string, returnMessages bool) iface.Memory`](<#NewConversationBufferWindowMemory>)
- [`func NewConversationSummaryBufferMemory(history iface.ChatMessageHistory, llm core.Runnable, memoryKey string, maxTokenLimit int) iface.Memory`](<#NewConversationSummaryBufferMemory>)
- [`func NewConversationSummaryMemory(history iface.ChatMessageHistory, llm core.Runnable, memoryKey string) iface.Memory`](<#NewConversationSummaryMemory>)
- [`func NewVectorStoreMemory(retriever core.Retriever, memoryKey string, returnDocs bool, k int) iface.Memory`](<#NewVectorStoreMemory>)
- [`func NewVectorStoreRetrieverMemory(embedder embeddingsiface.Embedder, vectorStore vectorstores.VectorStore, options ...vectorstore.VectorStoreMemoryOption) iface.Memory`](<#NewVectorStoreRetrieverMemory>)
- [`func RegisterMemoryType(memoryType string, creator func(ctx context.Context, config Config) (iface.Memory, error))`](<#RegisterMemoryType>)
- [`func RunLoadTest(t *testing.T, memory *AdvancedMockMemory, numOperations, concurrency int)`](<#RunLoadTest>)
- [`func SetGlobalLogger(logger *Logger)`](<#SetGlobalLogger>)
- [`func SetGlobalMetrics(meter metric.Meter)`](<#SetGlobalMetrics>)
- [`func SetGlobalTracer()`](<#SetGlobalTracer>)
- [`func WithMaxHistorySize(maxSize int) providers.BaseHistoryOption`](<#WithMaxHistorySize>)
- [`func WithMaxSize(maxSize int) providers.CompositeHistoryOption`](<#WithMaxSize>)
- [`func WithOnAddHook(hook func(context.Context, schema.Message) error) providers.CompositeHistoryOption`](<#WithOnAddHook>)
- [`func WithOnGetHook(hook func(context.Context, []schema.Message) ([]schema.Message, error)) providers.CompositeHistoryOption`](<#WithOnGetHook>)
- [`func WithSecondaryHistory(secondary iface.ChatMessageHistory) providers.CompositeHistoryOption`](<#WithSecondaryHistory>)
- [type AdvancedMockChatMessageHistory](<#AdvancedMockChatMessageHistory>)
  - [`func NewAdvancedMockChatMessageHistory(options ...MockHistoryOption) *AdvancedMockChatMessageHistory`](<#NewAdvancedMockChatMessageHistory>)
  - [`func (h *AdvancedMockChatMessageHistory) AddAIMessage(ctx context.Context, content string) error`](<#AdvancedMockChatMessageHistory.AddAIMessage>)
  - [`func (h *AdvancedMockChatMessageHistory) AddMessage(ctx context.Context, message schema.Message) error`](<#AdvancedMockChatMessageHistory.AddMessage>)
  - [`func (h *AdvancedMockChatMessageHistory) AddUserMessage(ctx context.Context, content string) error`](<#AdvancedMockChatMessageHistory.AddUserMessage>)
  - [`func (h *AdvancedMockChatMessageHistory) Clear(ctx context.Context) error`](<#AdvancedMockChatMessageHistory.Clear>)
  - [`func (h *AdvancedMockChatMessageHistory) GetCallCount() int`](<#AdvancedMockChatMessageHistory.GetCallCount>)
  - [`func (h *AdvancedMockChatMessageHistory) GetMessages(ctx context.Context) ([]schema.Message, error)`](<#AdvancedMockChatMessageHistory.GetMessages>)
- [type AdvancedMockMemory](<#AdvancedMockMemory>)
  - [`func NewAdvancedMockMemory(memoryKey string, memoryType MemoryType, options ...MockMemoryOption) *AdvancedMockMemory`](<#NewAdvancedMockMemory>)
  - [`func (m *AdvancedMockMemory) CheckHealth() map[string]any`](<#AdvancedMockMemory.CheckHealth>)
  - [`func (m *AdvancedMockMemory) Clear(ctx context.Context) error`](<#AdvancedMockMemory.Clear>)
  - [`func (m *AdvancedMockMemory) GetCallCount() int`](<#AdvancedMockMemory.GetCallCount>)
  - [`func (m *AdvancedMockMemory) GetContextHistory() []map[string]any`](<#AdvancedMockMemory.GetContextHistory>)
  - [`func (m *AdvancedMockMemory) GetMessages() []schema.Message`](<#AdvancedMockMemory.GetMessages>)
  - [`func (m *AdvancedMockMemory) LoadMemoryVariables(ctx context.Context, inputs map[string]any) (map[string]any, error)`](<#AdvancedMockMemory.LoadMemoryVariables>)
  - [`func (m *AdvancedMockMemory) MemoryVariables() []string`](<#AdvancedMockMemory.MemoryVariables>)
  - [`func (m *AdvancedMockMemory) SaveContext(ctx context.Context, inputs, outputs map[string]any) error`](<#AdvancedMockMemory.SaveContext>)
- [type AdvancedMockcomponent](<#AdvancedMockcomponent>)
  - [`func NewAdvancedMockcomponent() *AdvancedMockcomponent`](<#NewAdvancedMockcomponent>)
- [type BufferConfig](<#BufferConfig>)
- [type ChatMessageHistory](<#ChatMessageHistory>)
- [type ConcurrentTestRunner](<#ConcurrentTestRunner>)
  - [`func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner`](<#NewConcurrentTestRunner>)
  - [`func (r *ConcurrentTestRunner) Run() error`](<#ConcurrentTestRunner.Run>)
- [type Config](<#Config>)
  - [`func CreateTestMemoryConfig(memoryType MemoryType) Config`](<#CreateTestMemoryConfig>)
- [type DefaultFactory](<#DefaultFactory>)
  - [`func (f *DefaultFactory) CreateMemory(ctx context.Context, config Config) (Memory, error)`](<#DefaultFactory.CreateMemory>)
- [type Factory](<#Factory>)
  - [`func NewFactory() Factory`](<#NewFactory>)
- [type IntegrationTestHelper](<#IntegrationTestHelper>)
  - [`func NewIntegrationTestHelper() *IntegrationTestHelper`](<#NewIntegrationTestHelper>)
  - [`func (h *IntegrationTestHelper) AddHistory(name string, history *AdvancedMockChatMessageHistory)`](<#IntegrationTestHelper.AddHistory>)
  - [`func (h *IntegrationTestHelper) AddMemory(name string, memory *AdvancedMockMemory)`](<#IntegrationTestHelper.AddMemory>)
  - [`func (h *IntegrationTestHelper) GetHistory(name string) *AdvancedMockChatMessageHistory`](<#IntegrationTestHelper.GetHistory>)
  - [`func (h *IntegrationTestHelper) GetMemory(name string) *AdvancedMockMemory`](<#IntegrationTestHelper.GetMemory>)
  - [`func (h *IntegrationTestHelper) Reset()`](<#IntegrationTestHelper.Reset>)
- [type Logger](<#Logger>)
  - [`func GetGlobalLogger() *Logger`](<#GetGlobalLogger>)
  - [`func NewLogger(logger *slog.Logger) *Logger`](<#NewLogger>)
  - [`func (l *Logger) LogError(ctx context.Context, err error, operation string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr)`](<#Logger.LogError>)
  - [`func (l *Logger) LogMemoryLifecycle(ctx context.Context, event string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr)`](<#Logger.LogMemoryLifecycle>)
  - [`func (l *Logger) LogMemoryOperation(ctx context.Context, level slog.Level, operation string, memoryType MemoryType, memoryKey string, messageCount int, duration time.Duration, err error)`](<#Logger.LogMemoryOperation>)
- [type Memory](<#Memory>)
  - [`func NewMemory(memoryType MemoryType, options ...Option) (Memory, error)`](<#NewMemory>)
- [type MemoryError](<#MemoryError>)
  - [`func ErrContextCanceled(op string, err error) *MemoryError`](<#ErrContextCanceled>)
  - [`func ErrDeserialization(op string, err error) *MemoryError`](<#ErrDeserialization>)
  - [`func ErrInvalidConfig(err error) *MemoryError`](<#ErrInvalidConfig>)
  - [`func ErrInvalidInput(op string, err error) *MemoryError`](<#ErrInvalidInput>)
  - [`func ErrMemoryOverflow(op string, err error) *MemoryError`](<#ErrMemoryOverflow>)
  - [`func ErrNotFound(op string, err error) *MemoryError`](<#ErrNotFound>)
  - [`func ErrRetrievalError(op string, err error) *MemoryError`](<#ErrRetrievalError>)
  - [`func ErrSerialization(op string, err error) *MemoryError`](<#ErrSerialization>)
  - [`func ErrStorageError(op string, err error) *MemoryError`](<#ErrStorageError>)
  - [`func ErrTimeout(op string, err error) *MemoryError`](<#ErrTimeout>)
  - [`func ErrTypeMismatch(op string, err error) *MemoryError`](<#ErrTypeMismatch>)
  - [`func ErrValidation(op string, err error) *MemoryError`](<#ErrValidation>)
  - [`func NewMemoryError(op, code string, err error) *MemoryError`](<#NewMemoryError>)
  - [`func NewMemoryErrorWithMessage(op, code, message string, err error) *MemoryError`](<#NewMemoryErrorWithMessage>)
  - [`func WrapError(err error, op, code string) *MemoryError`](<#WrapError>)
  - [`func (e *MemoryError) Error() string`](<#MemoryError.Error>)
  - [`func (e *MemoryError) Is(target error) bool`](<#MemoryError.Is>)
  - [`func (e *MemoryError) Unwrap() error`](<#MemoryError.Unwrap>)
  - [`func (e *MemoryError) WithContext(key string, value any) *MemoryError`](<#MemoryError.WithContext>)
- [type MemoryFactory](<#MemoryFactory>)
- [type MemoryMockcomponent](<#MemoryMockcomponent>)
  - [`func NewMemoryMockcomponent() *MemoryMockcomponent`](<#NewMemoryMockcomponent>)
- [type MemoryRegistry](<#MemoryRegistry>)
  - [`func GetGlobalMemoryRegistry() *MemoryRegistry`](<#GetGlobalMemoryRegistry>)
  - [`func NewMemoryRegistry() *MemoryRegistry`](<#NewMemoryRegistry>)
  - [`func (r *MemoryRegistry) Create(ctx context.Context, memoryType string, config Config) (iface.Memory, error)`](<#MemoryRegistry.Create>)
  - [`func (r *MemoryRegistry) ListMemoryTypes() []string`](<#MemoryRegistry.ListMemoryTypes>)
  - [`func (r *MemoryRegistry) Register(memoryType string, creator func(ctx context.Context, config Config) (iface.Memory, error))`](<#MemoryRegistry.Register>)
- [type MemoryScenarioRunner](<#MemoryScenarioRunner>)
  - [`func NewMemoryScenarioRunner(memory iface.Memory) *MemoryScenarioRunner`](<#NewMemoryScenarioRunner>)
  - [`func (r *MemoryScenarioRunner) RunConversationScenario(ctx context.Context, exchanges int) error`](<#MemoryScenarioRunner.RunConversationScenario>)
  - [`func (r *MemoryScenarioRunner) RunMemoryRetentionTest(ctx context.Context, initialSize, targetSize int) error`](<#MemoryScenarioRunner.RunMemoryRetentionTest>)
- [type MemoryType](<#MemoryType>)
- [type Metrics](<#Metrics>)
  - [`func GetGlobalMetrics() *Metrics`](<#GetGlobalMetrics>)
  - [`func GetMetrics() *Metrics`](<#GetMetrics>)
  - [`func NewMetrics(meter metric.Meter, tracer trace.Tracer) *Metrics`](<#NewMetrics>)
  - [`func (m *Metrics) RecordActiveMemory(ctx context.Context, memoryType MemoryType, delta int64)`](<#Metrics.RecordActiveMemory>)
  - [`func (m *Metrics) RecordError(ctx context.Context, operation string, memoryType MemoryType, errorType string)`](<#Metrics.RecordError>)
  - [`func (m *Metrics) RecordMemorySize(ctx context.Context, memoryType MemoryType, size int)`](<#Metrics.RecordMemorySize>)
  - [`func (m *Metrics) RecordOperation(ctx context.Context, operation string, memoryType MemoryType, success bool)`](<#Metrics.RecordOperation>)
  - [`func (m *Metrics) RecordOperationDuration(ctx context.Context, operation string, memoryType MemoryType, duration time.Duration)`](<#Metrics.RecordOperationDuration>)
- [type MetricsMockcomponent](<#MetricsMockcomponent>)
  - [`func NewMetricsMockcomponent() *MetricsMockcomponent`](<#NewMetricsMockcomponent>)
- [type MockHistoryOption](<#MockHistoryOption>)
  - [`func WithHistoryDelay(delay time.Duration) MockHistoryOption`](<#WithHistoryDelay>)
  - [`func WithHistoryError(shouldError bool, err error) MockHistoryOption`](<#WithHistoryError>)
  - [`func WithHistoryMaxSize(size int) MockHistoryOption`](<#WithHistoryMaxSize>)
  - [`func WithPreloadedHistoryMessages(messages []schema.Message) MockHistoryOption`](<#WithPreloadedHistoryMessages>)
- [type MockMemoryOption](<#MockMemoryOption>)
  - [`func WithErrorCode(code string) MockMemoryOption`](<#WithErrorCode>)
  - [`func WithMaxMemorySize(size int) MockMemoryOption`](<#WithMaxMemorySize>)
  - [`func WithMemoryVariables(variables []string) MockMemoryOption`](<#WithMemoryVariables>)
  - [`func WithMockError(shouldError bool, err error) MockMemoryOption`](<#WithMockError>)
  - [`func WithMockReturnMessages(returnMessages bool) MockMemoryOption`](<#WithMockReturnMessages>)
  - [`func WithPreloadedMessages(messages []schema.Message) MockMemoryOption`](<#WithPreloadedMessages>)
  - [`func WithSimulateDelay(delay time.Duration) MockMemoryOption`](<#WithSimulateDelay>)
- [type NoOpMemory](<#NoOpMemory>)
  - [`func (m *NoOpMemory) Clear(ctx context.Context) error`](<#NoOpMemory.Clear>)
  - [`func (m *NoOpMemory) LoadMemoryVariables(ctx context.Context, inputs map[string]any) (map[string]any, error)`](<#NoOpMemory.LoadMemoryVariables>)
  - [`func (m *NoOpMemory) MemoryVariables() []string`](<#NoOpMemory.MemoryVariables>)
  - [`func (m *NoOpMemory) SaveContext(ctx context.Context, inputs, outputs map[string]any) error`](<#NoOpMemory.SaveContext>)
- [type Option](<#Option>)
  - [`func WithAIPrefix(prefix string) Option`](<#WithAIPrefix>)
  - [`func WithHumanPrefix(prefix string) Option`](<#WithHumanPrefix>)
  - [`func WithInputKey(key string) Option`](<#WithInputKey>)
  - [`func WithMaxTokenLimit(limit int) Option`](<#WithMaxTokenLimit>)
  - [`func WithMemoryKey(key string) Option`](<#WithMemoryKey>)
  - [`func WithOutputKey(key string) Option`](<#WithOutputKey>)
  - [`func WithReturnMessages(returnMessages bool) Option`](<#WithReturnMessages>)
  - [`func WithTimeout(timeout time.Duration) Option`](<#WithTimeout>)
  - [`func WithTopK(k int) Option`](<#WithTopK>)
  - [`func WithWindowSize(size int) Option`](<#WithWindowSize>)
- [type SummaryConfig](<#SummaryConfig>)
- [type Tracer](<#Tracer>)
  - [`func GetGlobalTracer() *Tracer`](<#GetGlobalTracer>)
  - [`func NewTracer() *Tracer`](<#NewTracer>)
  - [`func (t *Tracer) RecordSpanError(span trace.Span, err error)`](<#Tracer.RecordSpanError>)
  - [`func (t *Tracer) StartSpan(ctx context.Context, operation string, memoryType MemoryType, memoryKey string) (context.Context, trace.Span)`](<#Tracer.StartSpan>)
- [type VectorStoreConfig](<#VectorStoreConfig>)

## Constants

<a name="ErrCodeInvalidConfig"></a>Error codes for common memory operations.

```go
const (
    ErrCodeInvalidConfig   = "invalid_config"
    ErrCodeInvalidInput    = "invalid_input"
    ErrCodeStorageError    = "storage_error"
    ErrCodeRetrievalError  = "retrieval_error"
    ErrCodeTimeout         = "timeout"
    ErrCodeNotFound        = "not_found"
    ErrCodeTypeMismatch    = "type_mismatch"
    ErrCodeSerialization   = "serialization_error"
    ErrCodeDeserialization = "deserialization_error"
    ErrCodeValidation      = "validation_error"
    ErrCodeMemoryOverflow  = "memory_overflow"
    ErrCodeContextCanceled = "context_canceled"
)
```

## Variables

<a name="LogMemoryOperation"></a>Default convenience functions that use the global logger.

```go
var (
    LogMemoryOperation = func(ctx context.Context, level slog.Level, operation string, memoryType MemoryType, memoryKey string, messageCount int, duration time.Duration, err error) {
        GetGlobalLogger().LogMemoryOperation(ctx, level, operation, memoryType, memoryKey, messageCount, duration, err)
    }

    LogMemoryLifecycle = func(ctx context.Context, event string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogMemoryLifecycle(ctx, event, memoryType, memoryKey, additionalAttrs...)
    }

    LogError = func(ctx context.Context, err error, operation string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogError(ctx, err, operation, memoryType, memoryKey, additionalAttrs...)
    }
)
```

<a name="AssertErrorType"></a>
## func [AssertErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L552>)

```go
func AssertErrorType(t *testing.T, err error, expectedCode string)
```

AssertErrorType validates error types and codes.

<a name="AssertHealthCheck"></a>
## func [AssertHealthCheck](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L543>)

```go
func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)
```

AssertHealthCheck validates health check results.

<a name="AssertMemoryContent"></a>
## func [AssertMemoryContent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L521>)

```go
func AssertMemoryContent(t *testing.T, content map[string]any, expectedKeys []string)
```

AssertMemoryContent validates memory content.

<a name="AssertMemoryVariables"></a>
## func [AssertMemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L514>)

```go
func AssertMemoryVariables(t *testing.T, memory iface.Memory, expectedVars []string)
```

AssertMemoryVariables validates memory variables.

<a name="AssertMessageHistory"></a>
## func [AssertMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L530>)

```go
func AssertMessageHistory(t *testing.T, messages []schema.Message, expectedCount int)
```

AssertMessageHistory validates message history.

<a name="CreateMemory"></a>
## func [CreateMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L83>)

```go
func CreateMemory(ctx context.Context, memoryType string, config Config) (iface.Memory, error)
```

CreateMemory creates a memory using the global registry.

<a name="CreateTestInputOutput"></a>
## func [CreateTestInputOutput](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L501>)

```go
func CreateTestInputOutput(input, output string) (map[string]any, map[string]any)
```

CreateTestInputOutput creates test input/output maps.

<a name="CreateTestMessages"></a>
## func [CreateTestMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L469>)

```go
func CreateTestMessages(count int) []schema.Message
```

CreateTestMessages creates a set of test messages.

<a name="GetBufferString"></a>
## func [GetBufferString](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L365>)

```go
func GetBufferString(messages []schema.Message, humanPrefix, aiPrefix string) string
```

GetBufferString formats messages into a text buffer with human/AI prefixes. This utility function is exposed for use by memory implementations. It converts a slice of messages into a formatted string representation suitable for display or storage.

Parameters:

- messages: Slice of messages to format
- humanPrefix: Prefix to use for human messages (e.g., "Human")
- aiPrefix: Prefix to use for AI messages (e.g., "AI")

Returns:

- string: Formatted buffer string with all messages

Example:

```
messages := []schema.Message{
    schema.NewHumanMessage("Hello"),
    schema.NewAIMessage("Hi there"),
}
buffer := memory.GetBufferString(messages, "Human", "AI")
// Returns: "Human: Hello\nAI: Hi there\n"
```

Example usage can be found in examples/agents/with\_memory/main.go

<a name="GetInputOutputKeys"></a>
## func [GetInputOutputKeys](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L293>)

```go
func GetInputOutputKeys(inputs, outputs map[string]any) (string, string, error)
```

GetInputOutputKeys determines the input and output keys from the given maps. This utility function is exposed for use by memory implementations. It attempts to find common key names (input, query, output, result, etc.) and falls back to the first key in each map if no common keys are found.

Parameters:

- inputs: Map containing input data
- outputs: Map containing output data

Returns:

- string: The identified input key
- string: The identified output key
- error: Error if either map is empty

Example:

```
inputs := map[string]any{"input": "Hello"}
outputs := map[string]any{"output": "Hi there"}
inputKey, outputKey, err := memory.GetInputOutputKeys(inputs, outputs)
// inputKey: "input", outputKey: "output"
```

Example usage can be found in examples/agents/with\_memory/main.go

<a name="InitMetrics"></a>
## func [InitMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L196>)

```go
func InitMetrics(meter metric.Meter, tracer trace.Tracer)
```

InitMetrics initializes the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="IsMemoryError"></a>
## func [IsMemoryError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L101>)

```go
func IsMemoryError(err error, code string) bool
```

IsMemoryError checks if an error is a MemoryError with the given code.

<a name="ListAvailableMemoryTypes"></a>
## func [ListAvailableMemoryTypes](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L88>)

```go
func ListAvailableMemoryTypes() []string
```

ListAvailableMemoryTypes returns all available memory types from the global registry.

<a name="NewBaseChatMessageHistory"></a>
## func [NewBaseChatMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L394>)

```go
func NewBaseChatMessageHistory(options ...providers.BaseHistoryOption) iface.ChatMessageHistory
```

NewBaseChatMessageHistory creates a new base chat message history with functional options.

<a name="NewChatMessageBufferMemory"></a>
## func [NewChatMessageBufferMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L429>)

```go
func NewChatMessageBufferMemory(history iface.ChatMessageHistory) iface.Memory
```

NewChatMessageBufferMemory creates a new chat message buffer memory.

<a name="NewCompositeChatMessageHistory"></a>
## func [NewCompositeChatMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L404>)

```go
func NewCompositeChatMessageHistory(primary iface.ChatMessageHistory, options ...providers.CompositeHistoryOption) iface.ChatMessageHistory
```

NewCompositeChatMessageHistory creates a new composite chat message history with functional options.

<a name="NewConversationBufferWindowMemory"></a>
## func [NewConversationBufferWindowMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L434>)

```go
func NewConversationBufferWindowMemory(history iface.ChatMessageHistory, k int, memoryKey string, returnMessages bool) iface.Memory
```

NewConversationBufferWindowMemory creates a new conversation buffer window memory.

<a name="NewConversationSummaryBufferMemory"></a>
## func [NewConversationSummaryBufferMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L444>)

```go
func NewConversationSummaryBufferMemory(history iface.ChatMessageHistory, llm core.Runnable, memoryKey string, maxTokenLimit int) iface.Memory
```

NewConversationSummaryBufferMemory creates a new conversation summary buffer memory.

<a name="NewConversationSummaryMemory"></a>
## func [NewConversationSummaryMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L439>)

```go
func NewConversationSummaryMemory(history iface.ChatMessageHistory, llm core.Runnable, memoryKey string) iface.Memory
```

NewConversationSummaryMemory creates a new conversation summary memory.

<a name="NewVectorStoreMemory"></a>
## func [NewVectorStoreMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L449>)

```go
func NewVectorStoreMemory(retriever core.Retriever, memoryKey string, returnDocs bool, k int) iface.Memory
```

NewVectorStoreMemory creates a new vector store memory.

<a name="NewVectorStoreRetrieverMemory"></a>
## func [NewVectorStoreRetrieverMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L454>)

```go
func NewVectorStoreRetrieverMemory(embedder embeddingsiface.Embedder, vectorStore vectorstores.VectorStore, options ...vectorstore.VectorStoreMemoryOption) iface.Memory
```

NewVectorStoreRetrieverMemory creates a new vector store retriever memory.

<a name="RegisterMemoryType"></a>
## func [RegisterMemoryType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L78>)

```go
func RegisterMemoryType(memoryType string, creator func(ctx context.Context, config Config) (iface.Memory, error))
```

RegisterMemoryType registers a memory type with the global registry.

<a name="RunLoadTest"></a>
## func [RunLoadTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L623>)

```go
func RunLoadTest(t *testing.T, memory *AdvancedMockMemory, numOperations, concurrency int)
```

RunLoadTest executes a load test scenario on memory.

<a name="SetGlobalLogger"></a>
## func [SetGlobalLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L331>)

```go
func SetGlobalLogger(logger *Logger)
```

SetGlobalLogger sets the global logger instance.

<a name="SetGlobalMetrics"></a>
## func [SetGlobalMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L213>)

```go
func SetGlobalMetrics(meter metric.Meter)
```

SetGlobalMetrics is deprecated. Use InitMetrics instead. Deprecated: Use InitMetrics(meter, tracer) instead.

<a name="SetGlobalTracer"></a>
## func [SetGlobalTracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L225>)

```go
func SetGlobalTracer()
```

SetGlobalTracer sets the global tracer instance.

<a name="WithMaxHistorySize"></a>
## func [WithMaxHistorySize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L399>)

```go
func WithMaxHistorySize(maxSize int) providers.BaseHistoryOption
```

WithMaxHistorySize sets the maximum number of messages for the base history.

<a name="WithMaxSize"></a>
## func [WithMaxSize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L414>)

```go
func WithMaxSize(maxSize int) providers.CompositeHistoryOption
```

WithMaxSize sets the maximum number of messages for the composite history.

<a name="WithOnAddHook"></a>
## func [WithOnAddHook](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L419>)

```go
func WithOnAddHook(hook func(context.Context, schema.Message) error) providers.CompositeHistoryOption
```

WithOnAddHook sets an add hook for the composite history.

<a name="WithOnGetHook"></a>
## func [WithOnGetHook](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L424>)

```go
func WithOnGetHook(hook func(context.Context, []schema.Message) ([]schema.Message, error)) providers.CompositeHistoryOption
```

WithOnGetHook sets a get hook for the composite history.

<a name="WithSecondaryHistory"></a>
## func [WithSecondaryHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L409>)

```go
func WithSecondaryHistory(secondary iface.ChatMessageHistory) providers.CompositeHistoryOption
```

WithSecondaryHistory sets a secondary history for the composite history.

<a name="AdvancedMockChatMessageHistory"></a>
## type [AdvancedMockChatMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L331-L340>)

AdvancedMockChatMessageHistory provides a comprehensive mock for chat message history.

```go
type AdvancedMockChatMessageHistory struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockChatMessageHistory"></a>
### func [NewAdvancedMockChatMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L343>)

```go
func NewAdvancedMockChatMessageHistory(options ...MockHistoryOption) *AdvancedMockChatMessageHistory
```

NewAdvancedMockChatMessageHistory creates a new advanced mock chat message history.

<a name="AdvancedMockChatMessageHistory.AddAIMessage"></a>
### func (*AdvancedMockChatMessageHistory) [AddAIMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L419>)

```go
func (h *AdvancedMockChatMessageHistory) AddAIMessage(ctx context.Context, content string) error
```

<a name="AdvancedMockChatMessageHistory.AddMessage"></a>
### func (*AdvancedMockChatMessageHistory) [AddMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L391>)

```go
func (h *AdvancedMockChatMessageHistory) AddMessage(ctx context.Context, message schema.Message) error
```

Mock implementation methods for ChatMessageHistory.

<a name="AdvancedMockChatMessageHistory.AddUserMessage"></a>
### func (*AdvancedMockChatMessageHistory) [AddUserMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L415>)

```go
func (h *AdvancedMockChatMessageHistory) AddUserMessage(ctx context.Context, content string) error
```

<a name="AdvancedMockChatMessageHistory.Clear"></a>
### func (*AdvancedMockChatMessageHistory) [Clear](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L442>)

```go
func (h *AdvancedMockChatMessageHistory) Clear(ctx context.Context) error
```

<a name="AdvancedMockChatMessageHistory.GetCallCount"></a>
### func (*AdvancedMockChatMessageHistory) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L460>)

```go
func (h *AdvancedMockChatMessageHistory) GetCallCount() int
```

<a name="AdvancedMockChatMessageHistory.GetMessages"></a>
### func (*AdvancedMockChatMessageHistory) [GetMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L423>)

```go
func (h *AdvancedMockChatMessageHistory) GetMessages(ctx context.Context) ([]schema.Message, error)
```

<a name="AdvancedMockMemory"></a>
## type [AdvancedMockMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L56-L73>)

AdvancedMockMemory provides a comprehensive mock implementation for testing.

```go
type AdvancedMockMemory struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockMemory"></a>
### func [NewAdvancedMockMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L76>)

```go
func NewAdvancedMockMemory(memoryKey string, memoryType MemoryType, options ...MockMemoryOption) *AdvancedMockMemory
```

NewAdvancedMockMemory creates a new advanced mock with configurable behavior.

<a name="AdvancedMockMemory.CheckHealth"></a>
### func (*AdvancedMockMemory) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L317>)

```go
func (m *AdvancedMockMemory) CheckHealth() map[string]any
```

<a name="AdvancedMockMemory.Clear"></a>
### func (*AdvancedMockMemory) [Clear](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L274>)

```go
func (m *AdvancedMockMemory) Clear(ctx context.Context) error
```

<a name="AdvancedMockMemory.GetCallCount"></a>
### func (*AdvancedMockMemory) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L295>)

```go
func (m *AdvancedMockMemory) GetCallCount() int
```

<a name="AdvancedMockMemory.GetContextHistory"></a>
### func (*AdvancedMockMemory) [GetContextHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L309>)

```go
func (m *AdvancedMockMemory) GetContextHistory() []map[string]any
```

<a name="AdvancedMockMemory.GetMessages"></a>
### func (*AdvancedMockMemory) [GetMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L301>)

```go
func (m *AdvancedMockMemory) GetMessages() []schema.Message
```

<a name="AdvancedMockMemory.LoadMemoryVariables"></a>
### func (*AdvancedMockMemory) [LoadMemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L188>)

```go
func (m *AdvancedMockMemory) LoadMemoryVariables(ctx context.Context, inputs map[string]any) (map[string]any, error)
```

<a name="AdvancedMockMemory.MemoryVariables"></a>
### func (*AdvancedMockMemory) [MemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L182>)

```go
func (m *AdvancedMockMemory) MemoryVariables() []string
```

Mock implementation methods.

<a name="AdvancedMockMemory.SaveContext"></a>
### func (*AdvancedMockMemory) [SaveContext](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L226>)

```go
func (m *AdvancedMockMemory) SaveContext(ctx context.Context, inputs, outputs map[string]any) error
```

<a name="AdvancedMockcomponent"></a>
## type [AdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/advanced_mock.go#L8-L10>)

AdvancedMockcomponent is a mock implementation of Interface.

```go
type AdvancedMockcomponent struct {
    mock.Mock
}
```

<a name="NewAdvancedMockcomponent"></a>
### func [NewAdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/advanced_mock.go#L13>)

```go
func NewAdvancedMockcomponent() *AdvancedMockcomponent
```

NewAdvancedMockcomponent creates a new AdvancedMockcomponent.

<a name="BufferConfig"></a>
## type [BufferConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L53-L56>)

BufferConfig holds configuration specific to buffer memory implementations.

```go
type BufferConfig struct {
    ChatHistory ChatMessageHistory
    Config      `mapstructure:",squash"`
}
```

<a name="ChatMessageHistory"></a>
## type [ChatMessageHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L42>)

Ensure the main interfaces are imported for external use.

```go
type ChatMessageHistory = iface.ChatMessageHistory
```

<a name="ConcurrentTestRunner"></a>
## type [ConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L564-L568>)

ConcurrentTestRunner runs memory tests concurrently for performance testing.

```go
type ConcurrentTestRunner struct {
    NumGoroutines int
    TestDuration  time.Duration
    // contains filtered or unexported fields
}
```

<a name="NewConcurrentTestRunner"></a>
### func [NewConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L570>)

```go
func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner
```

<a name="ConcurrentTestRunner.Run"></a>
### func (*ConcurrentTestRunner) [Run](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L578>)

```go
func (r *ConcurrentTestRunner) Run() error
```

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L37-L50>)

Config holds the configuration for memory implementations. It uses struct tags for validation and mapping to configuration sources.

```go
type Config struct {
    Type           MemoryType    `mapstructure:"type" yaml:"type" env:"MEMORY_TYPE" validate:"required,oneof=buffer buffer_window summary summary_buffer vector_store vector_store_retriever"`
    MemoryKey      string        `mapstructure:"memory_key" yaml:"memory_key" env:"MEMORY_KEY" default:"history"`
    InputKey       string        `mapstructure:"input_key" yaml:"input_key" env:"INPUT_KEY" default:"input"`
    OutputKey      string        `mapstructure:"output_key" yaml:"output_key" env:"OUTPUT_KEY" default:"output"`
    HumanPrefix    string        `mapstructure:"human_prefix" yaml:"human_prefix" env:"HUMAN_PREFIX" default:"Human"`
    AIPrefix       string        `mapstructure:"ai_prefix" yaml:"ai_prefix" env:"AI_PREFIX" default:"AI"`
    WindowSize     int           `mapstructure:"window_size" yaml:"window_size" env:"WINDOW_SIZE" default:"5"`
    MaxTokenLimit  int           `mapstructure:"max_token_limit" yaml:"max_token_limit" env:"MAX_TOKEN_LIMIT" default:"2000"`
    TopK           int           `mapstructure:"top_k" yaml:"top_k" env:"TOP_K" default:"4"`
    Timeout        time.Duration `mapstructure:"timeout" yaml:"timeout" env:"MEMORY_TIMEOUT" default:"30s"`
    ReturnMessages bool          `mapstructure:"return_messages" yaml:"return_messages" env:"RETURN_MESSAGES" default:"false"`
    Enabled        bool          `mapstructure:"enabled" yaml:"enabled" env:"MEMORY_ENABLED" default:"true"`
}
```

<a name="CreateTestMemoryConfig"></a>
### func [CreateTestMemoryConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L483>)

```go
func CreateTestMemoryConfig(memoryType MemoryType) Config
```

CreateTestMemoryConfig creates a test memory configuration.

<a name="DefaultFactory"></a>
## type [DefaultFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L51>)

DefaultFactory is the default implementation of the Factory interface.

```go
type DefaultFactory struct{}
```

<a name="DefaultFactory.CreateMemory"></a>
### func (*DefaultFactory) [CreateMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L60>)

```go
func (f *DefaultFactory) CreateMemory(ctx context.Context, config Config) (Memory, error)
```

CreateMemory creates a memory instance based on the provided configuration. It validates the configuration and instantiates the appropriate memory implementation.

<a name="Factory"></a>
## type [Factory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L46-L48>)

Factory defines the interface for creating Memory instances.

```go
type Factory interface {
    CreateMemory(ctx context.Context, config Config) (Memory, error)
}
```

<a name="NewFactory"></a>
### func [NewFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L54>)

```go
func NewFactory() Factory
```

NewFactory creates a new memory factory.

<a name="IntegrationTestHelper"></a>
## type [IntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L675-L678>)

IntegrationTestHelper provides utilities for integration testing.

```go
type IntegrationTestHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewIntegrationTestHelper"></a>
### func [NewIntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L680>)

```go
func NewIntegrationTestHelper() *IntegrationTestHelper
```

<a name="IntegrationTestHelper.AddHistory"></a>
### func (*IntegrationTestHelper) [AddHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L691>)

```go
func (h *IntegrationTestHelper) AddHistory(name string, history *AdvancedMockChatMessageHistory)
```

<a name="IntegrationTestHelper.AddMemory"></a>
### func (*IntegrationTestHelper) [AddMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L687>)

```go
func (h *IntegrationTestHelper) AddMemory(name string, memory *AdvancedMockMemory)
```

<a name="IntegrationTestHelper.GetHistory"></a>
### func (*IntegrationTestHelper) [GetHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L699>)

```go
func (h *IntegrationTestHelper) GetHistory(name string) *AdvancedMockChatMessageHistory
```

<a name="IntegrationTestHelper.GetMemory"></a>
### func (*IntegrationTestHelper) [GetMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L695>)

```go
func (h *IntegrationTestHelper) GetMemory(name string) *AdvancedMockMemory
```

<a name="IntegrationTestHelper.Reset"></a>
### func (*IntegrationTestHelper) [Reset](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L703>)

```go
func (h *IntegrationTestHelper) Reset()
```

<a name="Logger"></a>
## type [Logger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L236-L238>)

Logger provides structured logging for memory operations. It integrates with OpenTelemetry tracing for consistent log correlation.

```go
type Logger struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalLogger"></a>
### func [GetGlobalLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L336>)

```go
func GetGlobalLogger() *Logger
```

GetGlobalLogger returns the global logger instance.

<a name="NewLogger"></a>
### func [NewLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L241>)

```go
func NewLogger(logger *slog.Logger) *Logger
```

NewLogger creates a new structured logger for memory operations.

<a name="Logger.LogError"></a>
### func (*Logger) [LogError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L303>)

```go
func (l *Logger) LogError(ctx context.Context, err error, operation string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr)
```

LogError logs errors with context.

<a name="Logger.LogMemoryLifecycle"></a>
### func (*Logger) [LogMemoryLifecycle](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L279>)

```go
func (l *Logger) LogMemoryLifecycle(ctx context.Context, event string, memoryType MemoryType, memoryKey string, additionalAttrs ...slog.Attr)
```

LogMemoryLifecycle logs memory lifecycle events.

<a name="Logger.LogMemoryOperation"></a>
### func (*Logger) [LogMemoryOperation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L251>)

```go
func (l *Logger) LogMemoryOperation(ctx context.Context, level slog.Level, operation string, memoryType MemoryType, memoryKey string, messageCount int, duration time.Duration, err error)
```

LogMemoryOperation logs memory operations with context.

<a name="Memory"></a>
## type [Memory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L41>)

Ensure the main interfaces are imported for external use.

```go
type Memory = iface.Memory
```

<a name="NewMemory"></a>
### func [NewMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L221>)

```go
func NewMemory(memoryType MemoryType, options ...Option) (Memory, error)
```

NewMemory is a convenience function for creating memory instances with functional options. It provides a simple way to create different types of memory with sensible defaults.

Parameters:

- memoryType: Type of memory to create (MemoryTypeBuffer, MemoryTypeBufferWindow, etc.)
- options: Optional configuration functions to customize the memory instance

Returns:

- Memory: The created memory instance
- error: Configuration or creation errors

Example:

```
memory, err := memory.NewMemory(memory.MemoryTypeBuffer,
    memory.WithMemoryKey("conversation"),
    memory.WithReturnMessages(true),
)
if err != nil {
    log.Fatal(err)
}
```

Example usage can be found in examples/agents/with\_memory/main.go

<a name="MemoryError"></a>
## type [MemoryError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L13-L19>)

MemoryError represents a memory-specific error with additional context. It follows the standard Op/Err/Code pattern used across all Beluga AI packages.

```go
type MemoryError struct {
    Op      string         // operation that failed
    Err     error          // underlying error
    Code    string         // error code for programmatic handling
    Message string         // human-readable message (optional)
    Context map[string]any // additional context (optional)
}
```

<a name="ErrContextCanceled"></a>
### func [ErrContextCanceled](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L167>)

```go
func ErrContextCanceled(op string, err error) *MemoryError
```

ErrContextCanceled returns an error for context cancellation.

<a name="ErrDeserialization"></a>
### func [ErrDeserialization](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L152>)

```go
func ErrDeserialization(op string, err error) *MemoryError
```

ErrDeserialization returns an error for deserialization failures.

<a name="ErrInvalidConfig"></a>
### func [ErrInvalidConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L112>)

```go
func ErrInvalidConfig(err error) *MemoryError
```

ErrInvalidConfig returns an error for invalid configuration.

<a name="ErrInvalidInput"></a>
### func [ErrInvalidInput](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L117>)

```go
func ErrInvalidInput(op string, err error) *MemoryError
```

ErrInvalidInput returns an error for invalid input parameters.

<a name="ErrMemoryOverflow"></a>
### func [ErrMemoryOverflow](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L162>)

```go
func ErrMemoryOverflow(op string, err error) *MemoryError
```

ErrMemoryOverflow returns an error for memory overflow conditions.

<a name="ErrNotFound"></a>
### func [ErrNotFound](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L137>)

```go
func ErrNotFound(op string, err error) *MemoryError
```

ErrNotFound returns an error for not found conditions.

<a name="ErrRetrievalError"></a>
### func [ErrRetrievalError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L127>)

```go
func ErrRetrievalError(op string, err error) *MemoryError
```

ErrRetrievalError returns an error for retrieval operation failures.

<a name="ErrSerialization"></a>
### func [ErrSerialization](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L147>)

```go
func ErrSerialization(op string, err error) *MemoryError
```

ErrSerialization returns an error for serialization failures.

<a name="ErrStorageError"></a>
### func [ErrStorageError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L122>)

```go
func ErrStorageError(op string, err error) *MemoryError
```

ErrStorageError returns an error for storage operation failures.

<a name="ErrTimeout"></a>
### func [ErrTimeout](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L132>)

```go
func ErrTimeout(op string, err error) *MemoryError
```

ErrTimeout returns an error for timeout conditions.

<a name="ErrTypeMismatch"></a>
### func [ErrTypeMismatch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L142>)

```go
func ErrTypeMismatch(op string, err error) *MemoryError
```

ErrTypeMismatch returns an error for type mismatch conditions.

<a name="ErrValidation"></a>
### func [ErrValidation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L157>)

```go
func ErrValidation(op string, err error) *MemoryError
```

ErrValidation returns an error for validation failures.

<a name="NewMemoryError"></a>
### func [NewMemoryError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L63>)

```go
func NewMemoryError(op, code string, err error) *MemoryError
```

NewMemoryError creates a new MemoryError following the Op/Err/Code pattern.

<a name="NewMemoryErrorWithMessage"></a>
### func [NewMemoryErrorWithMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L73>)

```go
func NewMemoryErrorWithMessage(op, code, message string, err error) *MemoryError
```

NewMemoryErrorWithMessage creates a new MemoryError with a custom message.

<a name="WrapError"></a>
### func [WrapError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L93>)

```go
func WrapError(err error, op, code string) *MemoryError
```

WrapError wraps an existing error with memory-specific context.

<a name="MemoryError.Error"></a>
### func (*MemoryError) [Error](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L22>)

```go
func (e *MemoryError) Error() string
```

Error implements the error interface.

<a name="MemoryError.Is"></a>
### func (*MemoryError) [Is](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L38>)

```go
func (e *MemoryError) Is(target error) bool
```

Is implements error comparison for specific error codes.

<a name="MemoryError.Unwrap"></a>
### func (*MemoryError) [Unwrap](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L33>)

```go
func (e *MemoryError) Unwrap() error
```

Unwrap returns the underlying error.

<a name="MemoryError.WithContext"></a>
### func (*MemoryError) [WithContext](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/errors.go#L84>)

```go
func (e *MemoryError) WithContext(key string, value any) *MemoryError
```

WithContext adds context information to the error.

<a name="MemoryFactory"></a>
## type [MemoryFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L18-L22>)

MemoryFactory defines the interface for creating Memory instances. This enables dependency injection and makes testing easier.

```go
type MemoryFactory interface {
    // CreateMemory creates a new Memory instance with the given configuration.
    // The config parameter contains memory-type-specific settings.
    CreateMemory(ctx context.Context, config Config) (iface.Memory, error)
}
```

<a name="MemoryMockcomponent"></a>
## type [MemoryMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory_mock.go#L8-L10>)

MemoryMockcomponent is a mock implementation of Interface.

```go
type MemoryMockcomponent struct {
    mock.Mock
}
```

<a name="NewMemoryMockcomponent"></a>
### func [NewMemoryMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory_mock.go#L13>)

```go
func NewMemoryMockcomponent() *MemoryMockcomponent
```

NewMemoryMockcomponent creates a new MemoryMockcomponent.

<a name="MemoryRegistry"></a>
## type [MemoryRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L26-L29>)

MemoryRegistry is the global registry for creating memory instances. It maintains a registry of available memory types and their creation functions.

```go
type MemoryRegistry struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalMemoryRegistry"></a>
### func [GetGlobalMemoryRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L93>)

```go
func GetGlobalMemoryRegistry() *MemoryRegistry
```

GetGlobalMemoryRegistry returns the global registry instance for advanced usage.

<a name="NewMemoryRegistry"></a>
### func [NewMemoryRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L32>)

```go
func NewMemoryRegistry() *MemoryRegistry
```

NewMemoryRegistry creates a new MemoryRegistry instance.

<a name="MemoryRegistry.Create"></a>
### func (*MemoryRegistry) [Create](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L46>)

```go
func (r *MemoryRegistry) Create(ctx context.Context, memoryType string, config Config) (iface.Memory, error)
```

Create creates a new memory instance using the registered memory type.

<a name="MemoryRegistry.ListMemoryTypes"></a>
### func (*MemoryRegistry) [ListMemoryTypes](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L63>)

```go
func (r *MemoryRegistry) ListMemoryTypes() []string
```

ListMemoryTypes returns a list of all registered memory type names.

<a name="MemoryRegistry.Register"></a>
### func (*MemoryRegistry) [Register](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/registry.go#L39>)

```go
func (r *MemoryRegistry) Register(memoryType string, creator func(ctx context.Context, config Config) (iface.Memory, error))
```

Register registers a new memory type with the registry.

<a name="MemoryScenarioRunner"></a>
## type [MemoryScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L715-L717>)

MemoryScenarioRunner runs common memory scenarios.

```go
type MemoryScenarioRunner struct {
    // contains filtered or unexported fields
}
```

<a name="NewMemoryScenarioRunner"></a>
### func [NewMemoryScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L719>)

```go
func NewMemoryScenarioRunner(memory iface.Memory) *MemoryScenarioRunner
```

<a name="MemoryScenarioRunner.RunConversationScenario"></a>
### func (*MemoryScenarioRunner) [RunConversationScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L723>)

```go
func (r *MemoryScenarioRunner) RunConversationScenario(ctx context.Context, exchanges int) error
```

<a name="MemoryScenarioRunner.RunMemoryRetentionTest"></a>
### func (*MemoryScenarioRunner) [RunMemoryRetentionTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L746>)

```go
func (r *MemoryScenarioRunner) RunMemoryRetentionTest(ctx context.Context, initialSize, targetSize int) error
```

<a name="MemoryType"></a>
## type [MemoryType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L13>)

MemoryType represents the type of memory implementation to use.

```go
type MemoryType string
```

<a name="MemoryTypeBuffer"></a>

```go
const (
    // MemoryTypeBuffer represents buffer memory that stores all messages.
    MemoryTypeBuffer MemoryType = "buffer"

    // MemoryTypeBufferWindow represents window buffer memory with a fixed size.
    MemoryTypeBufferWindow MemoryType = "buffer_window"

    // MemoryTypeSummary represents summary memory that condenses conversations.
    MemoryTypeSummary MemoryType = "summary"

    // MemoryTypeSummaryBuffer represents summary buffer memory combining both approaches.
    MemoryTypeSummaryBuffer MemoryType = "summary_buffer"

    // MemoryTypeVectorStore represents vector store memory for semantic retrieval.
    MemoryTypeVectorStore MemoryType = "vector_store"

    // MemoryTypeVectorStoreRetriever represents vector store retriever memory.
    MemoryTypeVectorStoreRetriever MemoryType = "vector_store_retriever"
)
```

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L18-L28>)

Metrics holds the metric instruments for memory operations.

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalMetrics"></a>
### func [GetGlobalMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L220>)

```go
func GetGlobalMetrics() *Metrics
```

GetGlobalMetrics is deprecated. Use GetMetrics instead. Deprecated: Use GetMetrics() instead.

<a name="GetMetrics"></a>
### func [GetMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L207>)

```go
func GetMetrics() *Metrics
```

GetMetrics returns the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L31>)

```go
func NewMetrics(meter metric.Meter, tracer trace.Tracer) *Metrics
```

NewMetrics creates a new Metrics instance with proper OTEL integration.

<a name="Metrics.RecordActiveMemory"></a>
### func (*Metrics) [RecordActiveMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L146>)

```go
func (m *Metrics) RecordActiveMemory(ctx context.Context, memoryType MemoryType, delta int64)
```

RecordActiveMemory records the creation or deletion of a memory instance.

<a name="Metrics.RecordError"></a>
### func (*Metrics) [RecordError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L122>)

```go
func (m *Metrics) RecordError(ctx context.Context, operation string, memoryType MemoryType, errorType string)
```

RecordError records a memory error.

<a name="Metrics.RecordMemorySize"></a>
### func (*Metrics) [RecordMemorySize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L135>)

```go
func (m *Metrics) RecordMemorySize(ctx context.Context, memoryType MemoryType, size int)
```

RecordMemorySize records the size/length of memory content.

<a name="Metrics.RecordOperation"></a>
### func (*Metrics) [RecordOperation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L82>)

```go
func (m *Metrics) RecordOperation(ctx context.Context, operation string, memoryType MemoryType, success bool)
```

RecordOperation records a memory operation with its attributes.

<a name="Metrics.RecordOperationDuration"></a>
### func (*Metrics) [RecordOperationDuration](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L95>)

```go
func (m *Metrics) RecordOperationDuration(ctx context.Context, operation string, memoryType MemoryType, duration time.Duration)
```

RecordOperationDuration records the duration of a memory operation.

<a name="MetricsMockcomponent"></a>
## type [MetricsMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics_mock.go#L8-L10>)

MetricsMockcomponent is a mock implementation of Interface.

```go
type MetricsMockcomponent struct {
    mock.Mock
}
```

<a name="NewMetricsMockcomponent"></a>
### func [NewMetricsMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics_mock.go#L13>)

```go
func NewMetricsMockcomponent() *MetricsMockcomponent
```

NewMetricsMockcomponent creates a new MetricsMockcomponent.

<a name="MockHistoryOption"></a>
## type [MockHistoryOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L358>)

MockHistoryOption defines functional options for mock history configuration.

```go
type MockHistoryOption func(*AdvancedMockChatMessageHistory)
```

<a name="WithHistoryDelay"></a>
### func [WithHistoryDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L376>)

```go
func WithHistoryDelay(delay time.Duration) MockHistoryOption
```

WithHistoryDelay adds artificial delay to mock operations.

<a name="WithHistoryError"></a>
### func [WithHistoryError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L368>)

```go
func WithHistoryError(shouldError bool, err error) MockHistoryOption
```

WithHistoryError configures the mock to return errors.

<a name="WithHistoryMaxSize"></a>
### func [WithHistoryMaxSize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L361>)

```go
func WithHistoryMaxSize(size int) MockHistoryOption
```

WithHistoryMaxSize sets the maximum history size.

<a name="WithPreloadedHistoryMessages"></a>
### func [WithPreloadedHistoryMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L383>)

```go
func WithPreloadedHistoryMessages(messages []schema.Message) MockHistoryOption
```

WithPreloadedHistoryMessages preloads messages into the mock history.

<a name="MockMemoryOption"></a>
## type [MockMemoryOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L97>)

MockMemoryOption defines functional options for mock configuration.

```go
type MockMemoryOption func(*AdvancedMockMemory)
```

<a name="WithErrorCode"></a>
### func [WithErrorCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L109>)

```go
func WithErrorCode(code string) MockMemoryOption
```

WithErrorCode configures the mock to return a specific memory error code. This is a convenience function for creating common error scenarios.

<a name="WithMaxMemorySize"></a>
### func [WithMaxMemorySize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L167>)

```go
func WithMaxMemorySize(size int) MockMemoryOption
```

WithMaxMemorySize sets the maximum memory size.

<a name="WithMemoryVariables"></a>
### func [WithMemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L146>)

```go
func WithMemoryVariables(variables []string) MockMemoryOption
```

WithMemoryVariables sets the memory variables for the mock.

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L100>)

```go
func WithMockError(shouldError bool, err error) MockMemoryOption
```

WithMockError configures the mock to return errors.

<a name="WithMockReturnMessages"></a>
### func [WithMockReturnMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L153>)

```go
func WithMockReturnMessages(returnMessages bool) MockMemoryOption
```

WithMockReturnMessages sets whether to return messages directly.

<a name="WithPreloadedMessages"></a>
### func [WithPreloadedMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L174>)

```go
func WithPreloadedMessages(messages []schema.Message) MockMemoryOption
```

WithPreloadedMessages preloads messages into the mock.

<a name="WithSimulateDelay"></a>
### func [WithSimulateDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/test_utils.go#L160>)

```go
func WithSimulateDelay(delay time.Duration) MockMemoryOption
```

WithSimulateDelay adds artificial delay to mock operations.

<a name="NoOpMemory"></a>
## type [NoOpMemory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L249>)

NoOpMemory is a no-op implementation of the Memory interface. It can be used when memory is disabled or for testing purposes.

```go
type NoOpMemory struct{}
```

<a name="NoOpMemory.Clear"></a>
### func (*NoOpMemory) [Clear](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L267>)

```go
func (m *NoOpMemory) Clear(ctx context.Context) error
```

Clear does nothing for no-op memory.

<a name="NoOpMemory.LoadMemoryVariables"></a>
### func (*NoOpMemory) [LoadMemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L257>)

```go
func (m *NoOpMemory) LoadMemoryVariables(ctx context.Context, inputs map[string]any) (map[string]any, error)
```

LoadMemoryVariables returns an empty map for no-op memory.

<a name="NoOpMemory.MemoryVariables"></a>
### func (*NoOpMemory) [MemoryVariables](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L252>)

```go
func (m *NoOpMemory) MemoryVariables() []string
```

MemoryVariables returns an empty slice for no-op memory.

<a name="NoOpMemory.SaveContext"></a>
### func (*NoOpMemory) [SaveContext](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/memory.go#L262>)

```go
func (m *NoOpMemory) SaveContext(ctx context.Context, inputs, outputs map[string]any) error
```

SaveContext does nothing for no-op memory.

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L72>)

Option is a functional option for configuring memory implementations.

```go
type Option func(*Config)
```

<a name="WithAIPrefix"></a>
### func [WithAIPrefix](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L131>)

```go
func WithAIPrefix(prefix string) Option
```

WithAIPrefix sets the AI message prefix.

<a name="WithHumanPrefix"></a>
### func [WithHumanPrefix](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L124>)

```go
func WithHumanPrefix(prefix string) Option
```

WithHumanPrefix sets the human message prefix.

<a name="WithInputKey"></a>
### func [WithInputKey](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L82>)

```go
func WithInputKey(key string) Option
```

WithInputKey sets the input key.

<a name="WithMaxTokenLimit"></a>
### func [WithMaxTokenLimit](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L110>)

```go
func WithMaxTokenLimit(limit int) Option
```

WithMaxTokenLimit sets the maximum token limit for summary memories.

<a name="WithMemoryKey"></a>
### func [WithMemoryKey](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L75>)

```go
func WithMemoryKey(key string) Option
```

WithMemoryKey sets the memory key.

<a name="WithOutputKey"></a>
### func [WithOutputKey](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L89>)

```go
func WithOutputKey(key string) Option
```

WithOutputKey sets the output key.

<a name="WithReturnMessages"></a>
### func [WithReturnMessages](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L96>)

```go
func WithReturnMessages(returnMessages bool) Option
```

WithReturnMessages sets whether to return messages directly.

<a name="WithTimeout"></a>
### func [WithTimeout](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L138>)

```go
func WithTimeout(timeout time.Duration) Option
```

WithTimeout sets the timeout for operations.

<a name="WithTopK"></a>
### func [WithTopK](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L117>)

```go
func WithTopK(k int) Option
```

WithTopK sets the number of documents to retrieve.

<a name="WithWindowSize"></a>
### func [WithWindowSize](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L103>)

```go
func WithWindowSize(size int) Option
```

WithWindowSize sets the window size for window-based memories.

<a name="SummaryConfig"></a>
## type [SummaryConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L59-L63>)

SummaryConfig holds configuration specific to summary memory implementations.

```go
type SummaryConfig struct {
    ChatHistory ChatMessageHistory
    LLM         core.Runnable
    Config      `mapstructure:",squash"`
}
```

<a name="Tracer"></a>
## type [Tracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L157-L159>)

Tracer provides tracing functionality for memory operations.

```go
type Tracer struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalTracer"></a>
### func [GetGlobalTracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L230>)

```go
func GetGlobalTracer() *Tracer
```

GetGlobalTracer returns the global tracer instance.

<a name="NewTracer"></a>
### func [NewTracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L162>)

```go
func NewTracer() *Tracer
```

NewTracer creates a new Tracer instance.

<a name="Tracer.RecordSpanError"></a>
### func (*Tracer) [RecordSpanError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L178>)

```go
func (t *Tracer) RecordSpanError(span trace.Span, err error)
```

RecordSpanError records an error on the span.

<a name="Tracer.StartSpan"></a>
### func (*Tracer) [StartSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/metrics.go#L169>)

```go
func (t *Tracer) StartSpan(ctx context.Context, operation string, memoryType MemoryType, memoryKey string) (context.Context, trace.Span)
```

StartSpan starts a new span for a memory operation.

<a name="VectorStoreConfig"></a>
## type [VectorStoreConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/memory/config.go#L66-L69>)

VectorStoreConfig holds configuration specific to vector store memory implementations.

```go
type VectorStoreConfig struct {
    Retriever core.Retriever
    Config    `mapstructure:",squash"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

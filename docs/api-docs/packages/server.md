---
title: server
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# server

```go
import "github.com/lookatitude/beluga-ai/pkg/server"
```

Package server provides configuration structures for server implementations.

Package server provides custom error types for the server package.

Package server provides metrics definitions for server implementations.

Package server provides HTTP API endpoints and MCP server implementation for the Beluga AI framework. It supports both REST APIs with and without streaming, as well as the Model Context Protocol (MCP).

The package provides: - REST server with streaming capabilities - MCP server for tool and resource integration - Comprehensive observability with OpenTelemetry - Structured error handling - Configurable middleware and handlers

Example usage:

```
// Create a REST server
restServer, err := server.NewRESTServer(
	server.WithRESTConfig(server.RESTConfig{
		Config: server.Config{
			Host: "localhost",
			Port: 8080,
		},
		APIBasePath: "/api/v1",
	}),
	server.WithLogger(logger),
	server.WithTracer(tracer),
	server.WithMeter(meter),
)

// Register a streaming handler
restServer.RegisterHandler("agents", agentHandler)

// Start the server
ctx := context.Background()
if err := restServer.Start(ctx); err != nil {
	log.Fatal(err)
}
```

Example MCP server usage:

```
// Create an MCP server
mcpServer, err := server.NewMCPServer(
	server.WithMCPConfig(server.MCPConfig{
		Config: server.Config{
			Host: "localhost",
			Port: 8081,
		},
		ServerName: "beluga-mcp",
	}),
)

// Register tools and resources
mcpServer.RegisterTool(calculatorTool)
mcpServer.RegisterResource(documentResource)

// Start the server
if err := mcpServer.Start(ctx); err != nil {
	log.Fatal(err)
}
```

Package server provides advanced test utilities and comprehensive mocks for testing server implementations. This file contains utilities designed to support both unit tests and integration tests.

Test Coverage Exclusions:

The following code paths are intentionally excluded from 100% coverage requirements:

1. Panic Recovery Paths:

- Panic handlers in RecoveryMiddleware
- These paths are difficult to test without causing actual panics in test code
- Panic recovery is tested through integration tests

2. Context Cancellation Edge Cases:

- Some context cancellation paths in server lifecycle operations are difficult to reliably test
- Race conditions between context cancellation and server shutdown

3. Error Paths Requiring System Conditions:

- Network errors that require actual network failures
- Port binding errors that require specific OS conditions
- File system errors that require specific OS conditions

4. Provider-Specific Untestable Paths:

- Provider implementations in pkg/server/providers/* require external service failures
- These are tested through integration tests rather than unit tests
- Provider registry initialization code (init() functions)

5. Test Utility Functions:

- Helper functions in test\_utils.go that are used by tests but not directly tested
- These are validated through their usage in actual test cases

6. Initialization Code:

- Package init() functions and global variable initialization
- Registry registration code that executes automatically

7. Re-exported Types:

- Types re-exported from iface package (config.go, errors.go)
- These are tested in the iface package, not re-tested here

All exclusions are documented here to maintain transparency about coverage goals. The target is 100% coverage of testable code paths, excluding the above categories.

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [`func AssertRequestHandling(t *testing.T, statusCode int, duration time.Duration, err error, expectError bool)`](<#AssertRequestHandling>)
- [`func AssertServerHealth(t *testing.T, health map[string]any, expectedStatus string)`](<#AssertServerHealth>)
- [`func AssertServerStatus(t *testing.T, server *AdvancedMockServer, expectedRunning bool)`](<#AssertServerStatus>)
- [`func IsServerError(err error) bool`](<#IsServerError>)
- [`func RunLoadTest(t *testing.T, server *AdvancedMockServer, numRequests, concurrency int)`](<#RunLoadTest>)
- [type APIEndpoint](<#APIEndpoint>)
- [type AdvancedMockServer](<#AdvancedMockServer>)
  - [`func NewAdvancedMockServer(name, serverType string, port int, options ...MockServerOption) *AdvancedMockServer`](<#NewAdvancedMockServer>)
  - [`func (s *AdvancedMockServer) AddConnection()`](<#AdvancedMockServer.AddConnection>)
  - [`func (s *AdvancedMockServer) CheckHealth() map[string]any`](<#AdvancedMockServer.CheckHealth>)
  - [`func (s *AdvancedMockServer) GetCallCount() int`](<#AdvancedMockServer.GetCallCount>)
  - [`func (s *AdvancedMockServer) GetConnectionCount() int`](<#AdvancedMockServer.GetConnectionCount>)
  - [`func (s *AdvancedMockServer) GetHandlerCount() int`](<#AdvancedMockServer.GetHandlerCount>)
  - [`func (s *AdvancedMockServer) GetName() string`](<#AdvancedMockServer.GetName>)
  - [`func (s *AdvancedMockServer) GetPort() int`](<#AdvancedMockServer.GetPort>)
  - [`func (s *AdvancedMockServer) GetRequestHistory() []RequestRecord`](<#AdvancedMockServer.GetRequestHistory>)
  - [`func (s *AdvancedMockServer) GetServerType() string`](<#AdvancedMockServer.GetServerType>)
  - [`func (s *AdvancedMockServer) HandleRequest(method, path string) (int, time.Duration, error)`](<#AdvancedMockServer.HandleRequest>)
  - [`func (s *AdvancedMockServer) IsRunning() bool`](<#AdvancedMockServer.IsRunning>)
  - [`func (s *AdvancedMockServer) RegisterHandler(pattern string, handler http.HandlerFunc)`](<#AdvancedMockServer.RegisterHandler>)
  - [`func (s *AdvancedMockServer) RemoveConnection()`](<#AdvancedMockServer.RemoveConnection>)
  - [`func (s *AdvancedMockServer) Start(ctx context.Context) error`](<#AdvancedMockServer.Start>)
  - [`func (s *AdvancedMockServer) Stop(ctx context.Context) error`](<#AdvancedMockServer.Stop>)
- [type BenchmarkHelper](<#BenchmarkHelper>)
  - [`func NewBenchmarkHelper(server *AdvancedMockServer, requestCount int) *BenchmarkHelper`](<#NewBenchmarkHelper>)
  - [`func (b *BenchmarkHelper) BenchmarkRequestHandling(iterations int) (time.Duration, error)`](<#BenchmarkHelper.BenchmarkRequestHandling>)
  - [`func (b *BenchmarkHelper) BenchmarkServerLifecycle(iterations int) (time.Duration, error)`](<#BenchmarkHelper.BenchmarkServerLifecycle>)
- [type Config](<#Config>)
  - [`func CreateTestServerConfig() Config`](<#CreateTestServerConfig>)
- [type ErrorCode](<#ErrorCode>)
- [type Float64Histogram](<#Float64Histogram>)
- [type Int64Counter](<#Int64Counter>)
- [type IntegrationMockcomponent](<#IntegrationMockcomponent>)
  - [`func NewIntegrationMockcomponent() *IntegrationMockcomponent`](<#NewIntegrationMockcomponent>)
- [type IntegrationTestHelper](<#IntegrationTestHelper>)
  - [`func NewIntegrationTestHelper() *IntegrationTestHelper`](<#NewIntegrationTestHelper>)
  - [`func (h *IntegrationTestHelper) AddServer(name string, server *AdvancedMockServer)`](<#IntegrationTestHelper.AddServer>)
  - [`func (h *IntegrationTestHelper) GetServer(name string) *AdvancedMockServer`](<#IntegrationTestHelper.GetServer>)
  - [`func (h *IntegrationTestHelper) Reset()`](<#IntegrationTestHelper.Reset>)
- [type Logger](<#Logger>)
- [type MCPConfig](<#MCPConfig>)
  - [`func DefaultMCPConfig() MCPConfig`](<#DefaultMCPConfig>)
- [type MCPResource](<#MCPResource>)
- [type MCPServer](<#MCPServer>)
  - [`func NewMCPServer(opts ...iface.Option) (MCPServer, error)`](<#NewMCPServer>)
- [type MCPServerMockcomponent](<#MCPServerMockcomponent>)
  - [`func NewMCPServerMockcomponent() *MCPServerMockcomponent`](<#NewMCPServerMockcomponent>)
- [type MCPTool](<#MCPTool>)
- [type Meter](<#Meter>)
- [type Metrics](<#Metrics>)
  - [`func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)`](<#NewMetrics>)
  - [`func (m *Metrics) RecordActiveConnections(ctx context.Context, count int64)`](<#Metrics.RecordActiveConnections>)
  - [`func (m *Metrics) RecordHTTPRequest(ctx context.Context, method, path string, statusCode int, duration time.Duration)`](<#Metrics.RecordHTTPRequest>)
  - [`func (m *Metrics) RecordHealthCheck(ctx context.Context, healthy bool)`](<#Metrics.RecordHealthCheck>)
  - [`func (m *Metrics) RecordMCPResourceRead(ctx context.Context, resourceURI string, success bool, duration time.Duration)`](<#Metrics.RecordMCPResourceRead>)
  - [`func (m *Metrics) RecordMCPToolCall(ctx context.Context, toolName string, success bool, duration time.Duration)`](<#Metrics.RecordMCPToolCall>)
  - [`func (m *Metrics) RecordResourceRegistration(ctx context.Context, resourceURI string)`](<#Metrics.RecordResourceRegistration>)
  - [`func (m *Metrics) RecordServerUptime(ctx context.Context, uptime time.Duration)`](<#Metrics.RecordServerUptime>)
  - [`func (m *Metrics) RecordToolRegistration(ctx context.Context, toolName string)`](<#Metrics.RecordToolRegistration>)
- [type Middleware](<#Middleware>)
  - [`func CORSMiddleware(allowedOrigins []string) Middleware`](<#CORSMiddleware>)
  - [`func LoggingMiddleware(logger Logger) Middleware`](<#LoggingMiddleware>)
  - [`func RecoveryMiddleware(logger Logger) Middleware`](<#RecoveryMiddleware>)
- [type MiddlewareMockcomponent](<#MiddlewareMockcomponent>)
  - [`func NewMiddlewareMockcomponent() *MiddlewareMockcomponent`](<#NewMiddlewareMockcomponent>)
- [type MockServerOption](<#MockServerOption>)
  - [`func WithLoadSimulation(enabled bool) MockServerOption`](<#WithLoadSimulation>)
  - [`func WithMockError(shouldError bool, err error) MockServerOption`](<#WithMockError>)
  - [`func WithResponseDelay(delay time.Duration) MockServerOption`](<#WithResponseDelay>)
- [type ObservabilityMockcomponent](<#ObservabilityMockcomponent>)
  - [`func NewObservabilityMockcomponent() *ObservabilityMockcomponent`](<#NewObservabilityMockcomponent>)
- [type Option](<#Option>)
- [type RESTConfig](<#RESTConfig>)
  - [`func DefaultRESTConfig() RESTConfig`](<#DefaultRESTConfig>)
- [type RESTServer](<#RESTServer>)
  - [`func NewRESTServer(opts ...iface.Option) (RESTServer, error)`](<#NewRESTServer>)
- [type RequestRecord](<#RequestRecord>)
- [type Server](<#Server>)
- [type ServerError](<#ServerError>)
  - [`func AsServerError(err error) (*ServerError, bool)`](<#AsServerError>)
- [type ServerMockcomponent](<#ServerMockcomponent>)
  - [`func NewServerMockcomponent() *ServerMockcomponent`](<#NewServerMockcomponent>)
- [type ServerScenarioRunner](<#ServerScenarioRunner>)
  - [`func NewServerScenarioRunner(server *AdvancedMockServer) *ServerScenarioRunner`](<#NewServerScenarioRunner>)
  - [`func (r *ServerScenarioRunner) RunAPIEndpointScenario(ctx context.Context, endpoints []APIEndpoint) error`](<#ServerScenarioRunner.RunAPIEndpointScenario>)
  - [`func (r *ServerScenarioRunner) RunConnectionManagementScenario(ctx context.Context, connectionCount int) error`](<#ServerScenarioRunner.RunConnectionManagementScenario>)
- [type Span](<#Span>)
- [type StreamingHandler](<#StreamingHandler>)
- [type TestRequest](<#TestRequest>)
  - [`func CreateTestRequests(count int) []TestRequest`](<#CreateTestRequests>)
- [type Tracer](<#Tracer>)

## Constants

<a name="ErrCodeInvalidRequest"></a>Re-export error code constants from iface.

```go
const (
    ErrCodeInvalidRequest   = iface.ErrCodeInvalidRequest
    ErrCodeMethodNotAllowed = iface.ErrCodeMethodNotAllowed
    ErrCodeNotFound         = iface.ErrCodeNotFound
    ErrCodeInternalError    = iface.ErrCodeInternalError
    ErrCodeTimeout          = iface.ErrCodeTimeout
    ErrCodeRateLimited      = iface.ErrCodeRateLimited
    ErrCodeUnauthorized     = iface.ErrCodeUnauthorized
    ErrCodeForbidden        = iface.ErrCodeForbidden

    // MCP error codes.
    ErrCodeToolNotFound     = iface.ErrCodeToolNotFound
    ErrCodeResourceNotFound = iface.ErrCodeResourceNotFound
    ErrCodeToolExecution    = iface.ErrCodeToolExecution
    ErrCodeResourceRead     = iface.ErrCodeResourceRead
    ErrCodeInvalidToolInput = iface.ErrCodeInvalidToolInput
    ErrCodeMCPProtocol      = iface.ErrCodeMCPProtocol

    // Server error codes.
    ErrCodeServerStartup    = iface.ErrCodeServerStartup
    ErrCodeServerShutdown   = iface.ErrCodeServerShutdown
    ErrCodeConfigValidation = iface.ErrCodeConfigValidation
)
```

## Variables

<a name="WithConfig"></a>Re-export functions from iface.

```go
var (
    WithConfig      = iface.WithConfig
    WithRESTConfig  = iface.WithRESTConfig
    WithMCPConfig   = iface.WithMCPConfig
    WithLogger      = iface.WithLogger
    WithTracer      = iface.WithTracer
    WithMeter       = iface.WithMeter
    WithMiddleware  = iface.WithMiddleware
    WithMCPTool     = iface.WithMCPTool
    WithMCPResource = iface.WithMCPResource
)
```

<a name="NewInvalidRequestError"></a>Re-export error constructor functions from iface.

```go
var (
    NewInvalidRequestError   = iface.NewInvalidRequestError
    NewNotFoundError         = iface.NewNotFoundError
    NewInternalError         = iface.NewInternalError
    NewTimeoutError          = iface.NewTimeoutError
    NewToolNotFoundError     = iface.NewToolNotFoundError
    NewResourceNotFoundError = iface.NewResourceNotFoundError
    NewToolExecutionError    = iface.NewToolExecutionError
    NewResourceReadError     = iface.NewResourceReadError
    NewInvalidToolInputError = iface.NewInvalidToolInputError
    NewConfigValidationError = iface.NewConfigValidationError
    NewMCPProtocolError      = iface.NewMCPProtocolError
)
```

<a name="AssertRequestHandling"></a>
## func [AssertRequestHandling](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L335>)

```go
func AssertRequestHandling(t *testing.T, statusCode int, duration time.Duration, err error, expectError bool)
```

AssertRequestHandling validates request handling.

<a name="AssertServerHealth"></a>
## func [AssertServerHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L348>)

```go
func AssertServerHealth(t *testing.T, health map[string]any, expectedStatus string)
```

AssertServerHealth validates server health check results.

<a name="AssertServerStatus"></a>
## func [AssertServerStatus](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L329>)

```go
func AssertServerStatus(t *testing.T, server *AdvancedMockServer, expectedRunning bool)
```

AssertServerStatus validates server status.

<a name="IsServerError"></a>
## func [IsServerError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/errors.go#L57>)

```go
func IsServerError(err error) bool
```

IsServerError checks if an error is a ServerError.

<a name="RunLoadTest"></a>
## func [RunLoadTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L361>)

```go
func RunLoadTest(t *testing.T, server *AdvancedMockServer, numRequests, concurrency int)
```

RunLoadTest executes a load test scenario on server.

<a name="APIEndpoint"></a>
## type [APIEndpoint](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L494-L498>)

```go
type APIEndpoint struct {
    Method      string
    Path        string
    ExpectError bool
}
```

<a name="AdvancedMockServer"></a>
## type [AdvancedMockServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L57-L74>)

AdvancedMockServer provides a comprehensive mock implementation for testing.

```go
type AdvancedMockServer struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockServer"></a>
### func [NewAdvancedMockServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L86>)

```go
func NewAdvancedMockServer(name, serverType string, port int, options ...MockServerOption) *AdvancedMockServer
```

NewAdvancedMockServer creates a new advanced mock server.

<a name="AdvancedMockServer.AddConnection"></a>
### func (*AdvancedMockServer) [AddConnection](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L208>)

```go
func (s *AdvancedMockServer) AddConnection()
```

<a name="AdvancedMockServer.CheckHealth"></a>
### func (*AdvancedMockServer) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L267>)

```go
func (s *AdvancedMockServer) CheckHealth() map[string]any
```

<a name="AdvancedMockServer.GetCallCount"></a>
### func (*AdvancedMockServer) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L241>)

```go
func (s *AdvancedMockServer) GetCallCount() int
```

<a name="AdvancedMockServer.GetConnectionCount"></a>
### func (*AdvancedMockServer) [GetConnectionCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L247>)

```go
func (s *AdvancedMockServer) GetConnectionCount() int
```

<a name="AdvancedMockServer.GetHandlerCount"></a>
### func (*AdvancedMockServer) [GetHandlerCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L261>)

```go
func (s *AdvancedMockServer) GetHandlerCount() int
```

<a name="AdvancedMockServer.GetName"></a>
### func (*AdvancedMockServer) [GetName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L223>)

```go
func (s *AdvancedMockServer) GetName() string
```

Helper methods for testing.

<a name="AdvancedMockServer.GetPort"></a>
### func (*AdvancedMockServer) [GetPort](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L231>)

```go
func (s *AdvancedMockServer) GetPort() int
```

<a name="AdvancedMockServer.GetRequestHistory"></a>
### func (*AdvancedMockServer) [GetRequestHistory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L253>)

```go
func (s *AdvancedMockServer) GetRequestHistory() []RequestRecord
```

<a name="AdvancedMockServer.GetServerType"></a>
### func (*AdvancedMockServer) [GetServerType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L227>)

```go
func (s *AdvancedMockServer) GetServerType() string
```

<a name="AdvancedMockServer.HandleRequest"></a>
### func (*AdvancedMockServer) [HandleRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L167>)

```go
func (s *AdvancedMockServer) HandleRequest(method, path string) (int, time.Duration, error)
```

<a name="AdvancedMockServer.IsRunning"></a>
### func (*AdvancedMockServer) [IsRunning](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L235>)

```go
func (s *AdvancedMockServer) IsRunning() bool
```

<a name="AdvancedMockServer.RegisterHandler"></a>
### func (*AdvancedMockServer) [RegisterHandler](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L202>)

```go
func (s *AdvancedMockServer) RegisterHandler(pattern string, handler http.HandlerFunc)
```

<a name="AdvancedMockServer.RemoveConnection"></a>
### func (*AdvancedMockServer) [RemoveConnection](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L214>)

```go
func (s *AdvancedMockServer) RemoveConnection()
```

<a name="AdvancedMockServer.Start"></a>
### func (*AdvancedMockServer) [Start](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L130>)

```go
func (s *AdvancedMockServer) Start(ctx context.Context) error
```

Mock server operations.

<a name="AdvancedMockServer.Stop"></a>
### func (*AdvancedMockServer) [Stop](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L148>)

```go
func (s *AdvancedMockServer) Stop(ctx context.Context) error
```

<a name="BenchmarkHelper"></a>
## type [BenchmarkHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L534-L537>)

BenchmarkHelper provides benchmarking utilities for servers.

```go
type BenchmarkHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewBenchmarkHelper"></a>
### func [NewBenchmarkHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L539>)

```go
func NewBenchmarkHelper(server *AdvancedMockServer, requestCount int) *BenchmarkHelper
```

<a name="BenchmarkHelper.BenchmarkRequestHandling"></a>
### func (*BenchmarkHelper) [BenchmarkRequestHandling](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L546>)

```go
func (b *BenchmarkHelper) BenchmarkRequestHandling(iterations int) (time.Duration, error)
```

<a name="BenchmarkHelper.BenchmarkServerLifecycle"></a>
### func (*BenchmarkHelper) [BenchmarkServerLifecycle](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L571>)

```go
func (b *BenchmarkHelper) BenchmarkServerLifecycle(iterations int) (time.Duration, error)
```

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L10>)

Re-export types from iface to maintain backward compatibility.

```go
type Config = iface.Config
```

<a name="CreateTestServerConfig"></a>
### func [CreateTestServerConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L286>)

```go
func CreateTestServerConfig() Config
```

CreateTestServerConfig creates a test server configuration.

<a name="ErrorCode"></a>
## type [ErrorCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/errors.go#L12>)

Re-export error types from iface for consistency with other packages.

```go
type ErrorCode = iface.ErrorCode
```

<a name="Float64Histogram"></a>
## type [Float64Histogram](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L20>)

Re-export types from iface to maintain backward compatibility.

```go
type Float64Histogram = iface.Float64Histogram
```

<a name="Int64Counter"></a>
## type [Int64Counter](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L19>)

Re-export types from iface to maintain backward compatibility.

```go
type Int64Counter = iface.Int64Counter
```

<a name="IntegrationMockcomponent"></a>
## type [IntegrationMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/integration_mock.go#L8-L10>)

IntegrationMockcomponent is a mock implementation of Interface.

```go
type IntegrationMockcomponent struct {
    mock.Mock
}
```

<a name="NewIntegrationMockcomponent"></a>
### func [NewIntegrationMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/integration_mock.go#L13>)

```go
func NewIntegrationMockcomponent() *IntegrationMockcomponent
```

NewIntegrationMockcomponent creates a new IntegrationMockcomponent.

<a name="IntegrationTestHelper"></a>
## type [IntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L423-L425>)

IntegrationTestHelper provides utilities for integration testing.

```go
type IntegrationTestHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewIntegrationTestHelper"></a>
### func [NewIntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L427>)

```go
func NewIntegrationTestHelper() *IntegrationTestHelper
```

<a name="IntegrationTestHelper.AddServer"></a>
### func (*IntegrationTestHelper) [AddServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L433>)

```go
func (h *IntegrationTestHelper) AddServer(name string, server *AdvancedMockServer)
```

<a name="IntegrationTestHelper.GetServer"></a>
### func (*IntegrationTestHelper) [GetServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L437>)

```go
func (h *IntegrationTestHelper) GetServer(name string) *AdvancedMockServer
```

<a name="IntegrationTestHelper.Reset"></a>
### func (*IntegrationTestHelper) [Reset](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L441>)

```go
func (h *IntegrationTestHelper) Reset()
```

<a name="Logger"></a>
## type [Logger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L15>)

Re-export types from iface to maintain backward compatibility.

```go
type Logger = iface.Logger
```

<a name="MCPConfig"></a>
## type [MCPConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L12>)

Re-export types from iface to maintain backward compatibility.

```go
type MCPConfig = iface.MCPConfig
```

<a name="DefaultMCPConfig"></a>
### func [DefaultMCPConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L182>)

```go
func DefaultMCPConfig() MCPConfig
```

DefaultMCPConfig returns a default MCP server configuration. The configuration includes sensible defaults for MCP protocol: - Host: localhost, Port: 8081 - Server name: "beluga-mcp-server" - Protocol version: "2024-11-05" - Max concurrent requests: 10

Returns:

- MCPConfig: Default MCP server configuration

Example:

```
config := server.DefaultMCPConfig()
config.ServerName = "my-mcp-server"
server, _ := server.NewMCPServer(server.WithMCPConfig(config))
```

Example usage can be found in examples/server/basic/main.go

<a name="MCPResource"></a>
## type [MCPResource](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L22>)

Re-export types from iface to maintain backward compatibility.

```go
type MCPResource = iface.MCPResource
```

<a name="MCPServer"></a>
## type [MCPServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L26>)

Re-export types from iface to maintain backward compatibility.

```go
type MCPServer = iface.MCPServer
```

<a name="NewMCPServer"></a>
### func [NewMCPServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L118>)

```go
func NewMCPServer(opts ...iface.Option) (MCPServer, error)
```

NewMCPServer creates a new MCP server instance with the provided options. It implements the MCPServer interface and provides MCP protocol support for tools and resources. This factory function creates the MCP server implementation directly.

Parameters:

- opts: Optional configuration functions (WithMCPConfig, WithLogger, etc.)

Returns:

- MCPServer: A new MCP server instance
- error: Server creation errors

Example:

```
server, err := server.NewMCPServer(
    server.WithMCPConfig(server.DefaultMCPConfig()),
)
if err != nil {
    log.Fatal(err)
}
server.RegisterTool(calculatorTool)
err = server.Start(ctx)
```

Example usage can be found in examples/server/basic/main.go

<a name="MCPServerMockcomponent"></a>
## type [MCPServerMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/mcp_server_mock.go#L8-L10>)

MCPServerMockcomponent is a mock implementation of Interface.

```go
type MCPServerMockcomponent struct {
    mock.Mock
}
```

<a name="NewMCPServerMockcomponent"></a>
### func [NewMCPServerMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/mcp_server_mock.go#L13>)

```go
func NewMCPServerMockcomponent() *MCPServerMockcomponent
```

NewMCPServerMockcomponent creates a new MCPServerMockcomponent.

<a name="MCPTool"></a>
## type [MCPTool](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L21>)

Re-export types from iface to maintain backward compatibility.

```go
type MCPTool = iface.MCPTool
```

<a name="Meter"></a>
## type [Meter](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L18>)

Re-export types from iface to maintain backward compatibility.

```go
type Meter = iface.Meter
```

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L15-L37>)

Metrics contains all metrics for the server package.

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L40>)

```go
func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)
```

NewMetrics creates a new Metrics instance with the given meter.

<a name="Metrics.RecordActiveConnections"></a>
### func (*Metrics) [RecordActiveConnections](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L202>)

```go
func (m *Metrics) RecordActiveConnections(ctx context.Context, count int64)
```

RecordActiveConnections records the number of active connections.

<a name="Metrics.RecordHTTPRequest"></a>
### func (*Metrics) [RecordHTTPRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L174>)

```go
func (m *Metrics) RecordHTTPRequest(ctx context.Context, method, path string, statusCode int, duration time.Duration)
```

RecordHTTPRequest records an HTTP request with its duration and status.

<a name="Metrics.RecordHealthCheck"></a>
### func (*Metrics) [RecordHealthCheck](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L275>)

```go
func (m *Metrics) RecordHealthCheck(ctx context.Context, healthy bool)
```

RecordHealthCheck records a health check.

<a name="Metrics.RecordMCPResourceRead"></a>
### func (*Metrics) [RecordMCPResourceRead](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L232>)

```go
func (m *Metrics) RecordMCPResourceRead(ctx context.Context, resourceURI string, success bool, duration time.Duration)
```

RecordMCPResourceRead records an MCP resource read with its duration and success status.

<a name="Metrics.RecordMCPToolCall"></a>
### func (*Metrics) [RecordMCPToolCall](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L207>)

```go
func (m *Metrics) RecordMCPToolCall(ctx context.Context, toolName string, success bool, duration time.Duration)
```

RecordMCPToolCall records an MCP tool call with its duration and success status.

<a name="Metrics.RecordResourceRegistration"></a>
### func (*Metrics) [RecordResourceRegistration](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L266>)

```go
func (m *Metrics) RecordResourceRegistration(ctx context.Context, resourceURI string)
```

RecordResourceRegistration records the registration of an MCP resource.

<a name="Metrics.RecordServerUptime"></a>
### func (*Metrics) [RecordServerUptime](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L284>)

```go
func (m *Metrics) RecordServerUptime(ctx context.Context, uptime time.Duration)
```

RecordServerUptime records server uptime.

<a name="Metrics.RecordToolRegistration"></a>
### func (*Metrics) [RecordToolRegistration](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/metrics.go#L257>)

```go
func (m *Metrics) RecordToolRegistration(ctx context.Context, toolName string)
```

RecordToolRegistration records the registration of an MCP tool.

<a name="Middleware"></a>
## type [Middleware](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L14>)

Re-export types from iface to maintain backward compatibility.

```go
type Middleware = iface.Middleware
```

<a name="CORSMiddleware"></a>
### func [CORSMiddleware](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L207>)

```go
func CORSMiddleware(allowedOrigins []string) Middleware
```

CORSMiddleware returns a CORS middleware function.

<a name="LoggingMiddleware"></a>
### func [LoggingMiddleware](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L246>)

```go
func LoggingMiddleware(logger Logger) Middleware
```

LoggingMiddleware returns a logging middleware function.

<a name="RecoveryMiddleware"></a>
### func [RecoveryMiddleware](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L261>)

```go
func RecoveryMiddleware(logger Logger) Middleware
```

RecoveryMiddleware returns a panic recovery middleware function.

<a name="MiddlewareMockcomponent"></a>
## type [MiddlewareMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/middleware_mock.go#L8-L10>)

MiddlewareMockcomponent is a mock implementation of Interface.

```go
type MiddlewareMockcomponent struct {
    mock.Mock
}
```

<a name="NewMiddlewareMockcomponent"></a>
### func [NewMiddlewareMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/middleware_mock.go#L13>)

```go
func NewMiddlewareMockcomponent() *MiddlewareMockcomponent
```

NewMiddlewareMockcomponent creates a new MiddlewareMockcomponent.

<a name="MockServerOption"></a>
## type [MockServerOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L105>)

MockServerOption defines functional options for mock configuration.

```go
type MockServerOption func(*AdvancedMockServer)
```

<a name="WithLoadSimulation"></a>
### func [WithLoadSimulation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L123>)

```go
func WithLoadSimulation(enabled bool) MockServerOption
```

WithLoadSimulation enables load simulation.

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L108>)

```go
func WithMockError(shouldError bool, err error) MockServerOption
```

WithMockError configures the mock to return errors.

<a name="WithResponseDelay"></a>
### func [WithResponseDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L116>)

```go
func WithResponseDelay(delay time.Duration) MockServerOption
```

WithResponseDelay adds artificial delay to mock operations.

<a name="ObservabilityMockcomponent"></a>
## type [ObservabilityMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/observability_mock.go#L8-L10>)

ObservabilityMockcomponent is a mock implementation of Interface.

```go
type ObservabilityMockcomponent struct {
    mock.Mock
}
```

<a name="NewObservabilityMockcomponent"></a>
### func [NewObservabilityMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/observability_mock.go#L13>)

```go
func NewObservabilityMockcomponent() *ObservabilityMockcomponent
```

NewObservabilityMockcomponent creates a new ObservabilityMockcomponent.

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L13>)

Re-export types from iface to maintain backward compatibility.

```go
type Option = iface.Option
```

<a name="RESTConfig"></a>
## type [RESTConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L11>)

Re-export types from iface to maintain backward compatibility.

```go
type RESTConfig = iface.RESTConfig
```

<a name="DefaultRESTConfig"></a>
### func [DefaultRESTConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L141>)

```go
func DefaultRESTConfig() RESTConfig
```

DefaultRESTConfig returns a default REST server configuration. The configuration includes sensible defaults for most use cases: - Host: localhost, Port: 8080 - Timeouts: 30s read/write, 120s idle - CORS enabled with wildcard origins - Metrics and tracing enabled

Returns:

- RESTConfig: Default REST server configuration

Example:

```
config := server.DefaultRESTConfig()
config.Port = 9090
server, _ := server.NewRESTServer(server.WithRESTConfig(config))
```

Example usage can be found in examples/server/basic/main.go

<a name="RESTServer"></a>
## type [RESTServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L25>)

Re-export types from iface to maintain backward compatibility.

```go
type RESTServer = iface.RESTServer
```

<a name="NewRESTServer"></a>
### func [NewRESTServer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server.go#L91>)

```go
func NewRESTServer(opts ...iface.Option) (RESTServer, error)
```

NewRESTServer creates a new REST server instance with the provided options. It implements the RESTServer interface and provides HTTP endpoints with streaming support. This factory function creates the REST server implementation directly.

Parameters:

- opts: Optional configuration functions (WithRESTConfig, WithLogger, WithTracer, etc.)

Returns:

- RESTServer: A new REST server instance
- error: Server creation errors

Example:

```
server, err := server.NewRESTServer(
    server.WithRESTConfig(server.DefaultRESTConfig()),
    server.WithLogger(logger),
)
if err != nil {
    log.Fatal(err)
}
err = server.Start(ctx)
```

Example usage can be found in examples/server/basic/main.go

<a name="RequestRecord"></a>
## type [RequestRecord](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L77-L83>)

RequestRecord tracks server request history for testing.

```go
type RequestRecord struct {
    Timestamp  time.Time
    Method     string
    Path       string
    StatusCode int
    Duration   time.Duration
}
```

<a name="Server"></a>
## type [Server](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L24>)

Re-export types from iface to maintain backward compatibility.

```go
type Server = iface.Server
```

<a name="ServerError"></a>
## type [ServerError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/errors.go#L13>)

Re-export error types from iface for consistency with other packages.

```go
type ServerError = iface.ServerError
```

<a name="AsServerError"></a>
### func [AsServerError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/errors.go#L63>)

```go
func AsServerError(err error) (*ServerError, bool)
```

AsServerError attempts to convert an error to a ServerError.

<a name="ServerMockcomponent"></a>
## type [ServerMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server_mock.go#L8-L10>)

ServerMockcomponent is a mock implementation of Interface.

```go
type ServerMockcomponent struct {
    mock.Mock
}
```

<a name="NewServerMockcomponent"></a>
### func [NewServerMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/server_mock.go#L13>)

```go
func NewServerMockcomponent() *ServerMockcomponent
```

NewServerMockcomponent creates a new ServerMockcomponent.

<a name="ServerScenarioRunner"></a>
## type [ServerScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L451-L453>)

ServerScenarioRunner runs common server scenarios.

```go
type ServerScenarioRunner struct {
    // contains filtered or unexported fields
}
```

<a name="NewServerScenarioRunner"></a>
### func [NewServerScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L455>)

```go
func NewServerScenarioRunner(server *AdvancedMockServer) *ServerScenarioRunner
```

<a name="ServerScenarioRunner.RunAPIEndpointScenario"></a>
### func (*ServerScenarioRunner) [RunAPIEndpointScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L461>)

```go
func (r *ServerScenarioRunner) RunAPIEndpointScenario(ctx context.Context, endpoints []APIEndpoint) error
```

<a name="ServerScenarioRunner.RunConnectionManagementScenario"></a>
### func (*ServerScenarioRunner) [RunConnectionManagementScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L500>)

```go
func (r *ServerScenarioRunner) RunConnectionManagementScenario(ctx context.Context, connectionCount int) error
```

<a name="Span"></a>
## type [Span](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L17>)

Re-export types from iface to maintain backward compatibility.

```go
type Span = iface.Span
```

<a name="StreamingHandler"></a>
## type [StreamingHandler](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L23>)

Re-export types from iface to maintain backward compatibility.

```go
type StreamingHandler = iface.StreamingHandler
```

<a name="TestRequest"></a>
## type [TestRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L320-L324>)

```go
type TestRequest struct {
    Method string
    Path   string
    Body   string
}
```

<a name="CreateTestRequests"></a>
### func [CreateTestRequests](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/test_utils.go#L304>)

```go
func CreateTestRequests(count int) []TestRequest
```

CreateTestRequests creates test HTTP requests for simulation.

<a name="Tracer"></a>
## type [Tracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/server/config.go#L16>)

Re-export types from iface to maintain backward compatibility.

```go
type Tracer = iface.Tracer
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

---
title: embeddings
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# embeddings

```go
import "github.com/lookatitude/beluga-ai/pkg/embeddings"
```

Package embeddings provides interfaces and implementations for text embedding generation. This package follows the Beluga AI Framework design patterns with clean separation of interfaces, implementations, and configuration management.

Key features: - Focused Embedder interface following Interface Segregation Principle (ISP) - Functional options pattern for flexible configuration - Comprehensive error handling with custom error types - OpenTelemetry tracing and metrics integration - Multiple providers: OpenAI, Ollama, and mock for testing - Extensive test coverage with table-driven tests and benchmarks

Package embeddings provides custom error types for the embeddings package.

Package embeddings provides a standardized factory pattern for embedder creation. This follows the Beluga AI Framework design patterns with consistent factory interfaces.

Package embeddings provides advanced test utilities and comprehensive mocks for testing embedding implementations. This file contains utilities designed to support both unit tests and integration tests.

Test Coverage Exclusions:

The following code paths are intentionally excluded from 100% coverage requirements:

1. Panic Recovery Paths:

- Panic handlers in concurrent test runners (ConcurrentTestRunner)
- These paths are difficult to test without causing actual panics in test code

2. Context Cancellation Edge Cases:

- Some context cancellation paths in embedding operations are difficult to reliably test
- Race conditions between context cancellation and embedding generation

3. Error Paths Requiring System Conditions:

- Network errors that require actual network failures (provider API calls)
- File system errors that require specific OS conditions
- Memory exhaustion scenarios during large batch operations

4. Provider-Specific Untestable Paths:

- Provider implementations have paths that require external service failures
- These are tested through integration tests rather than unit tests
- Cohere provider client initialization (not yet fully implemented)

5. Test Utility Functions:

- Helper functions in test\_utils.go that are used by tests but not directly tested
- These are validated through their usage in actual test cases

6. Initialization Code:

- Package init() functions and global variable initialization
- These are executed automatically and difficult to test in isolation

7. Provider Mock Limitations:

- Some provider-specific error scenarios require actual API responses
- Rate limiting behavior that depends on actual API responses
- Authentication failures that require actual API validation

All exclusions are documented here to maintain transparency about coverage goals. The target is 100% coverage of testable code paths, excluding the above categories.

## Index

- [Constants](<#constants>)
- [`func AssertEmbedding(t *testing.T, embedding []float32, expectedDim int)`](<#AssertEmbedding>)
- [`func AssertEmbeddings(t *testing.T, embeddings [][]float32, expectedCount, expectedDim int)`](<#AssertEmbeddings>)
- [`func AssertErrorType(t *testing.T, err error, expectedCode string)`](<#AssertErrorType>)
- [`func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)`](<#AssertHealthCheck>)
- [`func AssertSimilarityScore(t *testing.T, emb1, emb2 []float32, minSimilarity float32)`](<#AssertSimilarityScore>)
- [`func CosineSimilarity(a, b []float32) float32`](<#CosineSimilarity>)
- [`func CreateTestEmbeddings(count, dimension int) [][]float32`](<#CreateTestEmbeddings>)
- [`func CreateTestTexts(count int) []string`](<#CreateTestTexts>)
- [`func EuclideanDistance(a, b []float32) float32`](<#EuclideanDistance>)
- [`func GetGlobalRegistry() registryiface.Registry`](<#GetGlobalRegistry>)
- [`func GetRegistry() registryiface.Registry`](<#GetRegistry>)
- [`func InitMetrics(meter metric.Meter, tracer trace.Tracer)`](<#InitMetrics>)
- [`func IsEmbeddingError(err error) bool`](<#IsEmbeddingError>)
- [`func ListAvailableProviders() []string`](<#ListAvailableProviders>)
- [`func NewEmbedder(ctx context.Context, name string, config Config) (iface.Embedder, error)`](<#NewEmbedder>)
- [`func RegisterGlobal(name string, creator func(ctx context.Context, config Config) (iface.Embedder, error))`](<#RegisterGlobal>)
- [`func RunLoadTest(t *testing.T, embedder *AdvancedMockEmbedder, numOperations, concurrency int)`](<#RunLoadTest>)
- [type AdvancedMockEmbedder](<#AdvancedMockEmbedder>)
  - [`func NewAdvancedMockEmbedder(providerName, modelName string, dimension int, options ...MockEmbedderOption) *AdvancedMockEmbedder`](<#NewAdvancedMockEmbedder>)
  - [`func (e *AdvancedMockEmbedder) CheckHealth() map[string]any`](<#AdvancedMockEmbedder.CheckHealth>)
  - [`func (e *AdvancedMockEmbedder) EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)`](<#AdvancedMockEmbedder.EmbedDocuments>)
  - [`func (e *AdvancedMockEmbedder) EmbedQuery(ctx context.Context, text string) ([]float32, error)`](<#AdvancedMockEmbedder.EmbedQuery>)
  - [`func (e *AdvancedMockEmbedder) GetCallCount() int`](<#AdvancedMockEmbedder.GetCallCount>)
  - [`func (e *AdvancedMockEmbedder) GetDimension(ctx context.Context) (int, error)`](<#AdvancedMockEmbedder.GetDimension>)
  - [`func (e *AdvancedMockEmbedder) GetModelName() string`](<#AdvancedMockEmbedder.GetModelName>)
  - [`func (e *AdvancedMockEmbedder) GetProviderName() string`](<#AdvancedMockEmbedder.GetProviderName>)
  - [`func (e *AdvancedMockEmbedder) ResetRateLimit()`](<#AdvancedMockEmbedder.ResetRateLimit>)
- [type AdvancedMockcomponent](<#AdvancedMockcomponent>)
  - [`func NewAdvancedMockcomponent() *AdvancedMockcomponent`](<#NewAdvancedMockcomponent>)
- [type CohereConfig](<#CohereConfig>)
  - [`func (c *CohereConfig) Validate() error`](<#CohereConfig.Validate>)
- [type ConcurrentTestRunner](<#ConcurrentTestRunner>)
  - [`func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner`](<#NewConcurrentTestRunner>)
  - [`func (r *ConcurrentTestRunner) Run() error`](<#ConcurrentTestRunner.Run>)
- [type Config](<#Config>)
  - [`func CreateTestConfig(provider string) Config`](<#CreateTestConfig>)
  - [`func (c *Config) SetDefaults()`](<#Config.SetDefaults>)
  - [`func (c *Config) Validate() error`](<#Config.Validate>)
- [type EmbedderFactory](<#EmbedderFactory>)
  - [`func NewEmbedderFactory(config *Config, opts ...Option) (*EmbedderFactory, error)`](<#NewEmbedderFactory>)
  - [`func (f *EmbedderFactory) CheckHealth(ctx context.Context, providerType string) error`](<#EmbedderFactory.CheckHealth>)
  - [`func (f *EmbedderFactory) GetAvailableProviders() []string`](<#EmbedderFactory.GetAvailableProviders>)
  - [`func (f *EmbedderFactory) NewEmbedder(providerType string) (iface.Embedder, error)`](<#EmbedderFactory.NewEmbedder>)
- [type EmbeddingBenchmark](<#EmbeddingBenchmark>)
  - [`func NewEmbeddingBenchmark(embedder iface.Embedder, textCount int) *EmbeddingBenchmark`](<#NewEmbeddingBenchmark>)
  - [`func (b *EmbeddingBenchmark) BenchmarkBatchEmbedding(batchSize, iterations int) (time.Duration, error)`](<#EmbeddingBenchmark.BenchmarkBatchEmbedding>)
  - [`func (b *EmbeddingBenchmark) BenchmarkSingleEmbedding(iterations int) (time.Duration, error)`](<#EmbeddingBenchmark.BenchmarkSingleEmbedding>)
- [type EmbeddingError](<#EmbeddingError>)
  - [`func AsEmbeddingError(err error) (*EmbeddingError, bool)`](<#AsEmbeddingError>)
  - [`func NewEmbeddingError(op, code string, err error) *EmbeddingError`](<#NewEmbeddingError>)
  - [`func NewEmbeddingErrorWithMessage(op, code, message string, err error) *EmbeddingError`](<#NewEmbeddingErrorWithMessage>)
  - [`func (e *EmbeddingError) Error() string`](<#EmbeddingError.Error>)
  - [`func (e *EmbeddingError) Unwrap() error`](<#EmbeddingError.Unwrap>)
- [type EmbeddingQualityTester](<#EmbeddingQualityTester>)
  - [`func NewEmbeddingQualityTester(embedder iface.Embedder) *EmbeddingQualityTester`](<#NewEmbeddingQualityTester>)
  - [`func (q *EmbeddingQualityTester) TestSemanticSimilarity(ctx context.Context, similarTexts []string) (float32, error)`](<#EmbeddingQualityTester.TestSemanticSimilarity>)
  - [`func (q *EmbeddingQualityTester) TestSimilarityConsistency(ctx context.Context, text string, iterations int) (float32, error)`](<#EmbeddingQualityTester.TestSimilarityConsistency>)
- [type EmbeddingsMockcomponent](<#EmbeddingsMockcomponent>)
  - [`func NewEmbeddingsMockcomponent() *EmbeddingsMockcomponent`](<#NewEmbeddingsMockcomponent>)
- [type Factory](<#Factory>)
- [type HealthChecker](<#HealthChecker>)
- [type IntegrationTestHelper](<#IntegrationTestHelper>)
  - [`func NewIntegrationTestHelper() *IntegrationTestHelper`](<#NewIntegrationTestHelper>)
  - [`func (h *IntegrationTestHelper) AddEmbedder(name string, embedder *AdvancedMockEmbedder)`](<#IntegrationTestHelper.AddEmbedder>)
  - [`func (h *IntegrationTestHelper) GetEmbedder(name string) *AdvancedMockEmbedder`](<#IntegrationTestHelper.GetEmbedder>)
  - [`func (h *IntegrationTestHelper) GetRegistry() *ProviderRegistry`](<#IntegrationTestHelper.GetRegistry>)
  - [`func (h *IntegrationTestHelper) Reset()`](<#IntegrationTestHelper.Reset>)
- [type Metrics](<#Metrics>)
  - [`func GetMetrics() *Metrics`](<#GetMetrics>)
  - [`func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)`](<#NewMetrics>)
  - [`func NoOpMetrics() *Metrics`](<#NoOpMetrics>)
  - [`func (m *Metrics) EndRequest(ctx context.Context, provider, model string)`](<#Metrics.EndRequest>)
  - [`func (m *Metrics) RecordError(ctx context.Context, provider, model, errorType string)`](<#Metrics.RecordError>)
  - [`func (m *Metrics) RecordRequest(ctx context.Context, provider, model string, duration time.Duration, inputCount, outputDimension int)`](<#Metrics.RecordRequest>)
  - [`func (m *Metrics) RecordTokensProcessed(ctx context.Context, provider, model string, tokenCount int)`](<#Metrics.RecordTokensProcessed>)
  - [`func (m *Metrics) StartRequest(ctx context.Context, provider, model string)`](<#Metrics.StartRequest>)
- [type MockConfig](<#MockConfig>)
  - [`func (c *MockConfig) Validate() error`](<#MockConfig.Validate>)
- [type MockEmbedderOption](<#MockEmbedderOption>)
  - [`func WithMockAuthenticationError(op string) MockEmbedderOption`](<#WithMockAuthenticationError>)
  - [`func WithMockDelay(delay time.Duration) MockEmbedderOption`](<#WithMockDelay>)
  - [`func WithMockEmbeddings(embeddings [][]float32) MockEmbedderOption`](<#WithMockEmbeddings>)
  - [`func WithMockError(shouldError bool, err error) MockEmbedderOption`](<#WithMockError>)
  - [`func WithMockErrorCode(op, code string, underlyingErr error) MockEmbedderOption`](<#WithMockErrorCode>)
  - [`func WithMockNetworkError(op string) MockEmbedderOption`](<#WithMockNetworkError>)
  - [`func WithMockProviderError(op string, underlyingErr error) MockEmbedderOption`](<#WithMockProviderError>)
  - [`func WithMockRateLimit(enabled bool) MockEmbedderOption`](<#WithMockRateLimit>)
  - [`func WithMockRateLimitError(op string) MockEmbedderOption`](<#WithMockRateLimitError>)
  - [`func WithMockTimeoutError(op string) MockEmbedderOption`](<#WithMockTimeoutError>)
- [type OllamaConfig](<#OllamaConfig>)
  - [`func (c *OllamaConfig) Validate() error`](<#OllamaConfig.Validate>)
- [type OpenAIConfig](<#OpenAIConfig>)
  - [`func (c *OpenAIConfig) Validate() error`](<#OpenAIConfig.Validate>)
- [type Option](<#Option>)
  - [`func WithMaxRetries(maxRetries int) Option`](<#WithMaxRetries>)
  - [`func WithModel(model string) Option`](<#WithModel>)
  - [`func WithTimeout(timeout time.Duration) Option`](<#WithTimeout>)
- [type ProviderRegistry](<#ProviderRegistry>)
  - [`func NewProviderRegistry() *ProviderRegistry`](<#NewProviderRegistry>)

## Constants

<a name="ErrCodeInvalidConfig"></a>Error codes for embedding operations.

```go
const (
    ErrCodeInvalidConfig     = "invalid_config"
    ErrCodeInvalidInput      = "invalid_input"
    ErrCodeEmbeddingFailed   = "embedding_failed"
    ErrCodeProviderNotFound  = "provider_not_found"
    ErrCodeProviderError     = "provider_error"
    ErrCodeNetworkError      = "network_error"
    ErrCodeTimeout           = "timeout"
    ErrCodeRateLimit         = "rate_limit"
    ErrCodeAuthentication    = "authentication_error"
    ErrCodeInvalidDimension  = "invalid_dimension"
    ErrCodeBatchSizeExceeded = "batch_size_exceeded"
    ErrCodeContextCanceled   = "context_canceled"
    ErrCodeContextTimeout    = "context_timeout"
)
```

<a name="AssertEmbedding"></a>
## func [AssertEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L404>)

```go
func AssertEmbedding(t *testing.T, embedding []float32, expectedDim int)
```

AssertEmbedding validates an embedding result.

<a name="AssertEmbeddings"></a>
## func [AssertEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L416>)

```go
func AssertEmbeddings(t *testing.T, embeddings [][]float32, expectedCount, expectedDim int)
```

AssertEmbeddings validates multiple embedding results.

<a name="AssertErrorType"></a>
## func [AssertErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L454>)

```go
func AssertErrorType(t *testing.T, err error, expectedCode string)
```

AssertErrorType validates error types and codes.

<a name="AssertHealthCheck"></a>
## func [AssertHealthCheck](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L444>)

```go
func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)
```

AssertHealthCheck validates health check results.

<a name="AssertSimilarityScore"></a>
## func [AssertSimilarityScore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L436>)

```go
func AssertSimilarityScore(t *testing.T, emb1, emb2 []float32, minSimilarity float32)
```

AssertSimilarityScore validates similarity between embeddings.

<a name="CosineSimilarity"></a>
## func [CosineSimilarity](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L466>)

```go
func CosineSimilarity(a, b []float32) float32
```

CosineSimilarity calculates cosine similarity between two embeddings.

<a name="CreateTestEmbeddings"></a>
## func [CreateTestEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L350>)

```go
func CreateTestEmbeddings(count, dimension int) [][]float32
```

CreateTestEmbeddings creates a set of test embeddings.

<a name="CreateTestTexts"></a>
## func [CreateTestTexts](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L341>)

```go
func CreateTestTexts(count int) []string
```

CreateTestTexts creates a set of test texts for embedding.

<a name="EuclideanDistance"></a>
## func [EuclideanDistance](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L487>)

```go
func EuclideanDistance(a, b []float32) float32
```

EuclideanDistance calculates Euclidean distance between two embeddings.

<a name="GetGlobalRegistry"></a>
## func [GetGlobalRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L83>)

```go
func GetGlobalRegistry() registryiface.Registry
```

GetGlobalRegistry returns the global registry instance for advanced usage. Deprecated: Use GetRegistry() instead for consistency.

<a name="GetRegistry"></a>
## func [GetRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L89>)

```go
func GetRegistry() registryiface.Registry
```

GetRegistry returns the global registry instance. This follows the standard pattern used across all Beluga AI packages.

<a name="InitMetrics"></a>
## func [InitMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L165>)

```go
func InitMetrics(meter metric.Meter, tracer trace.Tracer)
```

InitMetrics initializes the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="IsEmbeddingError"></a>
## func [IsEmbeddingError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L70>)

```go
func IsEmbeddingError(err error) bool
```

IsEmbeddingError checks if an error is an EmbeddingError.

<a name="ListAvailableProviders"></a>
## func [ListAvailableProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L77>)

```go
func ListAvailableProviders() []string
```

ListAvailableProviders returns all available providers from the global factory.

<a name="NewEmbedder"></a>
## func [NewEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L55>)

```go
func NewEmbedder(ctx context.Context, name string, config Config) (iface.Embedder, error)
```

NewEmbedder creates an embedder using the global factory.

<a name="RegisterGlobal"></a>
## func [RegisterGlobal](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L39>)

```go
func RegisterGlobal(name string, creator func(ctx context.Context, config Config) (iface.Embedder, error))
```

RegisterGlobal registers a provider with the global factory. Deprecated: Use registry.GetRegistry().Register() instead.

<a name="RunLoadTest"></a>
## func [RunLoadTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L589>)

```go
func RunLoadTest(t *testing.T, embedder *AdvancedMockEmbedder, numOperations, concurrency int)
```

RunLoadTest executes a load test scenario on embedder.

<a name="AdvancedMockEmbedder"></a>
## type [AdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L59-L75>)

AdvancedMockEmbedder provides a comprehensive mock implementation for testing.

```go
type AdvancedMockEmbedder struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockEmbedder"></a>
### func [NewAdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L78>)

```go
func NewAdvancedMockEmbedder(providerName, modelName string, dimension int, options ...MockEmbedderOption) *AdvancedMockEmbedder
```

NewAdvancedMockEmbedder creates a new advanced mock with configurable behavior.

<a name="AdvancedMockEmbedder.CheckHealth"></a>
### func (*AdvancedMockEmbedder) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L325>)

```go
func (e *AdvancedMockEmbedder) CheckHealth() map[string]any
```

<a name="AdvancedMockEmbedder.EmbedDocuments"></a>
### func (*AdvancedMockEmbedder) [EmbedDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L181>)

```go
func (e *AdvancedMockEmbedder) EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)
```

Mock implementation methods.

<a name="AdvancedMockEmbedder.EmbedQuery"></a>
### func (*AdvancedMockEmbedder) [EmbedQuery](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L241>)

```go
func (e *AdvancedMockEmbedder) EmbedQuery(ctx context.Context, text string) ([]float32, error)
```

<a name="AdvancedMockEmbedder.GetCallCount"></a>
### func (*AdvancedMockEmbedder) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L305>)

```go
func (e *AdvancedMockEmbedder) GetCallCount() int
```

<a name="AdvancedMockEmbedder.GetDimension"></a>
### func (*AdvancedMockEmbedder) [GetDimension](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L293>)

```go
func (e *AdvancedMockEmbedder) GetDimension(ctx context.Context) (int, error)
```

<a name="AdvancedMockEmbedder.GetModelName"></a>
### func (*AdvancedMockEmbedder) [GetModelName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L311>)

```go
func (e *AdvancedMockEmbedder) GetModelName() string
```

<a name="AdvancedMockEmbedder.GetProviderName"></a>
### func (*AdvancedMockEmbedder) [GetProviderName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L315>)

```go
func (e *AdvancedMockEmbedder) GetProviderName() string
```

<a name="AdvancedMockEmbedder.ResetRateLimit"></a>
### func (*AdvancedMockEmbedder) [ResetRateLimit](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L319>)

```go
func (e *AdvancedMockEmbedder) ResetRateLimit()
```

<a name="AdvancedMockcomponent"></a>
## type [AdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/advanced_mock.go#L8-L10>)

AdvancedMockcomponent is a mock implementation of Interface.

```go
type AdvancedMockcomponent struct {
    mock.Mock
}
```

<a name="NewAdvancedMockcomponent"></a>
### func [NewAdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/advanced_mock.go#L13>)

```go
func NewAdvancedMockcomponent() *AdvancedMockcomponent
```

NewAdvancedMockcomponent creates a new AdvancedMockcomponent.

<a name="CohereConfig"></a>
## type [CohereConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L90-L97>)

CohereConfig holds configuration for Cohere embedding provider.

```go
type CohereConfig struct {
    APIKey     string        `mapstructure:"api_key" yaml:"api_key" env:"COHERE_API_KEY" validate:"required"`
    Model      string        `mapstructure:"model" yaml:"model" env:"COHERE_MODEL" default:"embed-english-v3.0"`
    BaseURL    string        `mapstructure:"base_url" yaml:"base_url" env:"COHERE_BASE_URL"`
    Timeout    time.Duration `mapstructure:"timeout" yaml:"timeout" env:"COHERE_TIMEOUT" default:"30s"`
    MaxRetries int           `mapstructure:"max_retries" yaml:"max_retries" env:"COHERE_MAX_RETRIES" default:"3"`
    Enabled    bool          `mapstructure:"enabled" yaml:"enabled" env:"COHERE_ENABLED" default:"true"`
}
```

<a name="CohereConfig.Validate"></a>
### func (*CohereConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L215>)

```go
func (c *CohereConfig) Validate() error
```

ValidateCohere validates Cohere configuration.

<a name="ConcurrentTestRunner"></a>
## type [ConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L530-L534>)

ConcurrentTestRunner runs embedding tests concurrently for performance testing.

```go
type ConcurrentTestRunner struct {
    NumGoroutines int
    TestDuration  time.Duration
    // contains filtered or unexported fields
}
```

<a name="NewConcurrentTestRunner"></a>
### func [NewConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L536>)

```go
func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner
```

<a name="ConcurrentTestRunner.Run"></a>
### func (*ConcurrentTestRunner) [Run](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L544>)

```go
func (r *ConcurrentTestRunner) Run() error
```

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L52-L58>)

Config holds configuration for the embeddings package.

```go
type Config struct {
    // Provider-specific configurations
    OpenAI *OpenAIConfig `mapstructure:"openai" yaml:"openai"`
    Ollama *OllamaConfig `mapstructure:"ollama" yaml:"ollama"`
    Mock   *MockConfig   `mapstructure:"mock" yaml:"mock"`
    Cohere *CohereConfig `mapstructure:"cohere" yaml:"cohere"`
}
```

<a name="CreateTestConfig"></a>
### func [CreateTestConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L366>)

```go
func CreateTestConfig(provider string) Config
```

CreateTestConfig creates a test embedding configuration.

<a name="Config.SetDefaults"></a>
### func (*Config) [SetDefaults](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L132>)

```go
func (c *Config) SetDefaults()
```

SetDefaults sets default values for the configuration.

<a name="Config.Validate"></a>
### func (*Config) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L100>)

```go
func (c *Config) Validate() error
```

Validate validates the configuration.

<a name="EmbedderFactory"></a>
## type [EmbedderFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L28-L33>)

EmbedderFactory provides factory methods for creating embedder instances.

```go
type EmbedderFactory struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbedderFactory"></a>
### func [NewEmbedderFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L57>)

```go
func NewEmbedderFactory(config *Config, opts ...Option) (*EmbedderFactory, error)
```

NewEmbedderFactory creates a new embedder factory with the given configuration. The factory manages embedder creation and provides a centralized way to create embedder instances for different providers.

Parameters:

- config: Configuration for the embedder factory (provider settings, API keys, etc.)
- opts: Optional functional options for additional configuration

Returns:

- *EmbedderFactory: A new factory instance ready to create embedders
- error: Configuration validation errors

Example:

```
config := embeddings.NewConfig()
config.OpenAI.APIKey = "your-api-key"
factory, err := embeddings.NewEmbedderFactory(config)
if err != nil {
    log.Fatal(err)
}
```

Example usage can be found in examples/rag/simple/main.go

<a name="EmbedderFactory.CheckHealth"></a>
### func (*EmbedderFactory) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L209>)

```go
func (f *EmbedderFactory) CheckHealth(ctx context.Context, providerType string) error
```

CheckHealth performs a health check on the embedder for the specified provider. It creates an embedder instance and verifies it can perform basic operations. If the embedder implements HealthChecker, it uses that; otherwise, it checks if GetDimension works.

Parameters:

- ctx: Context for cancellation and timeout control
- providerType: Type of embedder to check (e.g., "openai", "ollama")

Returns:

- error: Any error that occurred during health check (nil if healthy)

Example:

```
factory, _ := embeddings.NewEmbedderFactory(config)
err := factory.CheckHealth(ctx, "openai")
if err != nil {
    log.Printf("Health check failed: %v", err)
}
```

Example usage can be found in examples/rag/simple/main.go

<a name="EmbedderFactory.GetAvailableProviders"></a>
### func (*EmbedderFactory) [GetAvailableProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L165>)

```go
func (f *EmbedderFactory) GetAvailableProviders() []string
```

GetAvailableProviders returns a list of available provider types based on the factory's configuration. Only providers that are enabled in the config are returned.

Returns:

- []string: Slice of available provider names (e.g., ["openai", "ollama"])

Example:

```
factory, _ := embeddings.NewEmbedderFactory(config)
providers := factory.GetAvailableProviders()
fmt.Printf("Available providers: %v\n", providers)
```

Example usage can be found in examples/rag/simple/main.go

<a name="EmbedderFactory.NewEmbedder"></a>
### func (*EmbedderFactory) [NewEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L115>)

```go
func (f *EmbedderFactory) NewEmbedder(providerType string) (iface.Embedder, error)
```

NewEmbedder creates an embedder instance based on the provider type. Uses the registry to avoid import cycles. The provider must be registered via the registry before calling this method.

Parameters:

- providerType: Type of embedder to create (e.g., "openai", "ollama", "mock")

Returns:

- iface.Embedder: The created embedder instance
- error: Provider not found errors or configuration errors

Example:

```
factory, _ := embeddings.NewEmbedderFactory(config)
embedder, err := factory.NewEmbedder("openai")
if err != nil {
    log.Fatal(err)
}
```

Example usage can be found in examples/rag/simple/main.go

<a name="EmbeddingBenchmark"></a>
## type [EmbeddingBenchmark](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L671-L674>)

EmbeddingBenchmark provides benchmarking utilities.

```go
type EmbeddingBenchmark struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbeddingBenchmark"></a>
### func [NewEmbeddingBenchmark](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L676>)

```go
func NewEmbeddingBenchmark(embedder iface.Embedder, textCount int) *EmbeddingBenchmark
```

<a name="EmbeddingBenchmark.BenchmarkBatchEmbedding"></a>
### func (*EmbeddingBenchmark) [BenchmarkBatchEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L697>)

```go
func (b *EmbeddingBenchmark) BenchmarkBatchEmbedding(batchSize, iterations int) (time.Duration, error)
```

<a name="EmbeddingBenchmark.BenchmarkSingleEmbedding"></a>
### func (*EmbeddingBenchmark) [BenchmarkSingleEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L683>)

```go
func (b *EmbeddingBenchmark) BenchmarkSingleEmbedding(iterations int) (time.Duration, error)
```

<a name="EmbeddingError"></a>
## type [EmbeddingError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L27-L32>)

EmbeddingError represents an error that occurred during embedding operations.

```go
type EmbeddingError struct {
    Op      string // operation that failed
    Err     error  // underlying error
    Code    string // error code for programmatic handling
    Message string // human-readable message
}
```

<a name="AsEmbeddingError"></a>
### func [AsEmbeddingError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L76>)

```go
func AsEmbeddingError(err error) (*EmbeddingError, bool)
```

AsEmbeddingError attempts to convert an error to an EmbeddingError.

<a name="NewEmbeddingError"></a>
### func [NewEmbeddingError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L51>)

```go
func NewEmbeddingError(op, code string, err error) *EmbeddingError
```

NewEmbeddingError creates a new EmbeddingError.

<a name="NewEmbeddingErrorWithMessage"></a>
### func [NewEmbeddingErrorWithMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L60>)

```go
func NewEmbeddingErrorWithMessage(op, code, message string, err error) *EmbeddingError
```

NewEmbeddingErrorWithMessage creates a new EmbeddingError with a custom message.

<a name="EmbeddingError.Error"></a>
### func (*EmbeddingError) [Error](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L35>)

```go
func (e *EmbeddingError) Error() string
```

Error implements the error interface.

<a name="EmbeddingError.Unwrap"></a>
### func (*EmbeddingError) [Unwrap](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/errors.go#L46>)

```go
func (e *EmbeddingError) Unwrap() error
```

Unwrap returns the underlying error.

<a name="EmbeddingQualityTester"></a>
## type [EmbeddingQualityTester](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L713-L715>)

EmbeddingQualityTester provides utilities for testing embedding quality.

```go
type EmbeddingQualityTester struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbeddingQualityTester"></a>
### func [NewEmbeddingQualityTester](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L717>)

```go
func NewEmbeddingQualityTester(embedder iface.Embedder) *EmbeddingQualityTester
```

<a name="EmbeddingQualityTester.TestSemanticSimilarity"></a>
### func (*EmbeddingQualityTester) [TestSemanticSimilarity](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L752>)

```go
func (q *EmbeddingQualityTester) TestSemanticSimilarity(ctx context.Context, similarTexts []string) (float32, error)
```

<a name="EmbeddingQualityTester.TestSimilarityConsistency"></a>
### func (*EmbeddingQualityTester) [TestSimilarityConsistency](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L721>)

```go
func (q *EmbeddingQualityTester) TestSimilarityConsistency(ctx context.Context, text string, iterations int) (float32, error)
```

<a name="EmbeddingsMockcomponent"></a>
## type [EmbeddingsMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings_mock.go#L8-L10>)

EmbeddingsMockcomponent is a mock implementation of Interface.

```go
type EmbeddingsMockcomponent struct {
    mock.Mock
}
```

<a name="NewEmbeddingsMockcomponent"></a>
### func [NewEmbeddingsMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings_mock.go#L13>)

```go
func NewEmbeddingsMockcomponent() *EmbeddingsMockcomponent
```

NewEmbeddingsMockcomponent creates a new EmbeddingsMockcomponent.

<a name="Factory"></a>
## type [Factory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L21-L25>)

Factory defines the interface for creating Embedder instances. This enables dependency injection and makes testing easier.

```go
type Factory interface {
    // CreateEmbedder creates a new Embedder instance with the given configuration.
    // The config parameter contains provider-specific settings.
    CreateEmbedder(ctx context.Context, config Config) (iface.Embedder, error)
}
```

<a name="HealthChecker"></a>
## type [HealthChecker](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L184-L186>)

HealthChecker interface for embedder health checks.

```go
type HealthChecker interface {
    Check(ctx context.Context) error
}
```

<a name="IntegrationTestHelper"></a>
## type [IntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L638-L641>)

IntegrationTestHelper provides utilities for integration testing.

```go
type IntegrationTestHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewIntegrationTestHelper"></a>
### func [NewIntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L643>)

```go
func NewIntegrationTestHelper() *IntegrationTestHelper
```

<a name="IntegrationTestHelper.AddEmbedder"></a>
### func (*IntegrationTestHelper) [AddEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L650>)

```go
func (h *IntegrationTestHelper) AddEmbedder(name string, embedder *AdvancedMockEmbedder)
```

<a name="IntegrationTestHelper.GetEmbedder"></a>
### func (*IntegrationTestHelper) [GetEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L654>)

```go
func (h *IntegrationTestHelper) GetEmbedder(name string) *AdvancedMockEmbedder
```

<a name="IntegrationTestHelper.GetRegistry"></a>
### func (*IntegrationTestHelper) [GetRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L658>)

```go
func (h *IntegrationTestHelper) GetRegistry() *ProviderRegistry
```

<a name="IntegrationTestHelper.Reset"></a>
### func (*IntegrationTestHelper) [Reset](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L662>)

```go
func (h *IntegrationTestHelper) Reset()
```

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L15-L22>)

Metrics holds the metrics for the embeddings package.

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="GetMetrics"></a>
### func [GetMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L182>)

```go
func GetMetrics() *Metrics
```

GetMetrics returns the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L25>)

```go
func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)
```

NewMetrics creates a new metrics instance.

<a name="NoOpMetrics"></a>
### func [NoOpMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L157>)

```go
func NoOpMetrics() *Metrics
```

NoOpMetrics returns a metrics instance that does nothing. Useful for testing or when metrics are disabled.

<a name="Metrics.EndRequest"></a>
### func (*Metrics) [EndRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L138>)

```go
func (m *Metrics) EndRequest(ctx context.Context, provider, model string)
```

EndRequest decrements the in-flight counter.

<a name="Metrics.RecordError"></a>
### func (*Metrics) [RecordError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L101>)

```go
func (m *Metrics) RecordError(ctx context.Context, provider, model, errorType string)
```

RecordError records an embedding error.

<a name="Metrics.RecordRequest"></a>
### func (*Metrics) [RecordRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L78>)

```go
func (m *Metrics) RecordRequest(ctx context.Context, provider, model string, duration time.Duration, inputCount, outputDimension int)
```

RecordRequest records a successful embedding request.

<a name="Metrics.RecordTokensProcessed"></a>
### func (*Metrics) [RecordTokensProcessed](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L114>)

```go
func (m *Metrics) RecordTokensProcessed(ctx context.Context, provider, model string, tokenCount int)
```

RecordTokensProcessed records the number of tokens processed.

<a name="Metrics.StartRequest"></a>
### func (*Metrics) [StartRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L126>)

```go
func (m *Metrics) StartRequest(ctx context.Context, provider, model string)
```

StartRequest increments the in-flight counter.

<a name="MockConfig"></a>
## type [MockConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L82-L87>)

MockConfig holds configuration for mock embedding provider.

```go
type MockConfig struct {
    Dimension    int   `mapstructure:"dimension" yaml:"dimension" env:"MOCK_EMBEDDING_DIMENSION" default:"128"`
    Seed         int64 `mapstructure:"seed" yaml:"seed" env:"MOCK_EMBEDDING_SEED" default:"0"`
    RandomizeNil bool  `mapstructure:"randomize_nil" yaml:"randomize_nil" env:"MOCK_EMBEDDING_RANDOMIZE_NIL" default:"false"`
    Enabled      bool  `mapstructure:"enabled" yaml:"enabled" env:"MOCK_EMBEDDING_ENABLED" default:"true"`
}
```

<a name="MockConfig.Validate"></a>
### func (*MockConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L207>)

```go
func (c *MockConfig) Validate() error
```

ValidateMock validates Mock configuration.

<a name="MockEmbedderOption"></a>
## type [MockEmbedderOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L101>)

MockEmbedderOption defines functional options for mock configuration.

```go
type MockEmbedderOption func(*AdvancedMockEmbedder)
```

<a name="WithMockAuthenticationError"></a>
### func [WithMockAuthenticationError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L157>)

```go
func WithMockAuthenticationError(op string) MockEmbedderOption
```

WithMockAuthenticationError configures the mock to simulate authentication errors.

<a name="WithMockDelay"></a>
### func [WithMockDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L120>)

```go
func WithMockDelay(delay time.Duration) MockEmbedderOption
```

WithMockDelay adds artificial delay to mock operations.

<a name="WithMockEmbeddings"></a>
### func [WithMockEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L112>)

```go
func WithMockEmbeddings(embeddings [][]float32) MockEmbedderOption
```

WithMockEmbeddings sets predefined embeddings for the mock.

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L104>)

```go
func WithMockError(shouldError bool, err error) MockEmbedderOption
```

WithMockError configures the mock to return errors.

<a name="WithMockErrorCode"></a>
### func [WithMockErrorCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L134>)

```go
func WithMockErrorCode(op, code string, underlyingErr error) MockEmbedderOption
```

WithMockErrorCode configures the mock to return a specific EmbeddingError with the given error code.

<a name="WithMockNetworkError"></a>
### func [WithMockNetworkError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L142>)

```go
func WithMockNetworkError(op string) MockEmbedderOption
```

WithMockNetworkError configures the mock to simulate network errors.

<a name="WithMockProviderError"></a>
### func [WithMockProviderError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L162>)

```go
func WithMockProviderError(op string, underlyingErr error) MockEmbedderOption
```

WithMockProviderError configures the mock to simulate provider errors.

<a name="WithMockRateLimit"></a>
### func [WithMockRateLimit](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L127>)

```go
func WithMockRateLimit(enabled bool) MockEmbedderOption
```

WithMockRateLimit simulates rate limiting behavior.

<a name="WithMockRateLimitError"></a>
### func [WithMockRateLimitError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L152>)

```go
func WithMockRateLimitError(op string) MockEmbedderOption
```

WithMockRateLimitError configures the mock to simulate rate limit errors.

<a name="WithMockTimeoutError"></a>
### func [WithMockTimeoutError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L147>)

```go
func WithMockTimeoutError(op string) MockEmbedderOption
```

WithMockTimeoutError configures the mock to simulate timeout errors.

<a name="OllamaConfig"></a>
## type [OllamaConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L72-L79>)

OllamaConfig holds configuration for Ollama embedding provider.

```go
type OllamaConfig struct {
    ServerURL  string        `mapstructure:"server_url" yaml:"server_url" env:"OLLAMA_SERVER_URL" default:"http://localhost:11434"`
    Model      string        `mapstructure:"model" yaml:"model" env:"OLLAMA_MODEL" validate:"required"`
    KeepAlive  string        `mapstructure:"keep_alive" yaml:"keep_alive" env:"OLLAMA_KEEP_ALIVE" default:"5m"`
    Timeout    time.Duration `mapstructure:"timeout" yaml:"timeout" env:"OLLAMA_TIMEOUT" default:"30s"`
    MaxRetries int           `mapstructure:"max_retries" yaml:"max_retries" env:"OLLAMA_MAX_RETRIES" default:"3"`
    Enabled    bool          `mapstructure:"enabled" yaml:"enabled" env:"OLLAMA_ENABLED" default:"true"`
}
```

<a name="OllamaConfig.Validate"></a>
### func (*OllamaConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L199>)

```go
func (c *OllamaConfig) Validate() error
```

ValidateOllama validates Ollama configuration.

<a name="OpenAIConfig"></a>
## type [OpenAIConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L61-L69>)

OpenAIConfig holds configuration for OpenAI embedding provider.

```go
type OpenAIConfig struct {
    APIKey     string        `mapstructure:"api_key" yaml:"api_key" env:"OPENAI_API_KEY" validate:"required"`
    Model      string        `mapstructure:"model" yaml:"model" env:"OPENAI_MODEL" default:"text-embedding-ada-002"`
    BaseURL    string        `mapstructure:"base_url" yaml:"base_url" env:"OPENAI_BASE_URL"`
    APIVersion string        `mapstructure:"api_version" yaml:"api_version" env:"OPENAI_API_VERSION"`
    Timeout    time.Duration `mapstructure:"timeout" yaml:"timeout" env:"OPENAI_TIMEOUT" default:"30s"`
    MaxRetries int           `mapstructure:"max_retries" yaml:"max_retries" env:"OPENAI_MAX_RETRIES" default:"3"`
    Enabled    bool          `mapstructure:"enabled" yaml:"enabled" env:"OPENAI_ENABLED" default:"true"`
}
```

<a name="OpenAIConfig.Validate"></a>
### func (*OpenAIConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L188>)

```go
func (c *OpenAIConfig) Validate() error
```

ValidateOpenAI validates OpenAI configuration.

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L12>)

Option is a functional option for configuring embedders.

```go
type Option func(*optionConfig)
```

<a name="WithMaxRetries"></a>
### func [WithMaxRetries](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L29>)

```go
func WithMaxRetries(maxRetries int) Option
```

WithMaxRetries sets the maximum number of retries for failed operations.

<a name="WithModel"></a>
### func [WithModel](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L36>)

```go
func WithModel(model string) Option
```

WithModel sets the model to use for embeddings.

<a name="WithTimeout"></a>
### func [WithTimeout](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L22>)

```go
func WithTimeout(timeout time.Duration) Option
```

WithTimeout sets the timeout for embedding operations.

<a name="ProviderRegistry"></a>
## type [ProviderRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L29>)

ProviderRegistry is kept for backward compatibility but delegates to the new registry. Deprecated: Use registry.GetRegistry() directly or embeddings.GetRegistry().

```go
type ProviderRegistry = registry.ProviderRegistry
```

<a name="NewProviderRegistry"></a>
### func [NewProviderRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L33>)

```go
func NewProviderRegistry() *ProviderRegistry
```

NewProviderRegistry creates a new ProviderRegistry instance. Deprecated: Use registry.GetRegistry() instead.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

---
title: core
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# core

```go
import "github.com/lookatitude/beluga-ai/pkg/core"
```

Package core provides configuration structures for core package components.

Package core provides standardized error handling for the Beluga AI framework.

Package core provides metrics definitions for the Beluga AI framework. It defines standard metrics for Runnable executions and other core operations.

Package core defines fundamental interfaces and types used throughout the Beluga-ai framework.

Package core provides advanced test utilities and comprehensive mocks for testing core implementations. This file contains utilities designed to support both unit tests and integration tests.

Package core provides tracing and metrics instrumentation for Runnable components.

## Index

- [`func AsFrameworkError(err error, target **FrameworkError) bool`](<#AsFrameworkError>)
- [`func InitMetrics(meter metric.Meter, tracer trace.Tracer)`](<#InitMetrics>)
- [`func IsErrorType(err error, errorType ErrorType) bool`](<#IsErrorType>)
- [`func UnwrapError(err error) error`](<#UnwrapError>)
- [`func WrapError(err error, op, message string) error`](<#WrapError>)
- [type AdvancedMockContainer](<#AdvancedMockContainer>)
  - [`func NewAdvancedMockContainer(name string, opts ...MockContainerOption) *AdvancedMockContainer`](<#NewAdvancedMockContainer>)
  - [`func (m *AdvancedMockContainer) CheckHealth(ctx context.Context) error`](<#AdvancedMockContainer.CheckHealth>)
  - [`func (m *AdvancedMockContainer) Clear()`](<#AdvancedMockContainer.Clear>)
  - [`func (m *AdvancedMockContainer) Has(typ interface\{\}) bool`](<#AdvancedMockContainer.Has>)
  - [`func (m *AdvancedMockContainer) MustResolve(target any)`](<#AdvancedMockContainer.MustResolve>)
  - [`func (m *AdvancedMockContainer) Register(factoryFunc any) error`](<#AdvancedMockContainer.Register>)
  - [`func (m *AdvancedMockContainer) Resolve(target any) error`](<#AdvancedMockContainer.Resolve>)
  - [`func (m *AdvancedMockContainer) Singleton(instance any)`](<#AdvancedMockContainer.Singleton>)
- [type AdvancedMockRunnable](<#AdvancedMockRunnable>)
  - [`func NewAdvancedMockRunnable(name string, opts ...MockRunnableOption) *AdvancedMockRunnable`](<#NewAdvancedMockRunnable>)
  - [`func (m *AdvancedMockRunnable) Batch(ctx context.Context, inputs []any, options ...Option) ([]any, error)`](<#AdvancedMockRunnable.Batch>)
  - [`func (m *AdvancedMockRunnable) GetCallCount() int`](<#AdvancedMockRunnable.GetCallCount>)
  - [`func (m *AdvancedMockRunnable) Invoke(ctx context.Context, input any, options ...Option) (any, error)`](<#AdvancedMockRunnable.Invoke>)
  - [`func (m *AdvancedMockRunnable) Stream(ctx context.Context, input any, options ...Option) (<-chan any, error)`](<#AdvancedMockRunnable.Stream>)
- [type Builder](<#Builder>)
  - [`func NewBuilder(container Container) *Builder`](<#NewBuilder>)
  - [`func (b *Builder) Build(target any) error`](<#Builder.Build>)
  - [`func (b *Builder) Register(factoryFunc any) error`](<#Builder.Register>)
  - [`func (b *Builder) RegisterLogger(factory func() Logger) error`](<#Builder.RegisterLogger>)
  - [`func (b *Builder) RegisterMeterProvider(factory func() MeterProvider) error`](<#Builder.RegisterMeterProvider>)
  - [`func (b *Builder) RegisterMetrics(factory func() (*Metrics, error)) error`](<#Builder.RegisterMetrics>)
  - [`func (b *Builder) RegisterNoOpLogger() error`](<#Builder.RegisterNoOpLogger>)
  - [`func (b *Builder) RegisterNoOpMetrics() error`](<#Builder.RegisterNoOpMetrics>)
  - [`func (b *Builder) RegisterNoOpTracerProvider() error`](<#Builder.RegisterNoOpTracerProvider>)
  - [`func (b *Builder) RegisterTracerProvider(factory func() TracerProvider) error`](<#Builder.RegisterTracerProvider>)
  - [`func (b *Builder) Singleton(instance any)`](<#Builder.Singleton>)
  - [`func (b *Builder) WithLogger(logger Logger) *Builder`](<#Builder.WithLogger>)
  - [`func (b *Builder) WithTracerProvider(tracerProvider TracerProvider) *Builder`](<#Builder.WithTracerProvider>)
- [type ConcurrentTestRunner](<#ConcurrentTestRunner>)
  - [`func NewConcurrentTestRunner(numGoroutines int, testDuration time.Duration, testFunc func() error) *ConcurrentTestRunner`](<#NewConcurrentTestRunner>)
  - [`func (r *ConcurrentTestRunner) Run(t *testing.T)`](<#ConcurrentTestRunner.Run>)
- [type Config](<#Config>)
  - [`func DefaultConfig() *Config`](<#DefaultConfig>)
  - [`func (c *Config) Validate() error`](<#Config.Validate>)
- [type Container](<#Container>)
  - [`func NewContainer() Container`](<#NewContainer>)
  - [`func NewContainerWithOptions(opts ...DIOption) Container`](<#NewContainerWithOptions>)
- [type DIOption](<#DIOption>)
  - [`func DefaultContainer() DIOption`](<#DefaultContainer>)
  - [`func WithContainer(container Container) DIOption`](<#WithContainer>)
  - [`func WithLogger(logger Logger) DIOption`](<#WithLogger>)
  - [`func WithTracerProvider(tracerProvider TracerProvider) DIOption`](<#WithTracerProvider>)
- [type ErrorCode](<#ErrorCode>)
- [type ErrorType](<#ErrorType>)
- [type FrameworkError](<#FrameworkError>)
  - [`func NewAuthenticationError(op, message string, err error) *FrameworkError`](<#NewAuthenticationError>)
  - [`func NewConfigurationError(op, message string, err error) *FrameworkError`](<#NewConfigurationError>)
  - [`func NewFrameworkError(op string, code ErrorCode, message string, err error) *FrameworkError`](<#NewFrameworkError>)
  - [`func NewFrameworkErrorWithCode(errorType ErrorType, code ErrorCode, message string, cause error) *FrameworkError`](<#NewFrameworkErrorWithCode>)
  - [`func NewInternalError(op, message string, err error) *FrameworkError`](<#NewInternalError>)
  - [`func NewNetworkError(op, message string, err error) *FrameworkError`](<#NewNetworkError>)
  - [`func NewValidationError(op, message string, err error) *FrameworkError`](<#NewValidationError>)
  - [`func (e *FrameworkError) AddContext(key string, value any) *FrameworkError`](<#FrameworkError.AddContext>)
  - [`func (e *FrameworkError) Error() string`](<#FrameworkError.Error>)
  - [`func (e *FrameworkError) Unwrap() error`](<#FrameworkError.Unwrap>)
- [type HealthChecker](<#HealthChecker>)
- [type Loader](<#Loader>)
- [type Logger](<#Logger>)
- [type MeterProvider](<#MeterProvider>)
- [type Metrics](<#Metrics>)
  - [`func GetMetrics() *Metrics`](<#GetMetrics>)
  - [`func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)`](<#NewMetrics>)
  - [`func NoOpMetrics() *Metrics`](<#NoOpMetrics>)
  - [`func (m *Metrics) RecordRunnableBatch(ctx context.Context, componentType string, batchSize int, duration time.Duration, err error)`](<#Metrics.RecordRunnableBatch>)
  - [`func (m *Metrics) RecordRunnableInvoke(ctx context.Context, componentType string, duration time.Duration, err error)`](<#Metrics.RecordRunnableInvoke>)
  - [`func (m *Metrics) RecordRunnableStream(ctx context.Context, componentType string, duration time.Duration, chunkCount int, err error)`](<#Metrics.RecordRunnableStream>)
- [type MockContainerOption](<#MockContainerOption>)
  - [`func WithContainerMockError(shouldError bool, err error) MockContainerOption`](<#WithContainerMockError>)
- [type MockRunnableOption](<#MockRunnableOption>)
  - [`func WithMockDelay(delay time.Duration) MockRunnableOption`](<#WithMockDelay>)
  - [`func WithMockError(shouldError bool, err error) MockRunnableOption`](<#WithMockError>)
- [type Option](<#Option>)
  - [`func WithOption(key string, value any) Option`](<#WithOption>)
- [type Retriever](<#Retriever>)
- [type Runnable](<#Runnable>)
  - [`func RunnableWithTracing(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string) Runnable`](<#RunnableWithTracing>)
  - [`func RunnableWithTracingAndName(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string, componentName string) Runnable`](<#RunnableWithTracingAndName>)
- [type Tool](<#Tool>)
- [type ToolDefinition](<#ToolDefinition>)
- [type TracedRunnable](<#TracedRunnable>)
  - [`func NewTracedRunnable(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string, componentName string) *TracedRunnable`](<#NewTracedRunnable>)
  - [`func (tr *TracedRunnable) Batch(ctx context.Context, inputs []any, options ...Option) ([]any, error)`](<#TracedRunnable.Batch>)
  - [`func (tr *TracedRunnable) Invoke(ctx context.Context, input any, options ...Option) (any, error)`](<#TracedRunnable.Invoke>)
  - [`func (tr *TracedRunnable) Stream(ctx context.Context, input any, options ...Option) (<-chan any, error)`](<#TracedRunnable.Stream>)
- [type TracerProvider](<#TracerProvider>)

<a name="AsFrameworkError"></a>
## func [AsFrameworkError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L209>)

```go
func AsFrameworkError(err error, target **FrameworkError) bool
```

AsFrameworkError attempts to convert an error to a FrameworkError.

<a name="InitMetrics"></a>
## func [InitMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L258>)

```go
func InitMetrics(meter metric.Meter, tracer trace.Tracer)
```

InitMetrics initializes the global metrics instance. This follows the standard pattern used across all Beluga AI packages. It uses sync.Once to ensure thread-safe initialization.

Example:

```
meter := otel.Meter("beluga-core")
tracer := otel.Tracer("beluga-core")
core.InitMetrics(meter, tracer)
metrics := core.GetMetrics()
if metrics != nil {
    metrics.RecordRunnableInvoke(ctx, "component_type", duration, err)
}
```

<a name="IsErrorType"></a>
## func [IsErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L188>)

```go
func IsErrorType(err error, errorType ErrorType) bool
```

IsErrorType checks if an error is of a specific FrameworkError type. Deprecated: Use error codes instead. This function is kept for backward compatibility.

<a name="UnwrapError"></a>
## func [UnwrapError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L230>)

```go
func UnwrapError(err error) error
```

UnwrapError unwraps an error to get its underlying cause. This is a compatibility function for Go versions before 1.13.

<a name="WrapError"></a>
## func [WrapError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L238>)

```go
func WrapError(err error, op, message string) error
```

WrapError wraps an error with additional context.

<a name="AdvancedMockContainer"></a>
## type [AdvancedMockContainer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L189-L200>)

AdvancedMockContainer provides a comprehensive mock implementation for testing Container.

```go
type AdvancedMockContainer struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockContainer"></a>
### func [NewAdvancedMockContainer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L203>)

```go
func NewAdvancedMockContainer(name string, opts ...MockContainerOption) *AdvancedMockContainer
```

NewAdvancedMockContainer creates a new advanced mock container with configurable behavior.

<a name="AdvancedMockContainer.CheckHealth"></a>
### func (*AdvancedMockContainer) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L295>)

```go
func (m *AdvancedMockContainer) CheckHealth(ctx context.Context) error
```

CheckHealth implements the HealthChecker interface.

<a name="AdvancedMockContainer.Clear"></a>
### func (*AdvancedMockContainer) [Clear](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L279>)

```go
func (m *AdvancedMockContainer) Clear()
```

Clear implements the Container interface.

<a name="AdvancedMockContainer.Has"></a>
### func (*AdvancedMockContainer) [Has](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L273>)

```go
func (m *AdvancedMockContainer) Has(typ interface{}) bool
```

Has implements the Container interface.

<a name="AdvancedMockContainer.MustResolve"></a>
### func (*AdvancedMockContainer) [MustResolve](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L264>)

```go
func (m *AdvancedMockContainer) MustResolve(target any)
```

MustResolve implements the Container interface.

<a name="AdvancedMockContainer.Register"></a>
### func (*AdvancedMockContainer) [Register](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L228>)

```go
func (m *AdvancedMockContainer) Register(factoryFunc any) error
```

Register implements the Container interface.

<a name="AdvancedMockContainer.Resolve"></a>
### func (*AdvancedMockContainer) [Resolve](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L246>)

```go
func (m *AdvancedMockContainer) Resolve(target any) error
```

Resolve implements the Container interface.

<a name="AdvancedMockContainer.Singleton"></a>
### func (*AdvancedMockContainer) [Singleton](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L286>)

```go
func (m *AdvancedMockContainer) Singleton(instance any)
```

Singleton implements the Container interface.

<a name="AdvancedMockRunnable"></a>
## type [AdvancedMockRunnable](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L16-L32>)

AdvancedMockRunnable provides a comprehensive mock implementation for testing Runnable.

```go
type AdvancedMockRunnable struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockRunnable"></a>
### func [NewAdvancedMockRunnable](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L35>)

```go
func NewAdvancedMockRunnable(name string, opts ...MockRunnableOption) *AdvancedMockRunnable
```

NewAdvancedMockRunnable creates a new advanced mock runnable with configurable behavior.

<a name="AdvancedMockRunnable.Batch"></a>
### func (*AdvancedMockRunnable) [Batch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L98>)

```go
func (m *AdvancedMockRunnable) Batch(ctx context.Context, inputs []any, options ...Option) ([]any, error)
```

Batch implements the Runnable interface.

<a name="AdvancedMockRunnable.GetCallCount"></a>
### func (*AdvancedMockRunnable) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L182>)

```go
func (m *AdvancedMockRunnable) GetCallCount() int
```

GetCallCount returns the number of times the mock was called.

<a name="AdvancedMockRunnable.Invoke"></a>
### func (*AdvancedMockRunnable) [Invoke](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L69>)

```go
func (m *AdvancedMockRunnable) Invoke(ctx context.Context, input any, options ...Option) (any, error)
```

Invoke implements the Runnable interface.

<a name="AdvancedMockRunnable.Stream"></a>
### func (*AdvancedMockRunnable) [Stream](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L137>)

```go
func (m *AdvancedMockRunnable) Stream(ctx context.Context, input any, options ...Option) (<-chan any, error)
```

Stream implements the Runnable interface.

<a name="Builder"></a>
## type [Builder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L449-L451>)

Builder provides a fluent interface for building objects with DI.

```go
type Builder struct {
    // contains filtered or unexported fields
}
```

<a name="NewBuilder"></a>
### func [NewBuilder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L454>)

```go
func NewBuilder(container Container) *Builder
```

NewBuilder creates a new builder with the given container.

<a name="Builder.Build"></a>
### func (*Builder) [Build](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L459>)

```go
func (b *Builder) Build(target any) error
```

Build builds an object using the registered factory.

<a name="Builder.Register"></a>
### func (*Builder) [Register](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L464>)

```go
func (b *Builder) Register(factoryFunc any) error
```

Register registers a factory function.

<a name="Builder.RegisterLogger"></a>
### func (*Builder) [RegisterLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L498>)

```go
func (b *Builder) RegisterLogger(factory func() Logger) error
```

RegisterLogger registers a logger factory function.

<a name="Builder.RegisterMeterProvider"></a>
### func (*Builder) [RegisterMeterProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L524>)

```go
func (b *Builder) RegisterMeterProvider(factory func() MeterProvider) error
```

RegisterMeterProvider registers a meter provider factory function.

<a name="Builder.RegisterMetrics"></a>
### func (*Builder) [RegisterMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L529>)

```go
func (b *Builder) RegisterMetrics(factory func() (*Metrics, error)) error
```

RegisterMetrics registers a metrics factory function.

<a name="Builder.RegisterNoOpLogger"></a>
### func (*Builder) [RegisterNoOpLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L534>)

```go
func (b *Builder) RegisterNoOpLogger() error
```

RegisterNoOpLogger registers a no-op logger (useful for testing).

<a name="Builder.RegisterNoOpMetrics"></a>
### func (*Builder) [RegisterNoOpMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L544>)

```go
func (b *Builder) RegisterNoOpMetrics() error
```

RegisterNoOpMetrics registers no-op metrics.

<a name="Builder.RegisterNoOpTracerProvider"></a>
### func (*Builder) [RegisterNoOpTracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L539>)

```go
func (b *Builder) RegisterNoOpTracerProvider() error
```

RegisterNoOpTracerProvider registers a no-op tracer provider.

<a name="Builder.RegisterTracerProvider"></a>
### func (*Builder) [RegisterTracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L503>)

```go
func (b *Builder) RegisterTracerProvider(factory func() TracerProvider) error
```

RegisterTracerProvider registers a tracer provider factory function.

<a name="Builder.Singleton"></a>
### func (*Builder) [Singleton](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L469>)

```go
func (b *Builder) Singleton(instance any)
```

Singleton registers a singleton instance.

<a name="Builder.WithLogger"></a>
### func (*Builder) [WithLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L508>)

```go
func (b *Builder) WithLogger(logger Logger) *Builder
```

WithLogger sets the logger for the container (if supported).

<a name="Builder.WithTracerProvider"></a>
### func (*Builder) [WithTracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L516>)

```go
func (b *Builder) WithTracerProvider(tracerProvider TracerProvider) *Builder
```

WithTracerProvider sets the tracer provider for the container (if supported).

<a name="ConcurrentTestRunner"></a>
## type [ConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L304-L308>)

ConcurrentTestRunner provides utilities for concurrent testing.

```go
type ConcurrentTestRunner struct {
    NumGoroutines int
    TestDuration  time.Duration
    // contains filtered or unexported fields
}
```

<a name="NewConcurrentTestRunner"></a>
### func [NewConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L311-L315>)

```go
func NewConcurrentTestRunner(numGoroutines int, testDuration time.Duration, testFunc func() error) *ConcurrentTestRunner
```

NewConcurrentTestRunner creates a new concurrent test runner.

<a name="ConcurrentTestRunner.Run"></a>
### func (*ConcurrentTestRunner) [Run](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L324>)

```go
func (r *ConcurrentTestRunner) Run(t *testing.T)
```

Run executes the concurrent test.

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/config.go#L8-L17>)

Config represents configuration for core package components. Since core uses functional options for most configuration, this struct provides a minimal configuration structure for cases where a config struct is needed.

```go
type Config struct {
    // LogLevel sets the logging level (debug, info, warn, error).
    LogLevel string `mapstructure:"log_level" yaml:"logLevel" env:"CORE_LOG_LEVEL" validate:"oneof=debug info warn error"`

    // EnableTracing enables OpenTelemetry tracing for core operations.
    EnableTracing bool `mapstructure:"enable_tracing" yaml:"enableTracing" env:"CORE_ENABLE_TRACING"`

    // EnableMetrics enables OpenTelemetry metrics for core operations.
    EnableMetrics bool `mapstructure:"enable_metrics" yaml:"enableMetrics" env:"CORE_ENABLE_METRICS"`
}
```

<a name="DefaultConfig"></a>
### func [DefaultConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/config.go#L20>)

```go
func DefaultConfig() *Config
```

DefaultConfig returns a default configuration for core package.

<a name="Config.Validate"></a>
### func (*Config) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/config.go#L29>)

```go
func (c *Config) Validate() error
```

Validate validates the configuration.

<a name="Container"></a>
## type [Container](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L26-L47>)

Container represents a dependency injection container.

```go
type Container interface {
    // Register registers a factory function for a type
    Register(factoryFunc any) error

    // Resolve resolves a dependency by type
    Resolve(target any) error

    // MustResolve resolves a dependency or panics
    MustResolve(target any)

    // Has checks if a type is registered
    Has(typ reflect.Type) bool

    // Clear removes all registered dependencies
    Clear()

    // Singleton registers a singleton instance
    Singleton(instance any)

    // HealthChecker provides health check functionality
    HealthChecker
}
```

<a name="NewContainer"></a>
### func [NewContainer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L59>)

```go
func NewContainer() Container
```

NewContainer creates a new dependency injection container with no-op monitoring.

<a name="NewContainerWithOptions"></a>
### func [NewContainerWithOptions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L69>)

```go
func NewContainerWithOptions(opts ...DIOption) Container
```

NewContainerWithOptions creates a new dependency injection container with custom options.

<a name="DIOption"></a>
## type [DIOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L414>)

DIOption represents a functional option for DI configuration.

```go
type DIOption func(*optionConfig)
```

<a name="DefaultContainer"></a>
### func [DefaultContainer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L444>)

```go
func DefaultContainer() DIOption
```

DefaultContainer returns the default container option.

<a name="WithContainer"></a>
### func [WithContainer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L423>)

```go
func WithContainer(container Container) DIOption
```

WithContainer sets the DI container.

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L430>)

```go
func WithLogger(logger Logger) DIOption
```

WithLogger sets the logger for the DI container.

<a name="WithTracerProvider"></a>
### func [WithTracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L437>)

```go
func WithTracerProvider(tracerProvider TracerProvider) DIOption
```

WithTracerProvider sets the tracer provider for the DI container.

<a name="ErrorCode"></a>
## type [ErrorCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L251>)

ErrorCode represents standardized error codes for programmatic error handling.

```go
type ErrorCode string
```

<a name="ErrorCodeInvalidInput"></a>

```go
const (
    // ErrorCodeInvalidInput indicates invalid input parameters.
    ErrorCodeInvalidInput ErrorCode = "invalid_input"

    // ErrorCodeNotFound indicates a resource was not found.
    ErrorCodeNotFound ErrorCode = "not_found"

    // ErrorCodeUnauthorized indicates unauthorized access.
    ErrorCodeUnauthorized ErrorCode = "unauthorized"

    // ErrorCodeTimeout indicates a timeout occurred.
    ErrorCodeTimeout ErrorCode = "timeout"

    // ErrorCodeRateLimited indicates rate limiting was applied.
    ErrorCodeRateLimited ErrorCode = "rate_limited"

    // ErrorCodeInternalError indicates an internal system error.
    ErrorCodeInternalError ErrorCode = "internal_error"
)
```

<a name="ErrorType"></a>
## type [ErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L10>)

ErrorType represents different categories of errors in the framework.

```go
type ErrorType string
```

<a name="ErrorTypeValidation"></a>

```go
const (
    // ErrorTypeValidation indicates validation-related errors (invalid input, configuration, etc.)
    ErrorTypeValidation ErrorType = "validation"

    // ErrorTypeNetwork indicates network-related errors (connection failures, timeouts, etc.)
    ErrorTypeNetwork ErrorType = "network"

    // ErrorTypeAuthentication indicates authentication/authorization errors.
    ErrorTypeAuthentication ErrorType = "authentication"

    // ErrorTypeRateLimit indicates rate limiting errors.
    ErrorTypeRateLimit ErrorType = "rate_limit"

    // ErrorTypeInternal indicates internal system errors.
    ErrorTypeInternal ErrorType = "internal"

    // ErrorTypeExternal indicates errors from external services/APIs.
    ErrorTypeExternal ErrorType = "external"

    // ErrorTypeConfiguration indicates configuration-related errors.
    ErrorTypeConfiguration ErrorType = "configuration"
)
```

<a name="FrameworkError"></a>
## type [FrameworkError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L37-L43>)

FrameworkError represents a standardized error in the Beluga AI framework. It follows the Op/Err/Code pattern used across all Beluga AI packages.

```go
type FrameworkError struct {
    Op      string         // operation that failed
    Err     error          // underlying error
    Code    string         // error code for programmatic handling
    Message string         // human-readable message (optional)
    Context map[string]any // additional context (optional)
}
```

<a name="NewAuthenticationError"></a>
### func [NewAuthenticationError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L127>)

```go
func NewAuthenticationError(op, message string, err error) *FrameworkError
```

NewAuthenticationError creates a new authentication error. Use this for errors related to authentication or authorization failures.

Parameters:

- op: Operation that failed
- message: Human-readable error message
- err: Underlying authentication error (can be nil)

Returns:

- *FrameworkError: A new authentication error instance

Example:

```
err := core.NewAuthenticationError("authenticate", "invalid API key", authErr)
```

Example usage can be found in examples/core/basic/main.go

<a name="NewConfigurationError"></a>
### func [NewConfigurationError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L177>)

```go
func NewConfigurationError(op, message string, err error) *FrameworkError
```

NewConfigurationError creates a new configuration error. Use this for errors related to configuration loading, validation, or parsing.

Parameters:

- op: Operation that failed
- message: Human-readable error message
- err: Underlying configuration error (can be nil)

Returns:

- *FrameworkError: A new configuration error instance

Example:

```
err := core.NewConfigurationError("load_config", "missing required config key", nil)
```

Example usage can be found in examples/core/basic/main.go

<a name="NewFrameworkError"></a>
### func [NewFrameworkError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L274>)

```go
func NewFrameworkError(op string, code ErrorCode, message string, err error) *FrameworkError
```

NewFrameworkError creates a FrameworkError following the Op/Err/Code pattern.

<a name="NewFrameworkErrorWithCode"></a>
### func [NewFrameworkErrorWithCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L286>)

```go
func NewFrameworkErrorWithCode(errorType ErrorType, code ErrorCode, message string, cause error) *FrameworkError
```

NewFrameworkErrorWithCode creates a FrameworkError with a specific error code. Deprecated: Use NewFrameworkError instead.

<a name="NewInternalError"></a>
### func [NewInternalError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L152>)

```go
func NewInternalError(op, message string, err error) *FrameworkError
```

NewInternalError creates a new internal error. Use this for unexpected internal system errors that should be logged and investigated.

Parameters:

- op: Operation that failed
- message: Human-readable error message
- err: Underlying internal error (can be nil)

Returns:

- *FrameworkError: A new internal error instance

Example:

```
err := core.NewInternalError("process", "unexpected state", stateErr)
```

Example usage can be found in examples/core/basic/main.go

<a name="NewNetworkError"></a>
### func [NewNetworkError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L102>)

```go
func NewNetworkError(op, message string, err error) *FrameworkError
```

NewNetworkError creates a new network error. Use this for errors related to network operations (connection failures, timeouts, etc.).

Parameters:

- op: Operation that failed
- message: Human-readable error message
- err: Underlying network error (can be nil)

Returns:

- *FrameworkError: A new network error instance

Example:

```
err := core.NewNetworkError("connect", "connection timeout", timeoutErr)
```

Example usage can be found in examples/core/basic/main.go

<a name="NewValidationError"></a>
### func [NewValidationError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L77>)

```go
func NewValidationError(op, message string, err error) *FrameworkError
```

NewValidationError creates a new validation error. Use this for errors related to invalid input, configuration, or data validation.

Parameters:

- op: Operation that failed
- message: Human-readable error message
- err: Underlying error that caused the validation failure (can be nil)

Returns:

- *FrameworkError: A new validation error instance

Example:

```
err := core.NewValidationError("validate_config", "invalid API key format", nil)
```

Example usage can be found in examples/core/basic/main.go

<a name="FrameworkError.AddContext"></a>
### func (*FrameworkError) [AddContext](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L291>)

```go
func (e *FrameworkError) AddContext(key string, value any) *FrameworkError
```

AddContext adds context information to a FrameworkError.

<a name="FrameworkError.Error"></a>
### func (*FrameworkError) [Error](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L46>)

```go
func (e *FrameworkError) Error() string
```

Error implements the error interface.

<a name="FrameworkError.Unwrap"></a>
### func (*FrameworkError) [Unwrap](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/errors.go#L57>)

```go
func (e *FrameworkError) Unwrap() error
```

Unwrap returns the underlying error.

<a name="HealthChecker"></a>
## type [HealthChecker](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/interfaces.go#L37-L40>)

HealthChecker defines the interface for components that can report their health status.

```go
type HealthChecker interface {
    // CheckHealth performs a health check and returns an error if the component is unhealthy.
    CheckHealth(ctx context.Context) error
}
```

<a name="Loader"></a>
## type [Loader](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/interfaces.go#L14-L23>)

Loader defines the interface for loading documents from various sources. Loaders are responsible for reading data from files, databases, APIs, etc. and converting it into a standardized format (schema.Document).

```go
type Loader interface {
    // Load reads all data from the source and returns it as a slice of Documents.
    Load(ctx context.Context) ([]schema.Document, error)
    // LazyLoad provides an alternative way to load data, returning a channel that yields
    // documents one by one as they become available.
    // This is useful for large datasets or sources where loading everything at once is inefficient.
    // Errors encountered during loading should be sent on the channel.
    // The channel yields items of type schema.Document or error.
    LazyLoad(ctx context.Context) (<-chan any, error)
}
```

<a name="Logger"></a>
## type [Logger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L478-L484>)

Logger interface for structured logging.

```go
type Logger interface {
    Debug(msg string, args ...any)
    Info(msg string, args ...any)
    Warn(msg string, args ...any)
    Error(msg string, args ...any)
    With(args ...any) Logger
}
```

<a name="MeterProvider"></a>
## type [MeterProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L492-L494>)

MeterProvider interface for metrics collection.

```go
type MeterProvider interface {
    Meter(name string, opts ...metric.MeterOption) metric.Meter
}
```

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L17-L35>)

Metrics holds the metric instruments for core operations.

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="GetMetrics"></a>
### func [GetMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L283>)

```go
func GetMetrics() *Metrics
```

GetMetrics returns the global metrics instance. This follows the standard pattern used across all Beluga AI packages. Returns nil if InitMetrics has not been called or if initialization failed.

Example:

```
metrics := core.GetMetrics()
if metrics != nil {
    metrics.RecordRunnableInvoke(ctx, "component_type", duration, err)
}
```

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L111>)

```go
func NewMetrics(meter metric.Meter, tracer trace.Tracer) (*Metrics, error)
```

NewMetrics creates a new Metrics instance with registered instruments.

<a name="NoOpMetrics"></a>
### func [NoOpMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L289>)

```go
func NoOpMetrics() *Metrics
```

NoOpMetrics returns a metrics instance that does nothing. Useful for testing or when metrics are disabled.

<a name="Metrics.RecordRunnableBatch"></a>
### func (*Metrics) [RecordRunnableBatch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L170-L176>)

```go
func (m *Metrics) RecordRunnableBatch(ctx context.Context, componentType string, batchSize int, duration time.Duration, err error)
```

RecordRunnableBatch records metrics for a Runnable.Batch operation.

<a name="Metrics.RecordRunnableInvoke"></a>
### func (*Metrics) [RecordRunnableInvoke](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L147>)

```go
func (m *Metrics) RecordRunnableInvoke(ctx context.Context, componentType string, duration time.Duration, err error)
```

RecordRunnableInvoke records metrics for a Runnable.Invoke operation.

<a name="Metrics.RecordRunnableStream"></a>
### func (*Metrics) [RecordRunnableStream](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/metrics.go#L205-L211>)

```go
func (m *Metrics) RecordRunnableStream(ctx context.Context, componentType string, duration time.Duration, chunkCount int, err error)
```

RecordRunnableStream records metrics for a Runnable.Stream operation.

<a name="MockContainerOption"></a>
## type [MockContainerOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L217>)

MockContainerOption defines functional options for mock configuration.

```go
type MockContainerOption func(*AdvancedMockContainer)
```

<a name="WithContainerMockError"></a>
### func [WithContainerMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L220>)

```go
func WithContainerMockError(shouldError bool, err error) MockContainerOption
```

WithContainerMockError configures the mock to return errors.

<a name="MockRunnableOption"></a>
## type [MockRunnableOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L51>)

MockRunnableOption defines functional options for mock configuration.

```go
type MockRunnableOption func(*AdvancedMockRunnable)
```

<a name="WithMockDelay"></a>
### func [WithMockDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L62>)

```go
func WithMockDelay(delay time.Duration) MockRunnableOption
```

WithMockDelay adds artificial delay to mock operations.

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/test_utils.go#L54>)

```go
func WithMockError(shouldError bool, err error) MockRunnableOption
```

WithMockError configures the mock to return errors.

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/runnable.go#L11-L15>)

Option defines the interface for configuration options passed to Runnable methods. Specific options (like Temperature, MaxTokens, Callbacks) will implement this interface to modify the behavior of Runnable components during execution.

```go
type Option interface {
    // Apply modifies a configuration map. Implementations should add or update
    // key-value pairs relevant to their specific option.
    Apply(config *map[string]any)
}
```

<a name="WithOption"></a>
### func [WithOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/runnable.go#L28>)

```go
func WithOption(key string, value any) Option
```

WithOption creates a new Option that sets a specific key-value pair in the configuration map. This is a convenient way to create ad-hoc options for Runnables.

<a name="Retriever"></a>
## type [Retriever](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/interfaces.go#L29-L34>)

Retriever defines a generic interface for fetching relevant documents based on a query string. While often backed by a VectorStore, retrievers can implement other strategies (e.g., keyword search, database lookups, hybrid approaches). Retrievers implement the Runnable interface, making them easily pluggable into chains.

```go
type Retriever interface {
    Runnable // Input: string (query), Output: []schema.Document

    // GetRelevantDocuments retrieves documents considered relevant to the given query string.
    GetRelevantDocuments(ctx context.Context, query string) ([]schema.Document, error)
}
```

<a name="Runnable"></a>
## type [Runnable](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/runnable.go#L39-L65>)

Runnable is the central abstraction in Beluga-ai, inspired by LangChain. It represents a component that can be invoked with input to produce output. Most components, including LLMs, PromptTemplates, Tools, Retrievers, Agents, Chains, and Graphs, are designed to implement this interface. This provides a unified way to compose and execute different parts of an AI application.

```go
type Runnable interface {
    // Invoke executes the runnable component with a single input and returns a single output.
    // It is the primary method for synchronous execution.
    // `ctx` allows for cancellation and passing request-scoped values.
    // `input` is the data passed to the component.
    // `options` provide configuration specific to this invocation (e.g., LLM temperature).
    Invoke(ctx context.Context, input any, options ...Option) (any, error)

    // Batch executes the runnable component with multiple inputs concurrently or sequentially,
    // returning a corresponding list of outputs.
    // This can offer performance benefits for components that support batch processing.
    // `ctx` allows for cancellation.
    // `inputs` is a slice of input data.
    // `options` provide configuration for the batch execution.
    Batch(ctx context.Context, inputs []any, options ...Option) ([]any, error)

    // Stream executes the runnable component with a single input and returns a channel
    // from which output chunks can be read asynchronously.
    // This is useful for components like LLMs that can produce output incrementally.
    // The channel should be closed by the implementation when the stream is complete.
    // Any error encountered during streaming should be sent as the last item on the channel
    // before closing it.
    // `ctx` allows for cancellation.
    // `input` is the data passed to the component.
    // `options` provide configuration for the streaming execution.
    Stream(ctx context.Context, input any, options ...Option) (<-chan any, error)
}
```

<a name="RunnableWithTracing"></a>
### func [RunnableWithTracing](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L161-L166>)

```go
func RunnableWithTracing(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string) Runnable
```

RunnableWithTracing is a helper function that creates a TracedRunnable with the given component information.

<a name="RunnableWithTracingAndName"></a>
### func [RunnableWithTracingAndName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L172-L178>)

```go
func RunnableWithTracingAndName(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string, componentName string) Runnable
```

RunnableWithTracingAndName is a helper function that creates a TracedRunnable with the given component information including a name.

<a name="Tool"></a>
## type [Tool](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/tool.go#L8-L23>)

Tool defines the interface for tools that can be used by agents and LLMs.

```go
type Tool interface {
    // Name returns the unique identifier for this tool.
    Name() string

    // Description returns a human-readable description of what this tool does.
    Description() string

    // Definition returns the complete tool definition including schema, name, and description.
    Definition() ToolDefinition

    // Execute runs the tool with the given input.
    Execute(ctx context.Context, input any) (any, error)

    // Batch executes multiple inputs in parallel when possible.
    Batch(ctx context.Context, inputs []any) ([]any, error)
}
```

<a name="ToolDefinition"></a>
## type [ToolDefinition](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/tool.go#L26-L30>)

ToolDefinition provides metadata about a tool for LLM consumption.

```go
type ToolDefinition struct {
    InputSchema any    `json:"input_schema"`
    Name        string `json:"name"`
    Description string `json:"description"`
}
```

<a name="TracedRunnable"></a>
## type [TracedRunnable](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L15-L21>)

TracedRunnable wraps a Runnable with OpenTelemetry tracing and metrics.

```go
type TracedRunnable struct {
    // contains filtered or unexported fields
}
```

<a name="NewTracedRunnable"></a>
### func [NewTracedRunnable](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L25-L31>)

```go
func NewTracedRunnable(runnable Runnable, tracer trace.Tracer, metrics *Metrics, componentType string, componentName string) *TracedRunnable
```

NewTracedRunnable creates a new TracedRunnable that wraps the given Runnable with tracing and metrics instrumentation.

<a name="TracedRunnable.Batch"></a>
### func (*TracedRunnable) [Batch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L77>)

```go
func (tr *TracedRunnable) Batch(ctx context.Context, inputs []any, options ...Option) ([]any, error)
```

Batch executes the wrapped Runnable with tracing and metrics.

<a name="TracedRunnable.Invoke"></a>
### func (*TracedRunnable) [Invoke](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L49>)

```go
func (tr *TracedRunnable) Invoke(ctx context.Context, input any, options ...Option) (any, error)
```

Invoke executes the wrapped Runnable with tracing and metrics.

<a name="TracedRunnable.Stream"></a>
### func (*TracedRunnable) [Stream](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/traced_runnable.go#L106>)

```go
func (tr *TracedRunnable) Stream(ctx context.Context, input any, options ...Option) (<-chan any, error)
```

Stream executes the wrapped Runnable with tracing and metrics.

<a name="TracerProvider"></a>
## type [TracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/core/di.go#L487-L489>)

TracerProvider interface for distributed tracing.

```go
type TracerProvider interface {
    Tracer(name string, opts ...trace.TracerOption) trace.Tracer
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

---
title: vectorstores
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# vectorstores

```go
import "github.com/lookatitude/beluga-ai/pkg/vectorstores"
```

Package vectorstores provides custom error types for the vectorstores package.

Package vectorstores provides advanced test utilities and comprehensive mocks for testing vector store implementations. This file contains utilities designed to support both unit tests and integration tests.

Package vectorstores provides a comprehensive vector storage and retrieval system for retrieval-augmented generation (RAG) applications.

This package implements the Beluga AI Framework design patterns including: - Interface Segregation Principle (ISP) - Dependency Inversion Principle (DIP) - OpenTelemetry observability - Structured configuration management - Factory pattern for provider registration

Key Features: - Multiple vector store providers (in-memory, PostgreSQL, etc.) - Efficient similarity search with configurable algorithms - Comprehensive observability (metrics, tracing, logging) - Type-safe configuration with validation - Extensible provider architecture

Basic Usage:

```
import "github.com/lookatitude/beluga-ai/pkg/vectorstores"

// Create an in-memory vector store
store, err := vectorstores.NewInMemoryStore(ctx,
	vectorstores.WithEmbedder(embedder),
	vectorstores.WithSearchK(10),
)
if err != nil {
	log.Fatal(err)
}

// Add documents
docs := []schema.Document{
	schema.NewDocument("Machine learning is awesome", map[string]string{"topic": "ml"}),
}
ids, err := store.AddDocuments(ctx, docs)

// Search by query
results, scores, err := store.SimilaritySearchByQuery(ctx, "ML basics", 5, embedder)
```

Advanced Usage:

```
// Configure with custom settings
config := vectorstores.NewDefaultConfig()
config.SearchK = 20
config.ScoreThreshold = 0.8

store, err := vectorstores.NewVectorStore(ctx, "pgvector", config,
	vectorstores.WithProviderConfig("table_name", "my_documents"),
	vectorstores.WithMetadataFilter("category", "tech"),
)
```

Provider Registration:

```
// Register custom providers
vectorstores.RegisterGlobal("custom", func(ctx context.Context, config Config) (VectorStore, error) {
	return NewCustomStore(config)
})

store, err := vectorstores.NewVectorStore(ctx, "custom", config)
```

Observability:

```
// Set up global observability
metrics, _ := vectorstores.NewMetricsCollector(meter)
vectorstores.SetGlobalMetrics(metrics)

tracer := vectorstores.NewTracerProvider("my-app")
vectorstores.SetGlobalTracer(tracer)

logger := vectorstores.NewLogger(slog.New(slog.NewJSONHandler(os.Stdout, nil)))
vectorstores.SetGlobalLogger(logger)
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [`func AddDocuments(ctx context.Context, store VectorStore, documents []schema.Document, embedder Embedder, opts ...Option) ([]string, error)`](<#AddDocuments>)
- [`func ApplyOptions(config *vectorstoresiface.Config, opts ...Option)`](<#ApplyOptions>)
- [`func AssertDocumentStorage(t *testing.T, ids []string, expectedCount int)`](<#AssertDocumentStorage>)
- [`func AssertErrorType(t *testing.T, err error, expectedCode string)`](<#AssertErrorType>)
- [`func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)`](<#AssertHealthCheck>)
- [`func AssertVectorStoreResults(t *testing.T, documents []schema.Document, scores []float32, expectedMinCount int, expectedMaxScore float32)`](<#AssertVectorStoreResults>)
- [`func BatchAddDocuments(ctx context.Context, store VectorStore, documents []schema.Document, batchSize int, embedder Embedder, opts ...Option) ([]string, error)`](<#BatchAddDocuments>)
- [`func BatchSearch(ctx context.Context, store VectorStore, queries []string, k int, embedder Embedder, opts ...Option) ([][]schema.Document, [][]float32, error)`](<#BatchSearch>)
- [`func CreateTestDocuments(count int) []schema.Document`](<#CreateTestDocuments>)
- [`func CreateTestEmbeddings(count, dimension int) [][]float32`](<#CreateTestEmbeddings>)
- [`func CreateTestVectorStoreConfig() vectorstoresiface.Config`](<#CreateTestVectorStoreConfig>)
- [`func DeleteDocuments(ctx context.Context, store VectorStore, ids []string, opts ...Option) error`](<#DeleteDocuments>)
- [`func InitMetrics(meter metric.Meter, tracer trace.Tracer)`](<#InitMetrics>)
- [`func IsVectorStoreError(err error) bool`](<#IsVectorStoreError>)
- [`func ListProviders() []string`](<#ListProviders>)
- [`func NewDefaultConfig() *vectorstoresiface.Config`](<#NewDefaultConfig>)
- [`func RegisterGlobal(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))`](<#RegisterGlobal>)
- [`func RegisterProvider(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))`](<#RegisterProvider>)
- [`func RunLoadTest(t *testing.T, vectorStore *AdvancedMockVectorStore, numOperations, concurrency int)`](<#RunLoadTest>)
- [`func SearchByQuery(ctx context.Context, store VectorStore, query string, k int, embedder Embedder, opts ...Option) ([]schema.Document, []float32, error)`](<#SearchByQuery>)
- [`func SearchByVector(ctx context.Context, store VectorStore, queryVector []float32, k int, opts ...Option) ([]schema.Document, []float32, error)`](<#SearchByVector>)
- [`func SetGlobalLogger(logger *Logger)`](<#SetGlobalLogger>)
- [`func SetGlobalMetrics(mc *MetricsCollector)`](<#SetGlobalMetrics>)
- [`func SetGlobalTracer(tp *TracerProvider)`](<#SetGlobalTracer>)
- [`func ValidateProvider(name string) bool`](<#ValidateProvider>)
- [type AdvancedMockEmbedder](<#AdvancedMockEmbedder>)
  - [`func NewAdvancedMockEmbedder(dimension int) *AdvancedMockEmbedder`](<#NewAdvancedMockEmbedder>)
  - [`func (e *AdvancedMockEmbedder) EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)`](<#AdvancedMockEmbedder.EmbedDocuments>)
  - [`func (e *AdvancedMockEmbedder) EmbedQuery(ctx context.Context, text string) ([]float32, error)`](<#AdvancedMockEmbedder.EmbedQuery>)
- [type AdvancedMockRetriever](<#AdvancedMockRetriever>)
  - [`func (r *AdvancedMockRetriever) GetRelevantDocuments(ctx context.Context, query string) ([]schema.Document, error)`](<#AdvancedMockRetriever.GetRelevantDocuments>)
- [type AdvancedMockVectorStore](<#AdvancedMockVectorStore>)
  - [`func NewAdvancedMockVectorStore(name string, options ...MockVectorStoreOption) *AdvancedMockVectorStore`](<#NewAdvancedMockVectorStore>)
  - [`func (v *AdvancedMockVectorStore) AddDocuments(ctx context.Context, documents []schema.Document, opts ...vectorstoresiface.Option) ([]string, error)`](<#AdvancedMockVectorStore.AddDocuments>)
  - [`func (v *AdvancedMockVectorStore) AsRetriever(opts ...vectorstoresiface.Option) vectorstoresiface.Retriever`](<#AdvancedMockVectorStore.AsRetriever>)
  - [`func (v *AdvancedMockVectorStore) CheckHealth() map[string]any`](<#AdvancedMockVectorStore.CheckHealth>)
  - [`func (v *AdvancedMockVectorStore) DeleteDocuments(ctx context.Context, ids []string, opts ...vectorstoresiface.Option) error`](<#AdvancedMockVectorStore.DeleteDocuments>)
  - [`func (v *AdvancedMockVectorStore) GetCallCount() int`](<#AdvancedMockVectorStore.GetCallCount>)
  - [`func (v *AdvancedMockVectorStore) GetDocumentCount() int`](<#AdvancedMockVectorStore.GetDocumentCount>)
  - [`func (v *AdvancedMockVectorStore) GetDocuments() []schema.Document`](<#AdvancedMockVectorStore.GetDocuments>)
  - [`func (v *AdvancedMockVectorStore) GetName() string`](<#AdvancedMockVectorStore.GetName>)
  - [`func (v *AdvancedMockVectorStore) SimilaritySearch(ctx context.Context, queryVector []float32, k int, opts ...vectorstoresiface.Option) ([]schema.Document, []float32, error)`](<#AdvancedMockVectorStore.SimilaritySearch>)
  - [`func (v *AdvancedMockVectorStore) SimilaritySearchByQuery(ctx context.Context, query string, k int, embedder vectorstoresiface.Embedder, opts ...vectorstoresiface.Option) ([]schema.Document, []float32, error)`](<#AdvancedMockVectorStore.SimilaritySearchByQuery>)
- [type AdvancedMockcomponent](<#AdvancedMockcomponent>)
  - [`func NewAdvancedMockcomponent() *AdvancedMockcomponent`](<#NewAdvancedMockcomponent>)
- [type BaseConfig](<#BaseConfig>)
- [type BenchmarkHelper](<#BenchmarkHelper>)
  - [`func NewBenchmarkHelper(store vectorstoresiface.VectorStore, embedder vectorstoresiface.Embedder, docCount int) *BenchmarkHelper`](<#NewBenchmarkHelper>)
  - [`func (b *BenchmarkHelper) BenchmarkAddDocuments(batchSize, iterations int) (time.Duration, error)`](<#BenchmarkHelper.BenchmarkAddDocuments>)
  - [`func (b *BenchmarkHelper) BenchmarkSimilaritySearch(k, iterations int) (time.Duration, error)`](<#BenchmarkHelper.BenchmarkSimilaritySearch>)
- [type ConcurrentTestRunner](<#ConcurrentTestRunner>)
  - [`func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner`](<#NewConcurrentTestRunner>)
  - [`func (r *ConcurrentTestRunner) Run() error`](<#ConcurrentTestRunner.Run>)
- [type ConfigLoader](<#ConfigLoader>)
  - [`func NewConfigLoader() *ConfigLoader`](<#NewConfigLoader>)
  - [`func (cl *ConfigLoader) LoadInMemoryConfig(data map[string]any) (*InMemoryConfig, error)`](<#ConfigLoader.LoadInMemoryConfig>)
  - [`func (cl *ConfigLoader) LoadPgVectorConfig(data map[string]any) (*PgVectorConfig, error)`](<#ConfigLoader.LoadPgVectorConfig>)
  - [`func (cl *ConfigLoader) LoadPineconeConfig(data map[string]any) (*PineconeConfig, error)`](<#ConfigLoader.LoadPineconeConfig>)
- [type Embedder](<#Embedder>)
- [type Factory](<#Factory>)
- [type InMemoryConfig](<#InMemoryConfig>)
  - [`func (c *InMemoryConfig) Validate() error`](<#InMemoryConfig.Validate>)
- [type IntegrationTestHelper](<#IntegrationTestHelper>)
  - [`func NewIntegrationTestHelper() *IntegrationTestHelper`](<#NewIntegrationTestHelper>)
  - [`func (h *IntegrationTestHelper) AddEmbedder(name string, embedder *AdvancedMockEmbedder)`](<#IntegrationTestHelper.AddEmbedder>)
  - [`func (h *IntegrationTestHelper) AddVectorStore(name string, store *AdvancedMockVectorStore)`](<#IntegrationTestHelper.AddVectorStore>)
  - [`func (h *IntegrationTestHelper) GetEmbedder(name string) *AdvancedMockEmbedder`](<#IntegrationTestHelper.GetEmbedder>)
  - [`func (h *IntegrationTestHelper) GetVectorStore(name string) *AdvancedMockVectorStore`](<#IntegrationTestHelper.GetVectorStore>)
  - [`func (h *IntegrationTestHelper) Reset()`](<#IntegrationTestHelper.Reset>)
- [type Logger](<#Logger>)
  - [`func GetGlobalLogger() *Logger`](<#GetGlobalLogger>)
  - [`func NewLogger(logger *slog.Logger) *Logger`](<#NewLogger>)
  - [`func (l *Logger) LogDebug(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)`](<#Logger.LogDebug>)
  - [`func (l *Logger) LogDocumentOperation(ctx context.Context, level slog.Level, operation, storeName string, docCount int, duration time.Duration, err error)`](<#Logger.LogDocumentOperation>)
  - [`func (l *Logger) LogEmbeddingOperation(ctx context.Context, level slog.Level, storeName string, textCount int, duration time.Duration, err error)`](<#Logger.LogEmbeddingOperation>)
  - [`func (l *Logger) LogError(ctx context.Context, err error, operation, storeName string, additionalAttrs ...slog.Attr)`](<#Logger.LogError>)
  - [`func (l *Logger) LogInfo(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)`](<#Logger.LogInfo>)
  - [`func (l *Logger) LogPerformance(ctx context.Context, operation, storeName string, duration time.Duration, additionalAttrs ...slog.Attr)`](<#Logger.LogPerformance>)
  - [`func (l *Logger) LogSearchOperation(ctx context.Context, level slog.Level, storeName string, queryLength, k, resultCount int, duration time.Duration, err error)`](<#Logger.LogSearchOperation>)
  - [`func (l *Logger) LogStoreLifecycle(ctx context.Context, event, storeName string, additionalAttrs ...slog.Attr)`](<#Logger.LogStoreLifecycle>)
  - [`func (l *Logger) LogWarn(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)`](<#Logger.LogWarn>)
- [type MetricsCollector](<#MetricsCollector>)
  - [`func GetGlobalMetrics() *MetricsCollector`](<#GetGlobalMetrics>)
  - [`func GetMetrics() *MetricsCollector`](<#GetMetrics>)
  - [`func NewMetricsCollector(meter metric.Meter, tracer trace.Tracer) (*MetricsCollector, error)`](<#NewMetricsCollector>)
  - [`func (mc *MetricsCollector) RecordDiskUsage(ctx context.Context, bytes int64, storeName string)`](<#MetricsCollector.RecordDiskUsage>)
  - [`func (mc *MetricsCollector) RecordDocumentsAdded(ctx context.Context, count int, storeName string)`](<#MetricsCollector.RecordDocumentsAdded>)
  - [`func (mc *MetricsCollector) RecordDocumentsDeleted(ctx context.Context, count int, storeName string)`](<#MetricsCollector.RecordDocumentsDeleted>)
  - [`func (mc *MetricsCollector) RecordEmbedding(ctx context.Context, duration time.Duration, textCount int, storeName string)`](<#MetricsCollector.RecordEmbedding>)
  - [`func (mc *MetricsCollector) RecordError(ctx context.Context, errorCode, storeName string)`](<#MetricsCollector.RecordError>)
  - [`func (mc *MetricsCollector) RecordMemoryUsage(ctx context.Context, bytes int64, storeName string)`](<#MetricsCollector.RecordMemoryUsage>)
  - [`func (mc *MetricsCollector) RecordSearch(ctx context.Context, duration time.Duration, resultCount int, storeName string)`](<#MetricsCollector.RecordSearch>)
- [type MockVectorStoreOption](<#MockVectorStoreOption>)
  - [`func WithDefaultK(k int) MockVectorStoreOption`](<#WithDefaultK>)
  - [`func WithErrorCode(errorCode string) MockVectorStoreOption`](<#WithErrorCode>)
  - [`func WithErrorCodeAndMessage(errorCode, message string) MockVectorStoreOption`](<#WithErrorCodeAndMessage>)
  - [`func WithMockCapacity(capacity int) MockVectorStoreOption`](<#WithMockCapacity>)
  - [`func WithMockDelay(delay time.Duration) MockVectorStoreOption`](<#WithMockDelay>)
  - [`func WithMockError(shouldError bool, err error) MockVectorStoreOption`](<#WithMockError>)
  - [`func WithPreloadedDocuments(documents []schema.Document, embeddings [][]float32) MockVectorStoreOption`](<#WithPreloadedDocuments>)
  - [`func WithWrappedError(underlyingErr error, errorCode string) MockVectorStoreOption`](<#WithWrappedError>)
- [type Option](<#Option>)
  - [`func WithEmbedder(embedder Embedder) Option`](<#WithEmbedder>)
  - [`func WithMetadataFilter(key string, value any) Option`](<#WithMetadataFilter>)
  - [`func WithMetadataFilters(filters map[string]any) Option`](<#WithMetadataFilters>)
  - [`func WithProviderConfig(key string, value any) Option`](<#WithProviderConfig>)
  - [`func WithProviderConfigs(config map[string]any) Option`](<#WithProviderConfigs>)
  - [`func WithScoreThreshold(threshold float32) Option`](<#WithScoreThreshold>)
  - [`func WithSearchK(k int) Option`](<#WithSearchK>)
- [type PgVectorConfig](<#PgVectorConfig>)
  - [`func (c *PgVectorConfig) GetConnectionString() string`](<#PgVectorConfig.GetConnectionString>)
  - [`func (c *PgVectorConfig) GetFullTableName() string`](<#PgVectorConfig.GetFullTableName>)
  - [`func (c *PgVectorConfig) Validate() error`](<#PgVectorConfig.Validate>)
- [type PineconeConfig](<#PineconeConfig>)
  - [`func (c *PineconeConfig) Validate() error`](<#PineconeConfig.Validate>)
- [type Retriever](<#Retriever>)
  - [`func AsRetriever(store VectorStore, opts ...Option) Retriever`](<#AsRetriever>)
- [type StoreFactory](<#StoreFactory>)
  - [`func GetRegistry() *StoreFactory`](<#GetRegistry>)
  - [`func NewStoreFactory() *StoreFactory`](<#NewStoreFactory>)
  - [`func (f *StoreFactory) Create(ctx context.Context, name string, config vectorstoresiface.Config) (VectorStore, error)`](<#StoreFactory.Create>)
  - [`func (f *StoreFactory) Register(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))`](<#StoreFactory.Register>)
- [type TracerProvider](<#TracerProvider>)
  - [`func GetGlobalTracer() *TracerProvider`](<#GetGlobalTracer>)
  - [`func NewTracerProvider(tracerName string) *TracerProvider`](<#NewTracerProvider>)
  - [`func (tp *TracerProvider) StartAddDocumentsSpan(ctx context.Context, storeName string, docCount int) (context.Context, func())`](<#TracerProvider.StartAddDocumentsSpan>)
  - [`func (tp *TracerProvider) StartDeleteDocumentsSpan(ctx context.Context, storeName string, docCount int) (context.Context, func())`](<#TracerProvider.StartDeleteDocumentsSpan>)
  - [`func (tp *TracerProvider) StartEmbeddingSpan(ctx context.Context, storeName string, textCount int) (context.Context, func())`](<#TracerProvider.StartEmbeddingSpan>)
  - [`func (tp *TracerProvider) StartSearchSpan(ctx context.Context, storeName string, queryLength, k int) (context.Context, func())`](<#TracerProvider.StartSearchSpan>)
  - [`func (tp *TracerProvider) StartSpan(ctx context.Context, operation string, opts ...attribute.KeyValue) (context.Context, func())`](<#TracerProvider.StartSpan>)
- [type VectorStore](<#VectorStore>)
  - [`func NewInMemoryStore(ctx context.Context, opts ...Option) (VectorStore, error)`](<#NewInMemoryStore>)
  - [`func NewPgVectorStore(ctx context.Context, opts ...Option) (VectorStore, error)`](<#NewPgVectorStore>)
  - [`func NewPineconeStore(ctx context.Context, opts ...Option) (VectorStore, error)`](<#NewPineconeStore>)
  - [`func NewVectorStore(ctx context.Context, name string, config vectorstoresiface.Config) (VectorStore, error)`](<#NewVectorStore>)
- [type VectorStoreError](<#VectorStoreError>)
  - [`func AsVectorStoreError(err error) (*VectorStoreError, bool)`](<#AsVectorStoreError>)
  - [`func NewVectorStoreError(op, code string, err error) *VectorStoreError`](<#NewVectorStoreError>)
  - [`func NewVectorStoreErrorWithMessage(op, code, message string, err error) *VectorStoreError`](<#NewVectorStoreErrorWithMessage>)
  - [`func WrapError(err error, op, code string) *VectorStoreError`](<#WrapError>)
  - [`func (e *VectorStoreError) Error() string`](<#VectorStoreError.Error>)
  - [`func (e *VectorStoreError) Unwrap() error`](<#VectorStoreError.Unwrap>)
- [type VectorStoreScenarioRunner](<#VectorStoreScenarioRunner>)
  - [`func NewVectorStoreScenarioRunner(store vectorstoresiface.VectorStore, embedder vectorstoresiface.Embedder) *VectorStoreScenarioRunner`](<#NewVectorStoreScenarioRunner>)
  - [`func (r *VectorStoreScenarioRunner) RunDocumentDeletionScenario(ctx context.Context, idsToDelete []string) error`](<#VectorStoreScenarioRunner.RunDocumentDeletionScenario>)
  - [`func (r *VectorStoreScenarioRunner) RunDocumentIngestionScenario(ctx context.Context, documentCount int) error`](<#VectorStoreScenarioRunner.RunDocumentIngestionScenario>)
  - [`func (r *VectorStoreScenarioRunner) RunSimilaritySearchScenario(ctx context.Context, queries []string, k int) ([][]schema.Document, error)`](<#VectorStoreScenarioRunner.RunSimilaritySearchScenario>)
- [type VectorStoresMockcomponent](<#VectorStoresMockcomponent>)
  - [`func NewVectorStoresMockcomponent() *VectorStoresMockcomponent`](<#NewVectorStoresMockcomponent>)

## Constants

<a name="ErrCodeInvalidConfig"></a>Error codes for vector store operations.

```go
const (
    ErrCodeInvalidConfig       = "invalid_config"
    ErrCodeInvalidInput        = "invalid_input"
    ErrCodeStorageFailed       = "storage_failed"
    ErrCodeRetrievalFailed     = "retrieval_failed"
    ErrCodeProviderNotFound    = "provider_not_found"
    ErrCodeProviderError       = "provider_error"
    ErrCodeNetworkError        = "network_error"
    ErrCodeTimeout             = "timeout"
    ErrCodeConnectionFailed    = "connection_failed"
    ErrCodeIndexNotFound       = "index_not_found"
    ErrCodeIndexCreationFailed = "index_creation_failed"
    ErrCodeDocumentNotFound    = "document_not_found"
    ErrCodeEmbeddingFailed     = "embedding_failed"
    ErrCodeInvalidVector       = "invalid_vector"
    ErrCodeInvalidDimension    = "invalid_dimension"
    ErrCodeSearchFailed        = "search_failed"
    ErrCodeContextCanceled     = "context_canceled"
    ErrCodeContextTimeout      = "context_timeout"
)
```

## Variables

<a name="LogError"></a>Default convenience functions that use the global logger.

```go
var (
    LogError = func(ctx context.Context, err error, operation, storeName string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogError(ctx, err, operation, storeName, additionalAttrs...)
    }

    LogInfo = func(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogInfo(ctx, message, storeName, additionalAttrs...)
    }

    LogDebug = func(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogDebug(ctx, message, storeName, additionalAttrs...)
    }

    LogWarn = func(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr) {
        GetGlobalLogger().LogWarn(ctx, message, storeName, additionalAttrs...)
    }

    LogDocumentOperation = func(ctx context.Context, level slog.Level, operation, storeName string, docCount int, duration time.Duration, err error) {
        GetGlobalLogger().LogDocumentOperation(ctx, level, operation, storeName, docCount, duration, err)
    }

    LogSearchOperation = func(ctx context.Context, level slog.Level, storeName string, queryLength, k, resultCount int, duration time.Duration, err error) {
        GetGlobalLogger().LogSearchOperation(ctx, level, storeName, queryLength, k, resultCount, duration, err)
    }

    LogEmbeddingOperation = func(ctx context.Context, level slog.Level, storeName string, textCount int, duration time.Duration, err error) {
        GetGlobalLogger().LogEmbeddingOperation(ctx, level, storeName, textCount, duration, err)
    }
)
```

<a name="AddDocuments"></a>
## func [AddDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L397>)

```go
func AddDocuments(ctx context.Context, store VectorStore, documents []schema.Document, embedder Embedder, opts ...Option) ([]string, error)
```

AddDocuments is a convenience function that adds documents to a store. It handles embedding generation if an embedder is configured.

Example:

```
ids, err := vectorstores.AddDocuments(ctx, store, docs, embedder)
```

<a name="ApplyOptions"></a>
## func [ApplyOptions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L142>)

```go
func ApplyOptions(config *vectorstoresiface.Config, opts ...Option)
```

ApplyOptions applies a slice of options to a Config.

<a name="AssertDocumentStorage"></a>
## func [AssertDocumentStorage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L498>)

```go
func AssertDocumentStorage(t *testing.T, ids []string, expectedCount int)
```

AssertDocumentStorage validates document storage operations.

<a name="AssertErrorType"></a>
## func [AssertErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L522>)

```go
func AssertErrorType(t *testing.T, err error, expectedCode string)
```

AssertErrorType validates error types and codes.

<a name="AssertHealthCheck"></a>
## func [AssertHealthCheck](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L512>)

```go
func AssertHealthCheck(t *testing.T, health map[string]any, expectedStatus string)
```

AssertHealthCheck validates health check results.

<a name="AssertVectorStoreResults"></a>
## func [AssertVectorStoreResults](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L475>)

```go
func AssertVectorStoreResults(t *testing.T, documents []schema.Document, scores []float32, expectedMinCount int, expectedMaxScore float32)
```

AssertVectorStoreResults validates vector store search results.

<a name="BatchAddDocuments"></a>
## func [BatchAddDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L524>)

```go
func BatchAddDocuments(ctx context.Context, store VectorStore, documents []schema.Document, batchSize int, embedder Embedder, opts ...Option) ([]string, error)
```

BatchAddDocuments adds multiple batches of documents efficiently. It handles batching and error aggregation.

Example:

```
results, err := vectorstores.BatchAddDocuments(ctx, store, allDocs, 100, embedder)
```

<a name="BatchSearch"></a>
## func [BatchSearch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L571>)

```go
func BatchSearch(ctx context.Context, store VectorStore, queries []string, k int, embedder Embedder, opts ...Option) ([][]schema.Document, [][]float32, error)
```

BatchSearch performs multiple search operations efficiently. Useful for processing multiple queries in parallel.

Example:

```
results, err := vectorstores.BatchSearch(ctx, store, queries, 5, embedder)
```

<a name="CreateTestDocuments"></a>
## func [CreateTestDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L405>)

```go
func CreateTestDocuments(count int) []schema.Document
```

CreateTestDocuments creates a set of test documents.

<a name="CreateTestEmbeddings"></a>
## func [CreateTestEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L420>)

```go
func CreateTestEmbeddings(count, dimension int) [][]float32
```

CreateTestEmbeddings creates test embeddings for documents.

<a name="CreateTestVectorStoreConfig"></a>
## func [CreateTestVectorStoreConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L429>)

```go
func CreateTestVectorStoreConfig() vectorstoresiface.Config
```

CreateTestVectorStoreConfig creates a test vector store configuration.

<a name="DeleteDocuments"></a>
## func [DeleteDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L489>)

```go
func DeleteDocuments(ctx context.Context, store VectorStore, ids []string, opts ...Option) error
```

DeleteDocuments is a convenience function for document deletion.

Example:

```
err := vectorstores.DeleteDocuments(ctx, store, []string{"doc1", "doc2"})
```

<a name="InitMetrics"></a>
## func [InitMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L303>)

```go
func InitMetrics(meter metric.Meter, tracer trace.Tracer)
```

InitMetrics initializes the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="IsVectorStoreError"></a>
## func [IsVectorStoreError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L87>)

```go
func IsVectorStoreError(err error) bool
```

IsVectorStoreError checks if an error is a VectorStoreError.

<a name="ListProviders"></a>
## func [ListProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L366>)

```go
func ListProviders() []string
```

ListProviders returns a list of all registered provider names. This is useful for configuration validation and UI components.

Example:

```
providers := vectorstores.ListProviders()
fmt.Printf("Available providers: %v\n", providers)
```

<a name="NewDefaultConfig"></a>
## func [NewDefaultConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L134>)

```go
func NewDefaultConfig() *vectorstoresiface.Config
```

NewDefaultConfig creates a new Config with default values.

<a name="RegisterGlobal"></a>
## func [RegisterGlobal](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L261>)

```go
func RegisterGlobal(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))
```

RegisterGlobal registers a provider with the global factory. Deprecated: Use GetRegistry().Register() instead for consistency.

<a name="RegisterProvider"></a>
## func [RegisterProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L355>)

```go
func RegisterProvider(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))
```

RegisterProvider registers a new vector store provider with the global factory. This allows extending the package with custom providers.

Example:

```
vectorstores.RegisterProvider("custom", func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error) {
	return NewCustomStore(config)
})
```

<a name="RunLoadTest"></a>
## func [RunLoadTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L593>)

```go
func RunLoadTest(t *testing.T, vectorStore *AdvancedMockVectorStore, numOperations, concurrency int)
```

RunLoadTest executes a load test scenario on vector store.

<a name="SearchByQuery"></a>
## func [SearchByQuery](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L429>)

```go
func SearchByQuery(ctx context.Context, store VectorStore, query string, k int, embedder Embedder, opts ...Option) ([]schema.Document, []float32, error)
```

SearchByQuery is a convenience function for text-based search. It handles embedding generation and search in one call.

Example:

```
results, scores, err := vectorstores.SearchByQuery(ctx, store, "machine learning", 5, embedder)
```

<a name="SearchByVector"></a>
## func [SearchByVector](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L464>)

```go
func SearchByVector(ctx context.Context, store VectorStore, queryVector []float32, k int, opts ...Option) ([]schema.Document, []float32, error)
```

SearchByVector is a convenience function for vector-based search. It performs similarity search using a pre-computed embedding vector.

Example:

```
results, scores, err := vectorstores.SearchByVector(ctx, store, queryVector, 5)
```

<a name="SetGlobalLogger"></a>
## func [SetGlobalLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L223>)

```go
func SetGlobalLogger(logger *Logger)
```

SetGlobalLogger sets the global logger instance.

<a name="SetGlobalMetrics"></a>
## func [SetGlobalMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L330>)

```go
func SetGlobalMetrics(mc *MetricsCollector)
```

SetGlobalMetrics is deprecated. Use InitMetrics instead. Deprecated: Use InitMetrics(meter) instead.

<a name="SetGlobalTracer"></a>
## func [SetGlobalTracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L341>)

```go
func SetGlobalTracer(tp *TracerProvider)
```

SetGlobalTracer sets the global tracer provider.

<a name="ValidateProvider"></a>
## func [ValidateProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L379>)

```go
func ValidateProvider(name string) bool
```

ValidateProvider checks if a provider name is registered and valid.

Example:

```
if !vectorstores.ValidateProvider("inmemory") {
	log.Fatal("Invalid provider")
}
```

<a name="AdvancedMockEmbedder"></a>
## type [AdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L381-L384>)

AdvancedMockEmbedder for vector store testing.

```go
type AdvancedMockEmbedder struct {
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockEmbedder"></a>
### func [NewAdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L386>)

```go
func NewAdvancedMockEmbedder(dimension int) *AdvancedMockEmbedder
```

<a name="AdvancedMockEmbedder.EmbedDocuments"></a>
### func (*AdvancedMockEmbedder) [EmbedDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L390>)

```go
func (e *AdvancedMockEmbedder) EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)
```

<a name="AdvancedMockEmbedder.EmbedQuery"></a>
### func (*AdvancedMockEmbedder) [EmbedQuery](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L398>)

```go
func (e *AdvancedMockEmbedder) EmbedQuery(ctx context.Context, text string) ([]float32, error)
```

<a name="AdvancedMockRetriever"></a>
## type [AdvancedMockRetriever](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L369-L372>)

AdvancedMockRetriever implements the Retriever interface for testing.

```go
type AdvancedMockRetriever struct {
    // contains filtered or unexported fields
}
```

<a name="AdvancedMockRetriever.GetRelevantDocuments"></a>
### func (*AdvancedMockRetriever) [GetRelevantDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L374>)

```go
func (r *AdvancedMockRetriever) GetRelevantDocuments(ctx context.Context, query string) ([]schema.Document, error)
```

<a name="AdvancedMockVectorStore"></a>
## type [AdvancedMockVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L24-L42>)

AdvancedMockVectorStore provides a comprehensive mock implementation for testing.

```go
type AdvancedMockVectorStore struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockVectorStore"></a>
### func [NewAdvancedMockVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L45>)

```go
func NewAdvancedMockVectorStore(name string, options ...MockVectorStoreOption) *AdvancedMockVectorStore
```

NewAdvancedMockVectorStore creates a new advanced mock with configurable behavior.

<a name="AdvancedMockVectorStore.AddDocuments"></a>
### func (*AdvancedMockVectorStore) [AddDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L144>)

```go
func (v *AdvancedMockVectorStore) AddDocuments(ctx context.Context, documents []schema.Document, opts ...vectorstoresiface.Option) ([]string, error)
```

Mock implementation methods.

<a name="AdvancedMockVectorStore.AsRetriever"></a>
### func (*AdvancedMockVectorStore) [AsRetriever](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L325>)

```go
func (v *AdvancedMockVectorStore) AsRetriever(opts ...vectorstoresiface.Option) vectorstoresiface.Retriever
```

<a name="AdvancedMockVectorStore.CheckHealth"></a>
### func (*AdvancedMockVectorStore) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L356>)

```go
func (v *AdvancedMockVectorStore) CheckHealth() map[string]any
```

<a name="AdvancedMockVectorStore.DeleteDocuments"></a>
### func (*AdvancedMockVectorStore) [DeleteDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L194>)

```go
func (v *AdvancedMockVectorStore) DeleteDocuments(ctx context.Context, ids []string, opts ...vectorstoresiface.Option) error
```

<a name="AdvancedMockVectorStore.GetCallCount"></a>
### func (*AdvancedMockVectorStore) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L336>)

```go
func (v *AdvancedMockVectorStore) GetCallCount() int
```

<a name="AdvancedMockVectorStore.GetDocumentCount"></a>
### func (*AdvancedMockVectorStore) [GetDocumentCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L342>)

```go
func (v *AdvancedMockVectorStore) GetDocumentCount() int
```

<a name="AdvancedMockVectorStore.GetDocuments"></a>
### func (*AdvancedMockVectorStore) [GetDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L348>)

```go
func (v *AdvancedMockVectorStore) GetDocuments() []schema.Document
```

<a name="AdvancedMockVectorStore.GetName"></a>
### func (*AdvancedMockVectorStore) [GetName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L332>)

```go
func (v *AdvancedMockVectorStore) GetName() string
```

<a name="AdvancedMockVectorStore.SimilaritySearch"></a>
### func (*AdvancedMockVectorStore) [SimilaritySearch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L224>)

```go
func (v *AdvancedMockVectorStore) SimilaritySearch(ctx context.Context, queryVector []float32, k int, opts ...vectorstoresiface.Option) ([]schema.Document, []float32, error)
```

<a name="AdvancedMockVectorStore.SimilaritySearchByQuery"></a>
### func (*AdvancedMockVectorStore) [SimilaritySearchByQuery](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L299>)

```go
func (v *AdvancedMockVectorStore) SimilaritySearchByQuery(ctx context.Context, query string, k int, embedder vectorstoresiface.Embedder, opts ...vectorstoresiface.Option) ([]schema.Document, []float32, error)
```

<a name="AdvancedMockcomponent"></a>
## type [AdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/advanced_mock.go#L8-L10>)

AdvancedMockcomponent is a mock implementation of Interface.

```go
type AdvancedMockcomponent struct {
    mock.Mock
}
```

<a name="NewAdvancedMockcomponent"></a>
### func [NewAdvancedMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/advanced_mock.go#L13>)

```go
func NewAdvancedMockcomponent() *AdvancedMockcomponent
```

NewAdvancedMockcomponent creates a new AdvancedMockcomponent.

<a name="BaseConfig"></a>
## type [BaseConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L15-L20>)

```go
type BaseConfig struct {
    Name        string   `mapstructure:"name" yaml:"name" json:"name" validate:"required"`
    Description string   `mapstructure:"description" yaml:"description" json:"description"`
    Tags        []string `mapstructure:"tags" yaml:"tags" json:"tags"`
    Enabled     bool     `mapstructure:"enabled" yaml:"enabled" json:"enabled" default:"true"`
}
```

<a name="BenchmarkHelper"></a>
## type [BenchmarkHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L744-L748>)

BenchmarkHelper provides benchmarking utilities for vector stores.

```go
type BenchmarkHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewBenchmarkHelper"></a>
### func [NewBenchmarkHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L750>)

```go
func NewBenchmarkHelper(store vectorstoresiface.VectorStore, embedder vectorstoresiface.Embedder, docCount int) *BenchmarkHelper
```

<a name="BenchmarkHelper.BenchmarkAddDocuments"></a>
### func (*BenchmarkHelper) [BenchmarkAddDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L758>)

```go
func (b *BenchmarkHelper) BenchmarkAddDocuments(batchSize, iterations int) (time.Duration, error)
```

<a name="BenchmarkHelper.BenchmarkSimilaritySearch"></a>
### func (*BenchmarkHelper) [BenchmarkSimilaritySearch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L773>)

```go
func (b *BenchmarkHelper) BenchmarkSimilaritySearch(k, iterations int) (time.Duration, error)
```

<a name="ConcurrentTestRunner"></a>
## type [ConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L534-L538>)

ConcurrentTestRunner runs vector store tests concurrently for performance testing.

```go
type ConcurrentTestRunner struct {
    NumGoroutines int
    TestDuration  time.Duration
    // contains filtered or unexported fields
}
```

<a name="NewConcurrentTestRunner"></a>
### func [NewConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L540>)

```go
func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner
```

<a name="ConcurrentTestRunner.Run"></a>
### func (*ConcurrentTestRunner) [Run](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L548>)

```go
func (r *ConcurrentTestRunner) Run() error
```

<a name="ConfigLoader"></a>
## type [ConfigLoader](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L107-L109>)

ConfigLoader handles loading and validating configuration from various sources.

```go
type ConfigLoader struct {
    // contains filtered or unexported fields
}
```

<a name="NewConfigLoader"></a>
### func [NewConfigLoader](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L112>)

```go
func NewConfigLoader() *ConfigLoader
```

NewConfigLoader creates a new configuration loader with custom validation rules.

<a name="ConfigLoader.LoadInMemoryConfig"></a>
### func (*ConfigLoader) [LoadInMemoryConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L124>)

```go
func (cl *ConfigLoader) LoadInMemoryConfig(data map[string]any) (*InMemoryConfig, error)
```

LoadInMemoryConfig loads and validates InMemoryConfig from a map.

<a name="ConfigLoader.LoadPgVectorConfig"></a>
### func (*ConfigLoader) [LoadPgVectorConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L133>)

```go
func (cl *ConfigLoader) LoadPgVectorConfig(data map[string]any) (*PgVectorConfig, error)
```

LoadPgVectorConfig loads and validates PgVectorConfig from a map.

<a name="ConfigLoader.LoadPineconeConfig"></a>
### func (*ConfigLoader) [LoadPineconeConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L142>)

```go
func (cl *ConfigLoader) LoadPineconeConfig(data map[string]any) (*PineconeConfig, error)
```

LoadPineconeConfig loads and validates PineconeConfig from a map.

<a name="Embedder"></a>
## type [Embedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L88-L91>)

Embedder defines the interface for generating vector embeddings from text. This follows the Interface Segregation Principle by focusing on embedding functionality.

```go
type Embedder interface {
    EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)
    EmbedQuery(ctx context.Context, text string) ([]float32, error)
}
```

<a name="Factory"></a>
## type [Factory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L217-L221>)

Factory defines the interface for creating VectorStore instances. This enables dependency injection and makes testing easier.

```go
type Factory interface {
    // CreateVectorStore creates a new VectorStore instance with the given configuration.
    // The config parameter contains provider-specific settings.
    CreateVectorStore(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error)
}
```

<a name="InMemoryConfig"></a>
## type [InMemoryConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L23-L28>)

InMemoryConfig holds configuration for the in-memory vector store provider.

```go
type InMemoryConfig struct {
    BaseConfig `mapstructure:",squash" yaml:",inline" json:",inline"`

    // In-memory specific configuration
    MaxDocuments int `mapstructure:"max_documents" yaml:"max_documents" json:"max_documents" default:"10000"`
}
```

<a name="InMemoryConfig.Validate"></a>
### func (*InMemoryConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L60>)

```go
func (c *InMemoryConfig) Validate() error
```

Validate validates the configuration using struct tags and custom validation rules.

<a name="IntegrationTestHelper"></a>
## type [IntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L653-L656>)

IntegrationTestHelper provides utilities for integration testing.

```go
type IntegrationTestHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewIntegrationTestHelper"></a>
### func [NewIntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L658>)

```go
func NewIntegrationTestHelper() *IntegrationTestHelper
```

<a name="IntegrationTestHelper.AddEmbedder"></a>
### func (*IntegrationTestHelper) [AddEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L669>)

```go
func (h *IntegrationTestHelper) AddEmbedder(name string, embedder *AdvancedMockEmbedder)
```

<a name="IntegrationTestHelper.AddVectorStore"></a>
### func (*IntegrationTestHelper) [AddVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L665>)

```go
func (h *IntegrationTestHelper) AddVectorStore(name string, store *AdvancedMockVectorStore)
```

<a name="IntegrationTestHelper.GetEmbedder"></a>
### func (*IntegrationTestHelper) [GetEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L677>)

```go
func (h *IntegrationTestHelper) GetEmbedder(name string) *AdvancedMockEmbedder
```

<a name="IntegrationTestHelper.GetVectorStore"></a>
### func (*IntegrationTestHelper) [GetVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L673>)

```go
func (h *IntegrationTestHelper) GetVectorStore(name string) *AdvancedMockVectorStore
```

<a name="IntegrationTestHelper.Reset"></a>
### func (*IntegrationTestHelper) [Reset](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L681>)

```go
func (h *IntegrationTestHelper) Reset()
```

<a name="Logger"></a>
## type [Logger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L13-L15>)

Logger provides structured logging for vector store operations. It integrates with OpenTelemetry tracing for consistent log correlation.

```go
type Logger struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalLogger"></a>
### func [GetGlobalLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L228>)

```go
func GetGlobalLogger() *Logger
```

GetGlobalLogger returns the global logger instance.

<a name="NewLogger"></a>
### func [NewLogger](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L18>)

```go
func NewLogger(logger *slog.Logger) *Logger
```

NewLogger creates a new structured logger for vector stores.

<a name="Logger.LogDebug"></a>
### func (*Logger) [LogDebug](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L140>)

```go
func (l *Logger) LogDebug(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)
```

LogDebug logs debug messages.

<a name="Logger.LogDocumentOperation"></a>
### func (*Logger) [LogDocumentOperation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L28>)

```go
func (l *Logger) LogDocumentOperation(ctx context.Context, level slog.Level, operation, storeName string, docCount int, duration time.Duration, err error)
```

LogDocumentOperation logs document-related operations.

<a name="Logger.LogEmbeddingOperation"></a>
### func (*Logger) [LogEmbeddingOperation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L77>)

```go
func (l *Logger) LogEmbeddingOperation(ctx context.Context, level slog.Level, storeName string, textCount int, duration time.Duration, err error)
```

LogEmbeddingOperation logs embedding operations.

<a name="Logger.LogError"></a>
### func (*Logger) [LogError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L100>)

```go
func (l *Logger) LogError(ctx context.Context, err error, operation, storeName string, additionalAttrs ...slog.Attr)
```

LogError logs errors with context.

<a name="Logger.LogInfo"></a>
### func (*Logger) [LogInfo](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L121>)

```go
func (l *Logger) LogInfo(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)
```

LogInfo logs informational messages.

<a name="Logger.LogPerformance"></a>
### func (*Logger) [LogPerformance](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L198>)

```go
func (l *Logger) LogPerformance(ctx context.Context, operation, storeName string, duration time.Duration, additionalAttrs ...slog.Attr)
```

LogPerformance logs performance-related information.

<a name="Logger.LogSearchOperation"></a>
### func (*Logger) [LogSearchOperation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L52>)

```go
func (l *Logger) LogSearchOperation(ctx context.Context, level slog.Level, storeName string, queryLength, k, resultCount int, duration time.Duration, err error)
```

LogSearchOperation logs search operations.

<a name="Logger.LogStoreLifecycle"></a>
### func (*Logger) [LogStoreLifecycle](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L178>)

```go
func (l *Logger) LogStoreLifecycle(ctx context.Context, event, storeName string, additionalAttrs ...slog.Attr)
```

LogStoreLifecycle logs vector store lifecycle events.

<a name="Logger.LogWarn"></a>
### func (*Logger) [LogWarn](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/logging.go#L159>)

```go
func (l *Logger) LogWarn(ctx context.Context, message, storeName string, additionalAttrs ...slog.Attr)
```

LogWarn logs warning messages.

<a name="MetricsCollector"></a>
## type [MetricsCollector](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L17-L41>)

MetricsCollector provides metrics collection for vector store operations. It follows OpenTelemetry conventions for consistent observability.

```go
type MetricsCollector struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalMetrics"></a>
### func [GetGlobalMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L336>)

```go
func GetGlobalMetrics() *MetricsCollector
```

GetGlobalMetrics is deprecated. Use GetMetrics instead. Deprecated: Use GetMetrics() instead.

<a name="GetMetrics"></a>
### func [GetMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L324>)

```go
func GetMetrics() *MetricsCollector
```

GetMetrics returns the global metrics instance. This follows the standard pattern used across all Beluga AI packages.

<a name="NewMetricsCollector"></a>
### func [NewMetricsCollector](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L44>)

```go
func NewMetricsCollector(meter metric.Meter, tracer trace.Tracer) (*MetricsCollector, error)
```

NewMetricsCollector creates a new metrics collector with OpenTelemetry.

<a name="MetricsCollector.RecordDiskUsage"></a>
### func (*MetricsCollector) [RecordDiskUsage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L225>)

```go
func (mc *MetricsCollector) RecordDiskUsage(ctx context.Context, bytes int64, storeName string)
```

RecordDiskUsage records current disk usage.

<a name="MetricsCollector.RecordDocumentsAdded"></a>
### func (*MetricsCollector) [RecordDocumentsAdded](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L157>)

```go
func (mc *MetricsCollector) RecordDocumentsAdded(ctx context.Context, count int, storeName string)
```

RecordDocumentsAdded records metrics when documents are added.

<a name="MetricsCollector.RecordDocumentsDeleted"></a>
### func (*MetricsCollector) [RecordDocumentsDeleted](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L167>)

```go
func (mc *MetricsCollector) RecordDocumentsDeleted(ctx context.Context, count int, storeName string)
```

RecordDocumentsDeleted records metrics when documents are deleted.

<a name="MetricsCollector.RecordEmbedding"></a>
### func (*MetricsCollector) [RecordEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L189>)

```go
func (mc *MetricsCollector) RecordEmbedding(ctx context.Context, duration time.Duration, textCount int, storeName string)
```

RecordEmbedding records metrics for embedding operations.

<a name="MetricsCollector.RecordError"></a>
### func (*MetricsCollector) [RecordError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L203>)

```go
func (mc *MetricsCollector) RecordError(ctx context.Context, errorCode, storeName string)
```

RecordError records error metrics.

<a name="MetricsCollector.RecordMemoryUsage"></a>
### func (*MetricsCollector) [RecordMemoryUsage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L216>)

```go
func (mc *MetricsCollector) RecordMemoryUsage(ctx context.Context, bytes int64, storeName string)
```

RecordMemoryUsage records current memory usage.

<a name="MetricsCollector.RecordSearch"></a>
### func (*MetricsCollector) [RecordSearch](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L177>)

```go
func (mc *MetricsCollector) RecordSearch(ctx context.Context, duration time.Duration, resultCount int, storeName string)
```

RecordSearch records metrics for search operations.

<a name="MockVectorStoreOption"></a>
## type [MockVectorStoreOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L68>)

MockVectorStoreOption defines functional options for mock configuration.

```go
type MockVectorStoreOption func(*AdvancedMockVectorStore)
```

<a name="WithDefaultK"></a>
### func [WithDefaultK](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L113>)

```go
func WithDefaultK(k int) MockVectorStoreOption
```

WithDefaultK sets the default number of results to return.

<a name="WithErrorCode"></a>
### func [WithErrorCode](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L120>)

```go
func WithErrorCode(errorCode string) MockVectorStoreOption
```

WithErrorCode configures the mock to return a specific error code.

<a name="WithErrorCodeAndMessage"></a>
### func [WithErrorCodeAndMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L128>)

```go
func WithErrorCodeAndMessage(errorCode, message string) MockVectorStoreOption
```

WithErrorCodeAndMessage configures the mock to return a specific error code with a message.

<a name="WithMockCapacity"></a>
### func [WithMockCapacity](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L86>)

```go
func WithMockCapacity(capacity int) MockVectorStoreOption
```

WithMockCapacity sets the storage capacity limit.

<a name="WithMockDelay"></a>
### func [WithMockDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L79>)

```go
func WithMockDelay(delay time.Duration) MockVectorStoreOption
```

WithMockDelay adds artificial delay to mock operations.

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L71>)

```go
func WithMockError(shouldError bool, err error) MockVectorStoreOption
```

WithMockError configures the mock to return errors.

<a name="WithPreloadedDocuments"></a>
### func [WithPreloadedDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L93>)

```go
func WithPreloadedDocuments(documents []schema.Document, embeddings [][]float32) MockVectorStoreOption
```

WithPreloadedDocuments preloads documents into the mock.

<a name="WithWrappedError"></a>
### func [WithWrappedError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L136>)

```go
func WithWrappedError(underlyingErr error, errorCode string) MockVectorStoreOption
```

WithWrappedError configures the mock to return a wrapped error.

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L131>)

Option represents a functional option for configuring VectorStore operations. This follows the functional options pattern for flexible configuration.

```go
type Option func(*vectorstoresiface.Config)
```

<a name="WithEmbedder"></a>
### func [WithEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L149>)

```go
func WithEmbedder(embedder Embedder) Option
```

WithEmbedder sets the embedder to use for generating embeddings.

<a name="WithMetadataFilter"></a>
### func [WithMetadataFilter](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L172>)

```go
func WithMetadataFilter(key string, value any) Option
```

WithMetadataFilter adds a metadata filter for search operations. Only documents matching the filter criteria will be considered.

<a name="WithMetadataFilters"></a>
### func [WithMetadataFilters](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L182>)

```go
func WithMetadataFilters(filters map[string]any) Option
```

WithMetadataFilters sets multiple metadata filters for search operations.

<a name="WithProviderConfig"></a>
### func [WithProviderConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L194>)

```go
func WithProviderConfig(key string, value any) Option
```

WithProviderConfig sets provider-specific configuration options.

<a name="WithProviderConfigs"></a>
### func [WithProviderConfigs](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L204>)

```go
func WithProviderConfigs(config map[string]any) Option
```

WithProviderConfigs sets multiple provider-specific configuration options.

<a name="WithScoreThreshold"></a>
### func [WithScoreThreshold](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L164>)

```go
func WithScoreThreshold(threshold float32) Option
```

WithScoreThreshold sets the minimum similarity score threshold for search results. Documents with scores below this threshold will be filtered out.

<a name="WithSearchK"></a>
### func [WithSearchK](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L156>)

```go
func WithSearchK(k int) Option
```

WithSearchK sets the number of similar documents to return in search operations.

<a name="PgVectorConfig"></a>
## type [PgVectorConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L31-L45>)

PgVectorConfig holds configuration for the PostgreSQL vector store provider.

```go
type PgVectorConfig struct {
    SSLMode        string `mapstructure:"ssl_mode" yaml:"ssl_mode" json:"ssl_mode" default:"disable"`
    Host           string `mapstructure:"host" yaml:"host" json:"host" validate:"required" default:"localhost"`
    Database       string `mapstructure:"database" yaml:"database" json:"database" validate:"required"`
    User           string `mapstructure:"user" yaml:"user" json:"user" validate:"required"`
    Password       string `mapstructure:"password" yaml:"password" json:"password" validate:"required"`
    TableName      string `mapstructure:"table_name" yaml:"table_name" json:"table_name" default:"beluga_documents"`
    SchemaName     string `mapstructure:"schema_name" yaml:"schema_name" json:"schema_name" default:"public"`
    BaseConfig     `mapstructure:",squash" yaml:",inline" json:",inline"`
    Port           int `mapstructure:"port" yaml:"port" json:"port" default:"5432"`
    EmbeddingDim   int `mapstructure:"embedding_dim" yaml:"embedding_dim" json:"embedding_dim" validate:"required,min=1"`
    MaxConnections int `mapstructure:"max_connections" yaml:"max_connections" json:"max_connections" default:"10"`
    MinConnections int `mapstructure:"min_connections" yaml:"min_connections" json:"min_connections" default:"1"`
    DefaultSearchK int `mapstructure:"default_search_k" yaml:"default_search_k" json:"default_search_k" default:"5"`
}
```

<a name="PgVectorConfig.GetConnectionString"></a>
### func (*PgVectorConfig) [GetConnectionString](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L93>)

```go
func (c *PgVectorConfig) GetConnectionString() string
```

GetConnectionString returns a PostgreSQL connection string from the configuration.

<a name="PgVectorConfig.GetFullTableName"></a>
### func (*PgVectorConfig) [GetFullTableName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L99>)

```go
func (c *PgVectorConfig) GetFullTableName() string
```

GetFullTableName returns the fully qualified table name including schema.

<a name="PgVectorConfig.Validate"></a>
### func (*PgVectorConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L69>)

```go
func (c *PgVectorConfig) Validate() error
```

Validate validates the configuration using struct tags and custom validation rules.

<a name="PineconeConfig"></a>
## type [PineconeConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L48-L57>)

PineconeConfig holds configuration for the Pinecone vector store provider.

```go
type PineconeConfig struct {
    APIKey         string `mapstructure:"api_key" yaml:"api_key" json:"api_key" validate:"required"`
    Environment    string `mapstructure:"environment" yaml:"environment" json:"environment" validate:"required"`
    ProjectID      string `mapstructure:"project_id" yaml:"project_id" json:"project_id" validate:"required"`
    IndexName      string `mapstructure:"index_name" yaml:"index_name" json:"index_name" validate:"required"`
    IndexHost      string `mapstructure:"index_host" yaml:"index_host" json:"index_host"`
    BaseConfig     `mapstructure:",squash" yaml:",inline" json:",inline"`
    EmbeddingDim   int `mapstructure:"embedding_dim" yaml:"embedding_dim" json:"embedding_dim" validate:"required,min=1"`
    DefaultSearchK int `mapstructure:"default_search_k" yaml:"default_search_k" json:"default_search_k" default:"5"`
}
```

<a name="PineconeConfig.Validate"></a>
### func (*PineconeConfig) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/config.go#L84>)

```go
func (c *PineconeConfig) Validate() error
```

Validate validates the configuration using struct tags and custom validation rules.

<a name="Retriever"></a>
## type [Retriever](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L95-L97>)

Retriever defines the interface for retrieving documents based on queries. This enables VectorStores to be used in retrieval chains and graphs.

```go
type Retriever interface {
    GetRelevantDocuments(ctx context.Context, query string) ([]schema.Document, error)
}
```

<a name="AsRetriever"></a>
### func [AsRetriever](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L512>)

```go
func AsRetriever(store VectorStore, opts ...Option) Retriever
```

AsRetriever is a convenience function to get a retriever from a store.

Example:

```
retriever := vectorstores.AsRetriever(store, vectorstores.WithSearchK(10))
docs, err := retriever.GetRelevantDocuments(ctx, "query")
```

<a name="StoreFactory"></a>
## type [StoreFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L225-L227>)

StoreFactory is the global factory for creating vector store instances. It maintains a registry of available providers and their creation functions.

```go
type StoreFactory struct {
    // contains filtered or unexported fields
}
```

<a name="GetRegistry"></a>
### func [GetRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L255>)

```go
func GetRegistry() *StoreFactory
```

GetRegistry returns the global factory instance. This follows the standard pattern used across all Beluga AI packages.

<a name="NewStoreFactory"></a>
### func [NewStoreFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L230>)

```go
func NewStoreFactory() *StoreFactory
```

NewStoreFactory creates a new StoreFactory instance.

<a name="StoreFactory.Create"></a>
### func (*StoreFactory) [Create](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L242>)

```go
func (f *StoreFactory) Create(ctx context.Context, name string, config vectorstoresiface.Config) (VectorStore, error)
```

Create creates a new vector store instance using the registered provider.

<a name="StoreFactory.Register"></a>
### func (*StoreFactory) [Register](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L237>)

```go
func (f *StoreFactory) Register(name string, creator func(ctx context.Context, config vectorstoresiface.Config) (VectorStore, error))
```

Register registers a new vector store provider with the factory.

<a name="TracerProvider"></a>
## type [TracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L234-L236>)

TracerProvider provides tracing functionality for vector store operations.

```go
type TracerProvider struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalTracer"></a>
### func [GetGlobalTracer](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L346>)

```go
func GetGlobalTracer() *TracerProvider
```

GetGlobalTracer returns the global tracer provider.

<a name="NewTracerProvider"></a>
### func [NewTracerProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L239>)

```go
func NewTracerProvider(tracerName string) *TracerProvider
```

NewTracerProvider creates a new tracer provider for vector stores.

<a name="TracerProvider.StartAddDocumentsSpan"></a>
### func (*TracerProvider) [StartAddDocumentsSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L262>)

```go
func (tp *TracerProvider) StartAddDocumentsSpan(ctx context.Context, storeName string, docCount int) (context.Context, func())
```

StartAddDocumentsSpan starts a span for document addition operations.

<a name="TracerProvider.StartDeleteDocumentsSpan"></a>
### func (*TracerProvider) [StartDeleteDocumentsSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L270>)

```go
func (tp *TracerProvider) StartDeleteDocumentsSpan(ctx context.Context, storeName string, docCount int) (context.Context, func())
```

StartDeleteDocumentsSpan starts a span for document deletion operations.

<a name="TracerProvider.StartEmbeddingSpan"></a>
### func (*TracerProvider) [StartEmbeddingSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L287>)

```go
func (tp *TracerProvider) StartEmbeddingSpan(ctx context.Context, storeName string, textCount int) (context.Context, func())
```

StartEmbeddingSpan starts a span for embedding operations.

<a name="TracerProvider.StartSearchSpan"></a>
### func (*TracerProvider) [StartSearchSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L278>)

```go
func (tp *TracerProvider) StartSearchSpan(ctx context.Context, storeName string, queryLength, k int) (context.Context, func())
```

StartSearchSpan starts a span for search operations.

<a name="TracerProvider.StartSpan"></a>
### func (*TracerProvider) [StartSpan](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/metrics.go#L249>)

```go
func (tp *TracerProvider) StartSpan(ctx context.Context, operation string, opts ...attribute.KeyValue) (context.Context, func())
```

StartSpan starts a new trace span for an operation.

<a name="VectorStore"></a>
## type [VectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L102-L127>)

VectorStore defines the core interface for storing and querying vector embeddings. It provides methods for document storage, deletion, and similarity search. Implementations should be thread-safe and handle context cancellation properly.

```go
type VectorStore interface {
    // AddDocuments stores documents with their embeddings in the vector store.
    // It generates embeddings if an embedder is available, or uses pre-computed embeddings.
    // Returns the IDs of stored documents and any error encountered.
    AddDocuments(ctx context.Context, documents []schema.Document, opts ...Option) ([]string, error)

    // DeleteDocuments removes documents from the store based on their IDs.
    // Returns an error if any document cannot be deleted.
    DeleteDocuments(ctx context.Context, ids []string, opts ...Option) error

    // SimilaritySearch finds the k most similar documents to a query vector.
    // Returns documents and their similarity scores (higher scores indicate better matches).
    SimilaritySearch(ctx context.Context, queryVector []float32, k int, opts ...Option) ([]schema.Document, []float32, error)

    // SimilaritySearchByQuery performs similarity search using a text query.
    // It generates an embedding for the query and then performs vector similarity search.
    SimilaritySearchByQuery(ctx context.Context, query string, k int, embedder Embedder, opts ...Option) ([]schema.Document, []float32, error)

    // AsRetriever returns a Retriever implementation based on this VectorStore.
    // This enables the VectorStore to be used in retrieval chains and pipelines.
    AsRetriever(opts ...Option) Retriever

    // GetName returns the name/identifier of this vector store implementation.
    // This is used for logging, metrics, and debugging purposes.
    GetName() string
}
```

<a name="NewInMemoryStore"></a>
### func [NewInMemoryStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L287>)

```go
func NewInMemoryStore(ctx context.Context, opts ...Option) (VectorStore, error)
```

NewInMemoryStore creates a new in-memory vector store with the given options. This is the simplest provider, suitable for development and testing.

Example:

```
store, err := vectorstores.NewInMemoryStore(ctx,
	vectorstores.WithEmbedder(embedder),
	vectorstores.WithSearchK(10),
)
```

Note: This function requires the inmemory provider to be imported for registration. Import it with: import \_ "github.com/lookatitude/beluga-ai/pkg/vectorstores/providers/inmemory".

<a name="NewPgVectorStore"></a>
### func [NewPgVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L308>)

```go
func NewPgVectorStore(ctx context.Context, opts ...Option) (VectorStore, error)
```

NewPgVectorStore creates a new PostgreSQL vector store with the given options. Requires a running PostgreSQL instance with the pgvector extension.

Example:

```
store, err := vectorstores.NewPgVectorStore(ctx,
	vectorstores.WithEmbedder(embedder),
	vectorstores.WithProviderConfig("connection_string", "postgres://user:pass@localhost/db"),
	vectorstores.WithProviderConfig("table_name", "documents"),
	vectorstores.WithProviderConfig("embedding_dimension", 768),
)
```

Note: This function requires the pgvector provider to be imported for registration. Import it with: import \_ "github.com/lookatitude/beluga-ai/pkg/vectorstores/providers/pgvector".

<a name="NewPineconeStore"></a>
### func [NewPineconeStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L330>)

```go
func NewPineconeStore(ctx context.Context, opts ...Option) (VectorStore, error)
```

NewPineconeStore creates a new Pinecone vector store with the given options. Requires Pinecone API credentials and configuration.

Example:

```
store, err := vectorstores.NewPineconeStore(ctx,
	vectorstores.WithEmbedder(embedder),
	vectorstores.WithProviderConfig("api_key", "your-api-key"),
	vectorstores.WithProviderConfig("environment", "us-west1-gcp"),
	vectorstores.WithProviderConfig("project_id", "your-project"),
	vectorstores.WithProviderConfig("index_name", "my-index"),
)
```

Note: This function requires the pinecone provider to be imported for registration. Import it with: import \_ "github.com/lookatitude/beluga-ai/pkg/vectorstores/providers/pinecone".

<a name="NewVectorStore"></a>
### func [NewVectorStore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores.go#L266>)

```go
func NewVectorStore(ctx context.Context, name string, config vectorstoresiface.Config) (VectorStore, error)
```

NewVectorStore creates a vector store using the global factory.

<a name="VectorStoreError"></a>
## type [VectorStoreError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L32-L37>)

VectorStoreError represents an error that occurred during vector store operations.

```go
type VectorStoreError struct {
    Op      string // operation that failed
    Err     error  // underlying error
    Code    string // error code for programmatic handling
    Message string // human-readable message
}
```

<a name="AsVectorStoreError"></a>
### func [AsVectorStoreError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L93>)

```go
func AsVectorStoreError(err error) (*VectorStoreError, bool)
```

AsVectorStoreError attempts to convert an error to a VectorStoreError.

<a name="NewVectorStoreError"></a>
### func [NewVectorStoreError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L56>)

```go
func NewVectorStoreError(op, code string, err error) *VectorStoreError
```

NewVectorStoreError creates a new VectorStoreError.

<a name="NewVectorStoreErrorWithMessage"></a>
### func [NewVectorStoreErrorWithMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L65>)

```go
func NewVectorStoreErrorWithMessage(op, code, message string, err error) *VectorStoreError
```

NewVectorStoreErrorWithMessage creates a new VectorStoreError with a custom message.

<a name="WrapError"></a>
### func [WrapError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L75>)

```go
func WrapError(err error, op, code string) *VectorStoreError
```

WrapError wraps an error as a VectorStoreError.

<a name="VectorStoreError.Error"></a>
### func (*VectorStoreError) [Error](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L40>)

```go
func (e *VectorStoreError) Error() string
```

Error implements the error interface.

<a name="VectorStoreError.Unwrap"></a>
### func (*VectorStoreError) [Unwrap](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/errors.go#L51>)

```go
func (e *VectorStoreError) Unwrap() error
```

Unwrap returns the underlying error.

<a name="VectorStoreScenarioRunner"></a>
## type [VectorStoreScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L692-L695>)

VectorStoreScenarioRunner runs common vector store scenarios.

```go
type VectorStoreScenarioRunner struct {
    // contains filtered or unexported fields
}
```

<a name="NewVectorStoreScenarioRunner"></a>
### func [NewVectorStoreScenarioRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L697>)

```go
func NewVectorStoreScenarioRunner(store vectorstoresiface.VectorStore, embedder vectorstoresiface.Embedder) *VectorStoreScenarioRunner
```

<a name="VectorStoreScenarioRunner.RunDocumentDeletionScenario"></a>
### func (*VectorStoreScenarioRunner) [RunDocumentDeletionScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L739>)

```go
func (r *VectorStoreScenarioRunner) RunDocumentDeletionScenario(ctx context.Context, idsToDelete []string) error
```

<a name="VectorStoreScenarioRunner.RunDocumentIngestionScenario"></a>
### func (*VectorStoreScenarioRunner) [RunDocumentIngestionScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L704>)

```go
func (r *VectorStoreScenarioRunner) RunDocumentIngestionScenario(ctx context.Context, documentCount int) error
```

<a name="VectorStoreScenarioRunner.RunSimilaritySearchScenario"></a>
### func (*VectorStoreScenarioRunner) [RunSimilaritySearchScenario](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/test_utils.go#L725>)

```go
func (r *VectorStoreScenarioRunner) RunSimilaritySearchScenario(ctx context.Context, queries []string, k int) ([][]schema.Document, error)
```

<a name="VectorStoresMockcomponent"></a>
## type [VectorStoresMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores_mock.go#L8-L10>)

VectorStoresMockcomponent is a mock implementation of Interface.

```go
type VectorStoresMockcomponent struct {
    mock.Mock
}
```

<a name="NewVectorStoresMockcomponent"></a>
### func [NewVectorStoresMockcomponent](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/vectorstores/vectorstores_mock.go#L13>)

```go
func NewVectorStoresMockcomponent() *VectorStoresMockcomponent
```

NewVectorStoresMockcomponent creates a new VectorStoresMockcomponent.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

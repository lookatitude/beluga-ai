---
title: session
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# session

```go
import "github.com/lookatitude/beluga-ai/pkg/voice/session"
```

Package session provides interfaces and implementations for Voice Session management. This package follows the Beluga AI Framework's design patterns for consistency, extensibility, configuration management, and observability.

Package session provides advanced test utilities and comprehensive mocks for testing Session implementations.

## Index

- [Constants](<#constants>)
- [func AssertSessionInterface\(t \*testing.T, s iface.VoiceSession\)](<#AssertSessionInterface>)
- [func InitMetrics\(meter metric.Meter\)](<#InitMetrics>)
- [func IsRetryableError\(err error\) bool](<#IsRetryableError>)
- [func NewVoiceSession\(ctx context.Context, opts ...VoiceOption\) \(iface.VoiceSession, error\)](<#NewVoiceSession>)
- [type AdvancedMockSession](<#AdvancedMockSession>)
  - [func NewAdvancedMockSession\(sessionID string, opts ...MockOption\) \*AdvancedMockSession](<#NewAdvancedMockSession>)
  - [func \(m \*AdvancedMockSession\) GetCallCount\(\) int](<#AdvancedMockSession.GetCallCount>)
  - [func \(m \*AdvancedMockSession\) GetSessionID\(\) string](<#AdvancedMockSession.GetSessionID>)
  - [func \(m \*AdvancedMockSession\) GetState\(\) iface.SessionState](<#AdvancedMockSession.GetState>)
  - [func \(m \*AdvancedMockSession\) IsActive\(\) bool](<#AdvancedMockSession.IsActive>)
  - [func \(m \*AdvancedMockSession\) OnStateChanged\(callback func\(iface.SessionState\)\)](<#AdvancedMockSession.OnStateChanged>)
  - [func \(m \*AdvancedMockSession\) ProcessAudio\(ctx context.Context, audio \[\]byte\) error](<#AdvancedMockSession.ProcessAudio>)
  - [func \(m \*AdvancedMockSession\) Say\(ctx context.Context, text string\) \(iface.SayHandle, error\)](<#AdvancedMockSession.Say>)
  - [func \(m \*AdvancedMockSession\) SayWithOptions\(ctx context.Context, text string, options iface.SayOptions\) \(iface.SayHandle, error\)](<#AdvancedMockSession.SayWithOptions>)
  - [func \(m \*AdvancedMockSession\) Start\(ctx context.Context\) error](<#AdvancedMockSession.Start>)
  - [func \(m \*AdvancedMockSession\) Stop\(ctx context.Context\) error](<#AdvancedMockSession.Stop>)
- [type Config](<#Config>)
  - [func DefaultConfig\(\) \*Config](<#DefaultConfig>)
  - [func \(c \*Config\) Validate\(\) error](<#Config.Validate>)
- [type ConfigOption](<#ConfigOption>)
  - [func WithAutoStart\(autoStart bool\) ConfigOption](<#WithAutoStart>)
  - [func WithEnableKeepAlive\(enable bool\) ConfigOption](<#WithEnableKeepAlive>)
  - [func WithKeepAliveInterval\(interval time.Duration\) ConfigOption](<#WithKeepAliveInterval>)
  - [func WithMaxRetries\(maxRetries int\) ConfigOption](<#WithMaxRetries>)
  - [func WithSessionID\(id string\) ConfigOption](<#WithSessionID>)
  - [func WithTimeout\(timeout time.Duration\) ConfigOption](<#WithTimeout>)
- [type Metrics](<#Metrics>)
  - [func GetMetrics\(\) \*Metrics](<#GetMetrics>)
  - [func NewMetrics\(meter metric.Meter\) \*Metrics](<#NewMetrics>)
  - [func \(m \*Metrics\) DecrementActiveSessions\(ctx context.Context\)](<#Metrics.DecrementActiveSessions>)
  - [func \(m \*Metrics\) IncrementActiveSessions\(ctx context.Context\)](<#Metrics.IncrementActiveSessions>)
  - [func \(m \*Metrics\) RecordSessionError\(ctx context.Context, sessionID, errorCode string, duration time.Duration\)](<#Metrics.RecordSessionError>)
  - [func \(m \*Metrics\) RecordSessionStart\(ctx context.Context, sessionID string, duration time.Duration\)](<#Metrics.RecordSessionStart>)
  - [func \(m \*Metrics\) RecordSessionStop\(ctx context.Context, sessionID string, duration time.Duration\)](<#Metrics.RecordSessionStop>)
- [type MetricsRecorder](<#MetricsRecorder>)
- [type MockOption](<#MockOption>)
  - [func WithActive\(active bool\) MockOption](<#WithActive>)
  - [func WithError\(err error\) MockOption](<#WithError>)
  - [func WithMockSessionID\(id string\) MockOption](<#WithMockSessionID>)
  - [func WithNetworkDelay\(enabled bool\) MockOption](<#WithNetworkDelay>)
  - [func WithProcessingDelay\(delay time.Duration\) MockOption](<#WithProcessingDelay>)
  - [func WithStarted\(started bool\) MockOption](<#WithStarted>)
- [type NoOpMetrics](<#NoOpMetrics>)
  - [func NewNoOpMetrics\(\) \*NoOpMetrics](<#NewNoOpMetrics>)
  - [func \(n \*NoOpMetrics\) DecrementActiveSessions\(ctx context.Context\)](<#NoOpMetrics.DecrementActiveSessions>)
  - [func \(n \*NoOpMetrics\) IncrementActiveSessions\(ctx context.Context\)](<#NoOpMetrics.IncrementActiveSessions>)
  - [func \(n \*NoOpMetrics\) RecordSessionError\(ctx context.Context, sessionID, errorCode string, duration time.Duration\)](<#NoOpMetrics.RecordSessionError>)
  - [func \(n \*NoOpMetrics\) RecordSessionStart\(ctx context.Context, sessionID string, duration time.Duration\)](<#NoOpMetrics.RecordSessionStart>)
  - [func \(n \*NoOpMetrics\) RecordSessionStop\(ctx context.Context, sessionID string, duration time.Duration\)](<#NoOpMetrics.RecordSessionStop>)
- [type SayHandle](<#SayHandle>)
- [type SayOptions](<#SayOptions>)
- [type SessionError](<#SessionError>)
  - [func NewSessionError\(op, code string, err error\) \*SessionError](<#NewSessionError>)
  - [func NewSessionErrorWithDetails\(op, code, message string, err error, details map\[string\]interface\{\}\) \*SessionError](<#NewSessionErrorWithDetails>)
  - [func NewSessionErrorWithMessage\(op, code, message string, err error\) \*SessionError](<#NewSessionErrorWithMessage>)
  - [func \(e \*SessionError\) Error\(\) string](<#SessionError.Error>)
  - [func \(e \*SessionError\) Unwrap\(\) error](<#SessionError.Unwrap>)
- [type SessionState](<#SessionState>)
- [type VoiceOption](<#VoiceOption>)
  - [func WithAgentCallback\(callback func\(ctx context.Context, transcript string\) \(string, error\)\) VoiceOption](<#WithAgentCallback>)
  - [func WithConfig\(config \*Config\) VoiceOption](<#WithConfig>)
  - [func WithNoiseCancellation\(noiseCancellation iface.NoiseCancellation\) VoiceOption](<#WithNoiseCancellation>)
  - [func WithOnStateChanged\(callback func\(state SessionState\)\) VoiceOption](<#WithOnStateChanged>)
  - [func WithSTTProvider\(provider iface.STTProvider\) VoiceOption](<#WithSTTProvider>)
  - [func WithTTSProvider\(provider iface.TTSProvider\) VoiceOption](<#WithTTSProvider>)
  - [func WithTransport\(transport iface.Transport\) VoiceOption](<#WithTransport>)
  - [func WithTurnDetector\(detector iface.TurnDetector\) VoiceOption](<#WithTurnDetector>)
  - [func WithVADProvider\(provider iface.VADProvider\) VoiceOption](<#WithVADProvider>)
- [type VoiceOptions](<#VoiceOptions>)


## Constants

<a name="ErrCodeInvalidConfig"></a>Error codes for Session operations

```go
const (
    // General errors
    ErrCodeInvalidConfig = "invalid_config"
    ErrCodeInternalError = "internal_error"
    ErrCodeInvalidState  = "invalid_state"
    ErrCodeTimeout       = "timeout"

    // Session lifecycle errors
    ErrCodeSessionNotFound      = "session_not_found"
    ErrCodeSessionAlreadyActive = "session_already_active"
    ErrCodeSessionNotActive     = "session_not_active"
    ErrCodeSessionExpired       = "session_expired"

    // Context errors
    ErrCodeContextCanceled = "context_canceled"
    ErrCodeContextTimeout  = "context_timeout"
)
```

<a name="SessionStateInitial"></a>SessionState constants

```go
const (
    SessionStateInitial    = iface.SessionStateInitial
    SessionStateListening  = iface.SessionStateListening
    SessionStateProcessing = iface.SessionStateProcessing
    SessionStateSpeaking   = iface.SessionStateSpeaking
    SessionStateAway       = iface.SessionStateAway
    SessionStateEnded      = iface.SessionStateEnded
)
```

<a name="AssertSessionInterface"></a>
## func [AssertSessionInterface](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L229>)

```go
func AssertSessionInterface(t *testing.T, s iface.VoiceSession)
```

AssertSessionInterface ensures that a type implements the VoiceSession interface

<a name="InitMetrics"></a>
## func [InitMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/session.go#L24>)

```go
func InitMetrics(meter metric.Meter)
```

InitMetrics initializes the global metrics instance

<a name="IsRetryableError"></a>
## func [IsRetryableError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L84>)

```go
func IsRetryableError(err error) bool
```

IsRetryableError checks if an error is retryable

<a name="NewVoiceSession"></a>
## func [NewVoiceSession](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/session.go#L37>)

```go
func NewVoiceSession(ctx context.Context, opts ...VoiceOption) (iface.VoiceSession, error)
```

NewVoiceSession creates a new VoiceSession instance based on the provided options. It validates the configuration and initializes all required components.

<a name="AdvancedMockSession"></a>
## type [AdvancedMockSession](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L16-L34>)

AdvancedMockSession provides a comprehensive mock implementation for testing

```go
type AdvancedMockSession struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockSession"></a>
### func [NewAdvancedMockSession](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L37>)

```go
func NewAdvancedMockSession(sessionID string, opts ...MockOption) *AdvancedMockSession
```

NewAdvancedMockSession creates a new advanced mock with configurable behavior

<a name="AdvancedMockSession.GetCallCount"></a>
### func \(\*AdvancedMockSession\) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L222>)

```go
func (m *AdvancedMockSession) GetCallCount() int
```

GetCallCount returns the number of times methods have been called

<a name="AdvancedMockSession.GetSessionID"></a>
### func \(\*AdvancedMockSession\) [GetSessionID](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L179>)

```go
func (m *AdvancedMockSession) GetSessionID() string
```

GetSessionID implements the VoiceSession interface

<a name="AdvancedMockSession.GetState"></a>
### func \(\*AdvancedMockSession\) [GetState](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L186>)

```go
func (m *AdvancedMockSession) GetState() iface.SessionState
```

GetState implements the VoiceSession interface

<a name="AdvancedMockSession.IsActive"></a>
### func \(\*AdvancedMockSession\) [IsActive](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L172>)

```go
func (m *AdvancedMockSession) IsActive() bool
```

IsActive implements the Session interface

<a name="AdvancedMockSession.OnStateChanged"></a>
### func \(\*AdvancedMockSession\) [OnStateChanged](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L217>)

```go
func (m *AdvancedMockSession) OnStateChanged(callback func(iface.SessionState))
```

OnStateChanged implements the VoiceSession interface

<a name="AdvancedMockSession.ProcessAudio"></a>
### func \(\*AdvancedMockSession\) [ProcessAudio](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L211>)

```go
func (m *AdvancedMockSession) ProcessAudio(ctx context.Context, audio []byte) error
```

ProcessAudio implements the VoiceSession interface

<a name="AdvancedMockSession.Say"></a>
### func \(\*AdvancedMockSession\) [Say](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L199>)

```go
func (m *AdvancedMockSession) Say(ctx context.Context, text string) (iface.SayHandle, error)
```

Say implements the VoiceSession interface

<a name="AdvancedMockSession.SayWithOptions"></a>
### func \(\*AdvancedMockSession\) [SayWithOptions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L205>)

```go
func (m *AdvancedMockSession) SayWithOptions(ctx context.Context, text string, options iface.SayOptions) (iface.SayHandle, error)
```

SayWithOptions implements the VoiceSession interface

<a name="AdvancedMockSession.Start"></a>
### func \(\*AdvancedMockSession\) [Start](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L101>)

```go
func (m *AdvancedMockSession) Start(ctx context.Context) error
```

Start implements the Session interface

<a name="AdvancedMockSession.Stop"></a>
### func \(\*AdvancedMockSession\) [Stop](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L141>)

```go
func (m *AdvancedMockSession) Stop(ctx context.Context) error
```

Stop implements the Session interface

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L11-L37>)

Config represents the configuration for Session providers. It includes common settings that apply to all Session providers.

```go
type Config struct {
    // SessionID specifies a custom session ID (auto-generated if empty)
    SessionID string `mapstructure:"session_id" yaml:"session_id"`

    // Timeout specifies the session timeout duration
    Timeout time.Duration `mapstructure:"timeout" yaml:"timeout" default:"30m" validate:"min=1m,max=24h"`

    // AutoStart specifies whether to automatically start the session
    AutoStart bool `mapstructure:"auto_start" yaml:"auto_start" default:"false"`

    // EnableKeepAlive enables keep-alive mechanism
    EnableKeepAlive bool `mapstructure:"enable_keep_alive" yaml:"enable_keep_alive" default:"true"`

    // KeepAliveInterval specifies the keep-alive interval
    KeepAliveInterval time.Duration `mapstructure:"keep_alive_interval" yaml:"keep_alive_interval" default:"30s" validate:"min=5s,max=5m"`

    // MaxRetries specifies the maximum number of retry attempts
    MaxRetries int `mapstructure:"max_retries" yaml:"max_retries" default:"3" validate:"min=0,max=10"`

    // RetryDelay specifies the delay between retry attempts
    RetryDelay time.Duration `mapstructure:"retry_delay" yaml:"retry_delay" default:"1s" validate:"min=100ms,max=10s"`

    // Observability settings
    EnableTracing           bool `mapstructure:"enable_tracing" yaml:"enable_tracing" default:"true"`
    EnableMetrics           bool `mapstructure:"enable_metrics" yaml:"enable_metrics" default:"true"`
    EnableStructuredLogging bool `mapstructure:"enable_structured_logging" yaml:"enable_structured_logging" default:"true"`
}
```

<a name="DefaultConfig"></a>
### func [DefaultConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L91>)

```go
func DefaultConfig() *Config
```

DefaultConfig returns a default configuration

<a name="Config.Validate"></a>
### func \(\*Config\) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L85>)

```go
func (c *Config) Validate() error
```

Validate validates the configuration

<a name="ConfigOption"></a>
## type [ConfigOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L40>)

ConfigOption is a functional option for configuring Session instances

```go
type ConfigOption func(*Config)
```

<a name="WithAutoStart"></a>
### func [WithAutoStart](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L57>)

```go
func WithAutoStart(autoStart bool) ConfigOption
```

WithAutoStart sets auto\-start enablement

<a name="WithEnableKeepAlive"></a>
### func [WithEnableKeepAlive](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L64>)

```go
func WithEnableKeepAlive(enable bool) ConfigOption
```

WithEnableKeepAlive sets keep\-alive enablement

<a name="WithKeepAliveInterval"></a>
### func [WithKeepAliveInterval](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L71>)

```go
func WithKeepAliveInterval(interval time.Duration) ConfigOption
```

WithKeepAliveInterval sets the keep\-alive interval

<a name="WithMaxRetries"></a>
### func [WithMaxRetries](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L78>)

```go
func WithMaxRetries(maxRetries int) ConfigOption
```

WithMaxRetries sets the maximum number of retries

<a name="WithSessionID"></a>
### func [WithSessionID](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L43>)

```go
func WithSessionID(id string) ConfigOption
```

WithSessionID sets the session ID

<a name="WithTimeout"></a>
### func [WithTimeout](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/config.go#L50>)

```go
func WithTimeout(timeout time.Duration) ConfigOption
```

WithTimeout sets the session timeout

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L46-L53>)

Metrics contains all the metrics for Session operations

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="GetMetrics"></a>
### func [GetMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/session.go#L31>)

```go
func GetMetrics() *Metrics
```

GetMetrics returns the global metrics instance

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L56>)

```go
func NewMetrics(meter metric.Meter) *Metrics
```

NewMetrics creates a new Metrics instance

<a name="Metrics.DecrementActiveSessions"></a>
### func \(\*Metrics\) [DecrementActiveSessions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L105>)

```go
func (m *Metrics) DecrementActiveSessions(ctx context.Context)
```

DecrementActiveSessions decrements the active sessions counter

<a name="Metrics.IncrementActiveSessions"></a>
### func \(\*Metrics\) [IncrementActiveSessions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L100>)

```go
func (m *Metrics) IncrementActiveSessions(ctx context.Context)
```

IncrementActiveSessions increments the active sessions counter

<a name="Metrics.RecordSessionError"></a>
### func \(\*Metrics\) [RecordSessionError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L90>)

```go
func (m *Metrics) RecordSessionError(ctx context.Context, sessionID, errorCode string, duration time.Duration)
```

RecordSessionError records an error

<a name="Metrics.RecordSessionStart"></a>
### func \(\*Metrics\) [RecordSessionStart](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L70>)

```go
func (m *Metrics) RecordSessionStart(ctx context.Context, sessionID string, duration time.Duration)
```

RecordSessionStart records a session start operation

<a name="Metrics.RecordSessionStop"></a>
### func \(\*Metrics\) [RecordSessionStop](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L80>)

```go
func (m *Metrics) RecordSessionStop(ctx context.Context, sessionID string, duration time.Duration)
```

RecordSessionStop records a session stop operation

<a name="MetricsRecorder"></a>
## type [MetricsRecorder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L11-L17>)

MetricsRecorder defines the interface for recording metrics

```go
type MetricsRecorder interface {
    RecordSessionStart(ctx context.Context, sessionID string, duration time.Duration)
    RecordSessionStop(ctx context.Context, sessionID string, duration time.Duration)
    RecordSessionError(ctx context.Context, sessionID, errorCode string, duration time.Duration)
    IncrementActiveSessions(ctx context.Context)
    DecrementActiveSessions(ctx context.Context)
}
```

<a name="MockOption"></a>
## type [MockOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L55>)

MockOption configures the behavior of AdvancedMockSession

```go
type MockOption func(*AdvancedMockSession)
```

<a name="WithActive"></a>
### func [WithActive](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L65>)

```go
func WithActive(active bool) MockOption
```

WithActive sets the active state

<a name="WithError"></a>
### func [WithError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L79>)

```go
func WithError(err error) MockOption
```

WithError configures the mock to return an error

<a name="WithMockSessionID"></a>
### func [WithMockSessionID](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L58>)

```go
func WithMockSessionID(id string) MockOption
```

WithMockSessionID sets the session ID for the mock

<a name="WithNetworkDelay"></a>
### func [WithNetworkDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L94>)

```go
func WithNetworkDelay(enabled bool) MockOption
```

WithNetworkDelay enables network delay simulation

<a name="WithProcessingDelay"></a>
### func [WithProcessingDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L87>)

```go
func WithProcessingDelay(delay time.Duration) MockOption
```

WithProcessingDelay sets the delay for processing

<a name="WithStarted"></a>
### func [WithStarted](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/test_utils.go#L72>)

```go
func WithStarted(started bool) MockOption
```

WithStarted sets the started state

<a name="NoOpMetrics"></a>
## type [NoOpMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L20>)

NoOpMetrics provides a no\-operation implementation for when metrics are disabled

```go
type NoOpMetrics struct{}
```

<a name="NewNoOpMetrics"></a>
### func [NewNoOpMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L23>)

```go
func NewNoOpMetrics() *NoOpMetrics
```

NewNoOpMetrics creates a new no\-operation metrics recorder

<a name="NoOpMetrics.DecrementActiveSessions"></a>
### func \(\*NoOpMetrics\) [DecrementActiveSessions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L43>)

```go
func (n *NoOpMetrics) DecrementActiveSessions(ctx context.Context)
```

DecrementActiveSessions is a no\-op implementation

<a name="NoOpMetrics.IncrementActiveSessions"></a>
### func \(\*NoOpMetrics\) [IncrementActiveSessions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L40>)

```go
func (n *NoOpMetrics) IncrementActiveSessions(ctx context.Context)
```

IncrementActiveSessions is a no\-op implementation

<a name="NoOpMetrics.RecordSessionError"></a>
### func \(\*NoOpMetrics\) [RecordSessionError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L36>)

```go
func (n *NoOpMetrics) RecordSessionError(ctx context.Context, sessionID, errorCode string, duration time.Duration)
```

RecordSessionError is a no\-op implementation

<a name="NoOpMetrics.RecordSessionStart"></a>
### func \(\*NoOpMetrics\) [RecordSessionStart](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L28>)

```go
func (n *NoOpMetrics) RecordSessionStart(ctx context.Context, sessionID string, duration time.Duration)
```

RecordSessionStart is a no\-op implementation

<a name="NoOpMetrics.RecordSessionStop"></a>
### func \(\*NoOpMetrics\) [RecordSessionStop](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/metrics.go#L32>)

```go
func (n *NoOpMetrics) RecordSessionStop(ctx context.Context, sessionID string, duration time.Duration)
```

RecordSessionStop is a no\-op implementation

<a name="SayHandle"></a>
## type [SayHandle](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L12>)



```go
type SayHandle = iface.SayHandle
```

<a name="SayOptions"></a>
## type [SayOptions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L11>)



```go
type SayOptions = iface.SayOptions
```

<a name="SessionError"></a>
## type [SessionError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L29-L35>)

SessionError represents an error that occurred during Session operations. It includes an operation name, underlying error, and error code for programmatic handling.

```go
type SessionError struct {
    Op      string                 // Operation that failed (e.g., "Start", "Stop")
    Err     error                  // Underlying error
    Code    string                 // Error code for programmatic handling
    Message string                 // Human-readable error message
    Details map[string]interface{} // Additional error details
}
```

<a name="NewSessionError"></a>
### func [NewSessionError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L54>)

```go
func NewSessionError(op, code string, err error) *SessionError
```

NewSessionError creates a new SessionError

<a name="NewSessionErrorWithDetails"></a>
### func [NewSessionErrorWithDetails](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L73>)

```go
func NewSessionErrorWithDetails(op, code, message string, err error, details map[string]interface{}) *SessionError
```

NewSessionErrorWithDetails creates a new SessionError with additional details

<a name="NewSessionErrorWithMessage"></a>
### func [NewSessionErrorWithMessage](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L63>)

```go
func NewSessionErrorWithMessage(op, code, message string, err error) *SessionError
```

NewSessionErrorWithMessage creates a new SessionError with a custom message

<a name="SessionError.Error"></a>
### func \(\*SessionError\) [Error](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L38>)

```go
func (e *SessionError) Error() string
```

Error implements the error interface

<a name="SessionError.Unwrap"></a>
### func \(\*SessionError\) [Unwrap](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/errors.go#L49>)

```go
func (e *SessionError) Unwrap() error
```

Unwrap returns the underlying error

<a name="SessionState"></a>
## type [SessionState](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L10>)

Re\-export types from iface for convenience

```go
type SessionState = iface.SessionState
```

<a name="VoiceOption"></a>
## type [VoiceOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L55>)

VoiceOption is a functional option for configuring VoiceSession

```go
type VoiceOption func(*VoiceOptions)
```

<a name="WithAgentCallback"></a>
### func [WithAgentCallback](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L100>)

```go
func WithAgentCallback(callback func(ctx context.Context, transcript string) (string, error)) VoiceOption
```

WithAgentCallback sets the agent callback

<a name="WithConfig"></a>
### func [WithConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L114>)

```go
func WithConfig(config *Config) VoiceOption
```

WithConfig sets the session configuration

<a name="WithNoiseCancellation"></a>
### func [WithNoiseCancellation](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L93>)

```go
func WithNoiseCancellation(noiseCancellation iface.NoiseCancellation) VoiceOption
```

WithNoiseCancellation sets the noise cancellation provider

<a name="WithOnStateChanged"></a>
### func [WithOnStateChanged](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L107>)

```go
func WithOnStateChanged(callback func(state SessionState)) VoiceOption
```

WithOnStateChanged sets the state change callback

<a name="WithSTTProvider"></a>
### func [WithSTTProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L58>)

```go
func WithSTTProvider(provider iface.STTProvider) VoiceOption
```

WithSTTProvider sets the STT provider

<a name="WithTTSProvider"></a>
### func [WithTTSProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L65>)

```go
func WithTTSProvider(provider iface.TTSProvider) VoiceOption
```

WithTTSProvider sets the TTS provider

<a name="WithTransport"></a>
### func [WithTransport](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L86>)

```go
func WithTransport(transport iface.Transport) VoiceOption
```

WithTransport sets the transport provider

<a name="WithTurnDetector"></a>
### func [WithTurnDetector](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L79>)

```go
func WithTurnDetector(detector iface.TurnDetector) VoiceOption
```

WithTurnDetector sets the turn detector

<a name="WithVADProvider"></a>
### func [WithVADProvider](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L72>)

```go
func WithVADProvider(provider iface.VADProvider) VoiceOption
```

WithVADProvider sets the VAD provider

<a name="VoiceOptions"></a>
## type [VoiceOptions](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/voice/session/types.go#L25-L52>)

VoiceOptions represents options for configuring a VoiceSession

```go
type VoiceOptions struct {
    // STTProvider specifies the STT provider to use
    STTProvider iface.STTProvider

    // TTSProvider specifies the TTS provider to use
    TTSProvider iface.TTSProvider

    // VADProvider specifies the VAD provider to use
    VADProvider iface.VADProvider

    // TurnDetector specifies the turn detection provider to use
    TurnDetector iface.TurnDetector

    // Transport specifies the transport provider to use
    Transport iface.Transport

    // NoiseCancellation specifies the noise cancellation provider to use
    NoiseCancellation iface.NoiseCancellation

    // AgentCallback is called when user input is detected
    AgentCallback func(ctx context.Context, transcript string) (string, error)

    // OnStateChanged callback for state changes
    OnStateChanged func(state SessionState)

    // Config for session configuration
    Config *Config
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

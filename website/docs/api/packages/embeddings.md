---
title: embeddings
sidebar_position: 1
---

<!-- Code generated by gomarkdoc. DO NOT EDIT -->


# embeddings

```go
import "github.com/lookatitude/beluga-ai/pkg/embeddings"
```

Package embeddings provides interfaces and implementations for text embedding generation. This package follows the Beluga AI Framework design patterns with clean separation of interfaces, implementations, and configuration management.

Key features: \- Focused Embedder interface following Interface Segregation Principle \(ISP\) \- Functional options pattern for flexible configuration \- Comprehensive error handling with custom error types \- OpenTelemetry tracing and metrics integration \- Multiple providers: OpenAI, Ollama, and mock for testing \- Extensive test coverage with table\-driven tests and benchmarks

Package embeddings provides a standardized factory pattern for embedder creation. This follows the Beluga AI Framework design patterns with consistent factory interfaces.

Package embeddings provides advanced test utilities and comprehensive mocks for testing embedding implementations. This file contains utilities designed to support both unit tests and integration tests.

## Index

- [func AssertEmbedding\(t \*testing.T, embedding \[\]float32, expectedDim int\)](<#AssertEmbedding>)
- [func AssertEmbeddings\(t \*testing.T, embeddings \[\]\[\]float32, expectedCount, expectedDim int\)](<#AssertEmbeddings>)
- [func AssertErrorType\(t \*testing.T, err error, expectedCode string\)](<#AssertErrorType>)
- [func AssertHealthCheck\(t \*testing.T, health map\[string\]interface\{\}, expectedStatus string\)](<#AssertHealthCheck>)
- [func AssertSimilarityScore\(t \*testing.T, emb1, emb2 \[\]float32, minSimilarity float32\)](<#AssertSimilarityScore>)
- [func CosineSimilarity\(a, b \[\]float32\) float32](<#CosineSimilarity>)
- [func CreateTestEmbeddings\(count, dimension int\) \[\]\[\]float32](<#CreateTestEmbeddings>)
- [func CreateTestTexts\(count int\) \[\]string](<#CreateTestTexts>)
- [func EuclideanDistance\(a, b \[\]float32\) float32](<#EuclideanDistance>)
- [func ListAvailableProviders\(\) \[\]string](<#ListAvailableProviders>)
- [func NewEmbedder\(ctx context.Context, name string, config Config\) \(iface.Embedder, error\)](<#NewEmbedder>)
- [func RegisterGlobal\(name string, creator func\(ctx context.Context, config Config\) \(iface.Embedder, error\)\)](<#RegisterGlobal>)
- [func RunLoadTest\(t \*testing.T, embedder \*AdvancedMockEmbedder, numOperations int, concurrency int\)](<#RunLoadTest>)
- [type AdvancedMockEmbedder](<#AdvancedMockEmbedder>)
  - [func NewAdvancedMockEmbedder\(providerName, modelName string, dimension int, options ...MockEmbedderOption\) \*AdvancedMockEmbedder](<#NewAdvancedMockEmbedder>)
  - [func \(e \*AdvancedMockEmbedder\) CheckHealth\(\) map\[string\]interface\{\}](<#AdvancedMockEmbedder.CheckHealth>)
  - [func \(e \*AdvancedMockEmbedder\) EmbedDocuments\(ctx context.Context, texts \[\]string\) \(\[\]\[\]float32, error\)](<#AdvancedMockEmbedder.EmbedDocuments>)
  - [func \(e \*AdvancedMockEmbedder\) EmbedQuery\(ctx context.Context, text string\) \(\[\]float32, error\)](<#AdvancedMockEmbedder.EmbedQuery>)
  - [func \(e \*AdvancedMockEmbedder\) GetCallCount\(\) int](<#AdvancedMockEmbedder.GetCallCount>)
  - [func \(e \*AdvancedMockEmbedder\) GetDimension\(ctx context.Context\) \(int, error\)](<#AdvancedMockEmbedder.GetDimension>)
  - [func \(e \*AdvancedMockEmbedder\) GetModelName\(\) string](<#AdvancedMockEmbedder.GetModelName>)
  - [func \(e \*AdvancedMockEmbedder\) GetProviderName\(\) string](<#AdvancedMockEmbedder.GetProviderName>)
  - [func \(e \*AdvancedMockEmbedder\) ResetRateLimit\(\)](<#AdvancedMockEmbedder.ResetRateLimit>)
- [type ConcurrentTestRunner](<#ConcurrentTestRunner>)
  - [func NewConcurrentTestRunner\(numGoroutines int, duration time.Duration, testFunc func\(\) error\) \*ConcurrentTestRunner](<#NewConcurrentTestRunner>)
  - [func \(r \*ConcurrentTestRunner\) Run\(\) error](<#ConcurrentTestRunner.Run>)
- [type Config](<#Config>)
  - [func CreateTestConfig\(provider string\) Config](<#CreateTestConfig>)
  - [func \(c \*Config\) SetDefaults\(\)](<#Config.SetDefaults>)
  - [func \(c \*Config\) Validate\(\) error](<#Config.Validate>)
- [type EmbedderFactory](<#EmbedderFactory>)
  - [func NewEmbedderFactory\(config \*Config, opts ...Option\) \(\*EmbedderFactory, error\)](<#NewEmbedderFactory>)
  - [func \(f \*EmbedderFactory\) CheckHealth\(ctx context.Context, providerType string\) error](<#EmbedderFactory.CheckHealth>)
  - [func \(f \*EmbedderFactory\) GetAvailableProviders\(\) \[\]string](<#EmbedderFactory.GetAvailableProviders>)
  - [func \(f \*EmbedderFactory\) NewEmbedder\(providerType string\) \(iface.Embedder, error\)](<#EmbedderFactory.NewEmbedder>)
- [type EmbeddingBenchmark](<#EmbeddingBenchmark>)
  - [func NewEmbeddingBenchmark\(embedder iface.Embedder, textCount int\) \*EmbeddingBenchmark](<#NewEmbeddingBenchmark>)
  - [func \(b \*EmbeddingBenchmark\) BenchmarkBatchEmbedding\(batchSize, iterations int\) \(time.Duration, error\)](<#EmbeddingBenchmark.BenchmarkBatchEmbedding>)
  - [func \(b \*EmbeddingBenchmark\) BenchmarkSingleEmbedding\(iterations int\) \(time.Duration, error\)](<#EmbeddingBenchmark.BenchmarkSingleEmbedding>)
- [type EmbeddingQualityTester](<#EmbeddingQualityTester>)
  - [func NewEmbeddingQualityTester\(embedder iface.Embedder\) \*EmbeddingQualityTester](<#NewEmbeddingQualityTester>)
  - [func \(q \*EmbeddingQualityTester\) TestSemanticSimilarity\(ctx context.Context, similarTexts \[\]string\) \(float32, error\)](<#EmbeddingQualityTester.TestSemanticSimilarity>)
  - [func \(q \*EmbeddingQualityTester\) TestSimilarityConsistency\(ctx context.Context, text string, iterations int\) \(float32, error\)](<#EmbeddingQualityTester.TestSimilarityConsistency>)
- [type Factory](<#Factory>)
- [type HealthChecker](<#HealthChecker>)
- [type IntegrationTestHelper](<#IntegrationTestHelper>)
  - [func NewIntegrationTestHelper\(\) \*IntegrationTestHelper](<#NewIntegrationTestHelper>)
  - [func \(h \*IntegrationTestHelper\) AddEmbedder\(name string, embedder \*AdvancedMockEmbedder\)](<#IntegrationTestHelper.AddEmbedder>)
  - [func \(h \*IntegrationTestHelper\) GetEmbedder\(name string\) \*AdvancedMockEmbedder](<#IntegrationTestHelper.GetEmbedder>)
  - [func \(h \*IntegrationTestHelper\) GetRegistry\(\) \*ProviderRegistry](<#IntegrationTestHelper.GetRegistry>)
  - [func \(h \*IntegrationTestHelper\) Reset\(\)](<#IntegrationTestHelper.Reset>)
- [type Metrics](<#Metrics>)
  - [func NewMetrics\(meter metric.Meter\) \*Metrics](<#NewMetrics>)
  - [func \(m \*Metrics\) EndRequest\(ctx context.Context, provider, model string\)](<#Metrics.EndRequest>)
  - [func \(m \*Metrics\) RecordError\(ctx context.Context, provider, model, errorType string\)](<#Metrics.RecordError>)
  - [func \(m \*Metrics\) RecordRequest\(ctx context.Context, provider, model string, duration time.Duration, inputCount, outputDimension int\)](<#Metrics.RecordRequest>)
  - [func \(m \*Metrics\) RecordTokensProcessed\(ctx context.Context, provider, model string, tokenCount int\)](<#Metrics.RecordTokensProcessed>)
  - [func \(m \*Metrics\) StartRequest\(ctx context.Context, provider, model string\)](<#Metrics.StartRequest>)
- [type MockConfig](<#MockConfig>)
  - [func \(c \*MockConfig\) Validate\(\) error](<#MockConfig.Validate>)
- [type MockEmbedderOption](<#MockEmbedderOption>)
  - [func WithMockDelay\(delay time.Duration\) MockEmbedderOption](<#WithMockDelay>)
  - [func WithMockEmbeddings\(embeddings \[\]\[\]float32\) MockEmbedderOption](<#WithMockEmbeddings>)
  - [func WithMockError\(shouldError bool, err error\) MockEmbedderOption](<#WithMockError>)
  - [func WithMockRateLimit\(enabled bool\) MockEmbedderOption](<#WithMockRateLimit>)
- [type OllamaConfig](<#OllamaConfig>)
  - [func \(c \*OllamaConfig\) Validate\(\) error](<#OllamaConfig.Validate>)
- [type OpenAIConfig](<#OpenAIConfig>)
  - [func \(c \*OpenAIConfig\) Validate\(\) error](<#OpenAIConfig.Validate>)
- [type Option](<#Option>)
  - [func WithMaxRetries\(maxRetries int\) Option](<#WithMaxRetries>)
  - [func WithModel\(model string\) Option](<#WithModel>)
  - [func WithTimeout\(timeout time.Duration\) Option](<#WithTimeout>)
- [type ProviderRegistry](<#ProviderRegistry>)
  - [func GetGlobalRegistry\(\) \*ProviderRegistry](<#GetGlobalRegistry>)
  - [func NewProviderRegistry\(\) \*ProviderRegistry](<#NewProviderRegistry>)
  - [func \(f \*ProviderRegistry\) Create\(ctx context.Context, name string, config Config\) \(iface.Embedder, error\)](<#ProviderRegistry.Create>)
  - [func \(f \*ProviderRegistry\) ListProviders\(\) \[\]string](<#ProviderRegistry.ListProviders>)
  - [func \(f \*ProviderRegistry\) Register\(name string, creator func\(ctx context.Context, config Config\) \(iface.Embedder, error\)\)](<#ProviderRegistry.Register>)

<a name="AssertEmbedding"></a>
## func [AssertEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L298>)

```go
func AssertEmbedding(t *testing.T, embedding []float32, expectedDim int)
```

AssertEmbedding validates an embedding result

<a name="AssertEmbeddings"></a>
## func [AssertEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L310>)

```go
func AssertEmbeddings(t *testing.T, embeddings [][]float32, expectedCount, expectedDim int)
```

AssertEmbeddings validates multiple embedding results

<a name="AssertErrorType"></a>
## func [AssertErrorType](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L345>)

```go
func AssertErrorType(t *testing.T, err error, expectedCode string)
```

AssertErrorType validates error types and codes

<a name="AssertHealthCheck"></a>
## func [AssertHealthCheck](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L336>)

```go
func AssertHealthCheck(t *testing.T, health map[string]interface{}, expectedStatus string)
```

AssertHealthCheck validates health check results

<a name="AssertSimilarityScore"></a>
## func [AssertSimilarityScore](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L329>)

```go
func AssertSimilarityScore(t *testing.T, emb1, emb2 []float32, minSimilarity float32)
```

AssertSimilarityScore validates similarity between embeddings

<a name="CosineSimilarity"></a>
## func [CosineSimilarity](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L356>)

```go
func CosineSimilarity(a, b []float32) float32
```

CosineSimilarity calculates cosine similarity between two embeddings

<a name="CreateTestEmbeddings"></a>
## func [CreateTestEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L244>)

```go
func CreateTestEmbeddings(count, dimension int) [][]float32
```

CreateTestEmbeddings creates a set of test embeddings

<a name="CreateTestTexts"></a>
## func [CreateTestTexts](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L235>)

```go
func CreateTestTexts(count int) []string
```

CreateTestTexts creates a set of test texts for embedding

<a name="EuclideanDistance"></a>
## func [EuclideanDistance](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L377>)

```go
func EuclideanDistance(a, b []float32) float32
```

EuclideanDistance calculates Euclidean distance between two embeddings

<a name="ListAvailableProviders"></a>
## func [ListAvailableProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L84>)

```go
func ListAvailableProviders() []string
```

ListAvailableProviders returns all available providers from the global factory.

<a name="NewEmbedder"></a>
## func [NewEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L79>)

```go
func NewEmbedder(ctx context.Context, name string, config Config) (iface.Embedder, error)
```

NewEmbedder creates an embedder using the global factory.

<a name="RegisterGlobal"></a>
## func [RegisterGlobal](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L74>)

```go
func RegisterGlobal(name string, creator func(ctx context.Context, config Config) (iface.Embedder, error))
```

RegisterGlobal registers a provider with the global factory.

<a name="RunLoadTest"></a>
## func [RunLoadTest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L476>)

```go
func RunLoadTest(t *testing.T, embedder *AdvancedMockEmbedder, numOperations int, concurrency int)
```

RunLoadTest executes a load test scenario on embedder

<a name="AdvancedMockEmbedder"></a>
## type [AdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L19-L41>)

AdvancedMockEmbedder provides a comprehensive mock implementation for testing

```go
type AdvancedMockEmbedder struct {
    mock.Mock
    // contains filtered or unexported fields
}
```

<a name="NewAdvancedMockEmbedder"></a>
### func [NewAdvancedMockEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L44>)

```go
func NewAdvancedMockEmbedder(providerName, modelName string, dimension int, options ...MockEmbedderOption) *AdvancedMockEmbedder
```

NewAdvancedMockEmbedder creates a new advanced mock with configurable behavior

<a name="AdvancedMockEmbedder.CheckHealth"></a>
### func \(\*AdvancedMockEmbedder\) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L219>)

```go
func (e *AdvancedMockEmbedder) CheckHealth() map[string]interface{}
```

<a name="AdvancedMockEmbedder.EmbedDocuments"></a>
### func \(\*AdvancedMockEmbedder\) [EmbedDocuments](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L114>)

```go
func (e *AdvancedMockEmbedder) EmbedDocuments(ctx context.Context, texts []string) ([][]float32, error)
```

Mock implementation methods

<a name="AdvancedMockEmbedder.EmbedQuery"></a>
### func \(\*AdvancedMockEmbedder\) [EmbedQuery](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L153>)

```go
func (e *AdvancedMockEmbedder) EmbedQuery(ctx context.Context, text string) ([]float32, error)
```

<a name="AdvancedMockEmbedder.GetCallCount"></a>
### func \(\*AdvancedMockEmbedder\) [GetCallCount](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L199>)

```go
func (e *AdvancedMockEmbedder) GetCallCount() int
```

<a name="AdvancedMockEmbedder.GetDimension"></a>
### func \(\*AdvancedMockEmbedder\) [GetDimension](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L187>)

```go
func (e *AdvancedMockEmbedder) GetDimension(ctx context.Context) (int, error)
```

<a name="AdvancedMockEmbedder.GetModelName"></a>
### func \(\*AdvancedMockEmbedder\) [GetModelName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L205>)

```go
func (e *AdvancedMockEmbedder) GetModelName() string
```

<a name="AdvancedMockEmbedder.GetProviderName"></a>
### func \(\*AdvancedMockEmbedder\) [GetProviderName](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L209>)

```go
func (e *AdvancedMockEmbedder) GetProviderName() string
```

<a name="AdvancedMockEmbedder.ResetRateLimit"></a>
### func \(\*AdvancedMockEmbedder\) [ResetRateLimit](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L213>)

```go
func (e *AdvancedMockEmbedder) ResetRateLimit()
```

<a name="ConcurrentTestRunner"></a>
## type [ConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L417-L421>)

ConcurrentTestRunner runs embedding tests concurrently for performance testing

```go
type ConcurrentTestRunner struct {
    NumGoroutines int
    TestDuration  time.Duration
    // contains filtered or unexported fields
}
```

<a name="NewConcurrentTestRunner"></a>
### func [NewConcurrentTestRunner](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L423>)

```go
func NewConcurrentTestRunner(numGoroutines int, duration time.Duration, testFunc func() error) *ConcurrentTestRunner
```

<a name="ConcurrentTestRunner.Run"></a>
### func \(\*ConcurrentTestRunner\) [Run](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L431>)

```go
func (r *ConcurrentTestRunner) Run() error
```

<a name="Config"></a>
## type [Config](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L51-L56>)

Config holds configuration for the embeddings package

```go
type Config struct {
    // Provider-specific configurations
    OpenAI *OpenAIConfig `mapstructure:"openai" yaml:"openai"`
    Ollama *OllamaConfig `mapstructure:"ollama" yaml:"ollama"`
    Mock   *MockConfig   `mapstructure:"mock" yaml:"mock"`
}
```

<a name="CreateTestConfig"></a>
### func [CreateTestConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L260>)

```go
func CreateTestConfig(provider string) Config
```

CreateTestConfig creates a test embedding configuration

<a name="Config.SetDefaults"></a>
### func \(\*Config\) [SetDefaults](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L115>)

```go
func (c *Config) SetDefaults()
```

SetDefaults sets default values for the configuration

<a name="Config.Validate"></a>
### func \(\*Config\) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L88>)

```go
func (c *Config) Validate() error
```

Validate validates the configuration

<a name="EmbedderFactory"></a>
## type [EmbedderFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L27-L32>)

EmbedderFactory provides factory methods for creating embedder instances

```go
type EmbedderFactory struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbedderFactory"></a>
### func [NewEmbedderFactory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L35>)

```go
func NewEmbedderFactory(config *Config, opts ...Option) (*EmbedderFactory, error)
```

NewEmbedderFactory creates a new embedder factory with the given configuration

<a name="EmbedderFactory.CheckHealth"></a>
### func \(\*EmbedderFactory\) [CheckHealth](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L175>)

```go
func (f *EmbedderFactory) CheckHealth(ctx context.Context, providerType string) error
```

CheckHealth performs a health check on the embedder

<a name="EmbedderFactory.GetAvailableProviders"></a>
### func \(\*EmbedderFactory\) [GetAvailableProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L151>)

```go
func (f *EmbedderFactory) GetAvailableProviders() []string
```

GetAvailableProviders returns a list of available provider types

<a name="EmbedderFactory.NewEmbedder"></a>
### func \(\*EmbedderFactory\) [NewEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L72>)

```go
func (f *EmbedderFactory) NewEmbedder(providerType string) (iface.Embedder, error)
```

NewEmbedder creates an embedder instance based on the provider type

<a name="EmbeddingBenchmark"></a>
## type [EmbeddingBenchmark](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L557-L560>)

EmbeddingBenchmark provides benchmarking utilities

```go
type EmbeddingBenchmark struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbeddingBenchmark"></a>
### func [NewEmbeddingBenchmark](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L562>)

```go
func NewEmbeddingBenchmark(embedder iface.Embedder, textCount int) *EmbeddingBenchmark
```

<a name="EmbeddingBenchmark.BenchmarkBatchEmbedding"></a>
### func \(\*EmbeddingBenchmark\) [BenchmarkBatchEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L583>)

```go
func (b *EmbeddingBenchmark) BenchmarkBatchEmbedding(batchSize, iterations int) (time.Duration, error)
```

<a name="EmbeddingBenchmark.BenchmarkSingleEmbedding"></a>
### func \(\*EmbeddingBenchmark\) [BenchmarkSingleEmbedding](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L569>)

```go
func (b *EmbeddingBenchmark) BenchmarkSingleEmbedding(iterations int) (time.Duration, error)
```

<a name="EmbeddingQualityTester"></a>
## type [EmbeddingQualityTester](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L599-L601>)

EmbeddingQualityTester provides utilities for testing embedding quality

```go
type EmbeddingQualityTester struct {
    // contains filtered or unexported fields
}
```

<a name="NewEmbeddingQualityTester"></a>
### func [NewEmbeddingQualityTester](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L603>)

```go
func NewEmbeddingQualityTester(embedder iface.Embedder) *EmbeddingQualityTester
```

<a name="EmbeddingQualityTester.TestSemanticSimilarity"></a>
### func \(\*EmbeddingQualityTester\) [TestSemanticSimilarity](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L638>)

```go
func (q *EmbeddingQualityTester) TestSemanticSimilarity(ctx context.Context, similarTexts []string) (float32, error)
```

<a name="EmbeddingQualityTester.TestSimilarityConsistency"></a>
### func \(\*EmbeddingQualityTester\) [TestSimilarityConsistency](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L607>)

```go
func (q *EmbeddingQualityTester) TestSimilarityConsistency(ctx context.Context, text string, iterations int) (float32, error)
```

<a name="Factory"></a>
## type [Factory](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L15-L19>)

Factory defines the interface for creating Embedder instances. This enables dependency injection and makes testing easier.

```go
type Factory interface {
    // CreateEmbedder creates a new Embedder instance with the given configuration.
    // The config parameter contains provider-specific settings.
    CreateEmbedder(ctx context.Context, config Config) (iface.Embedder, error)
}
```

<a name="HealthChecker"></a>
## type [HealthChecker](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/embeddings.go#L170-L172>)

HealthChecker interface for embedder health checks

```go
type HealthChecker interface {
    Check(ctx context.Context) error
}
```

<a name="IntegrationTestHelper"></a>
## type [IntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L524-L527>)

IntegrationTestHelper provides utilities for integration testing

```go
type IntegrationTestHelper struct {
    // contains filtered or unexported fields
}
```

<a name="NewIntegrationTestHelper"></a>
### func [NewIntegrationTestHelper](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L529>)

```go
func NewIntegrationTestHelper() *IntegrationTestHelper
```

<a name="IntegrationTestHelper.AddEmbedder"></a>
### func \(\*IntegrationTestHelper\) [AddEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L536>)

```go
func (h *IntegrationTestHelper) AddEmbedder(name string, embedder *AdvancedMockEmbedder)
```

<a name="IntegrationTestHelper.GetEmbedder"></a>
### func \(\*IntegrationTestHelper\) [GetEmbedder](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L540>)

```go
func (h *IntegrationTestHelper) GetEmbedder(name string) *AdvancedMockEmbedder
```

<a name="IntegrationTestHelper.GetRegistry"></a>
### func \(\*IntegrationTestHelper\) [GetRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L544>)

```go
func (h *IntegrationTestHelper) GetRegistry() *ProviderRegistry
```

<a name="IntegrationTestHelper.Reset"></a>
### func \(\*IntegrationTestHelper\) [Reset](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L548>)

```go
func (h *IntegrationTestHelper) Reset()
```

<a name="Metrics"></a>
## type [Metrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L12-L18>)

Metrics holds the metrics for the embeddings package

```go
type Metrics struct {
    // contains filtered or unexported fields
}
```

<a name="NewMetrics"></a>
### func [NewMetrics](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L21>)

```go
func NewMetrics(meter metric.Meter) *Metrics
```

NewMetrics creates a new metrics instance

<a name="Metrics.EndRequest"></a>
### func \(\*Metrics\) [EndRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L97>)

```go
func (m *Metrics) EndRequest(ctx context.Context, provider, model string)
```

EndRequest decrements the in\-flight counter

<a name="Metrics.RecordError"></a>
### func \(\*Metrics\) [RecordError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L69>)

```go
func (m *Metrics) RecordError(ctx context.Context, provider, model, errorType string)
```

RecordError records an embedding error

<a name="Metrics.RecordRequest"></a>
### func \(\*Metrics\) [RecordRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L53>)

```go
func (m *Metrics) RecordRequest(ctx context.Context, provider, model string, duration time.Duration, inputCount, outputDimension int)
```

RecordRequest records a successful embedding request

<a name="Metrics.RecordTokensProcessed"></a>
### func \(\*Metrics\) [RecordTokensProcessed](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L79>)

```go
func (m *Metrics) RecordTokensProcessed(ctx context.Context, provider, model string, tokenCount int)
```

RecordTokensProcessed records the number of tokens processed

<a name="Metrics.StartRequest"></a>
### func \(\*Metrics\) [StartRequest](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/metrics.go#L88>)

```go
func (m *Metrics) StartRequest(ctx context.Context, provider, model string)
```

StartRequest increments the in\-flight counter

<a name="MockConfig"></a>
## type [MockConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L80-L85>)

MockConfig holds configuration for mock embedding provider

```go
type MockConfig struct {
    Dimension    int   `mapstructure:"dimension" yaml:"dimension" env:"MOCK_EMBEDDING_DIMENSION" default:"128"`
    Seed         int64 `mapstructure:"seed" yaml:"seed" env:"MOCK_EMBEDDING_SEED" default:"0"`
    RandomizeNil bool  `mapstructure:"randomize_nil" yaml:"randomize_nil" env:"MOCK_EMBEDDING_RANDOMIZE_NIL" default:"false"`
    Enabled      bool  `mapstructure:"enabled" yaml:"enabled" env:"MOCK_EMBEDDING_ENABLED" default:"true"`
}
```

<a name="MockConfig.Validate"></a>
### func \(\*MockConfig\) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L176>)

```go
func (c *MockConfig) Validate() error
```

ValidateMock validates Mock configuration

<a name="MockEmbedderOption"></a>
## type [MockEmbedderOption](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L67>)

MockEmbedderOption defines functional options for mock configuration

```go
type MockEmbedderOption func(*AdvancedMockEmbedder)
```

<a name="WithMockDelay"></a>
### func [WithMockDelay](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L86>)

```go
func WithMockDelay(delay time.Duration) MockEmbedderOption
```

WithMockDelay adds artificial delay to mock operations

<a name="WithMockEmbeddings"></a>
### func [WithMockEmbeddings](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L78>)

```go
func WithMockEmbeddings(embeddings [][]float32) MockEmbedderOption
```

WithMockEmbeddings sets predefined embeddings for the mock

<a name="WithMockError"></a>
### func [WithMockError](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L70>)

```go
func WithMockError(shouldError bool, err error) MockEmbedderOption
```

WithMockError configures the mock to return errors

<a name="WithMockRateLimit"></a>
### func [WithMockRateLimit](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/test_utils.go#L93>)

```go
func WithMockRateLimit(enabled bool) MockEmbedderOption
```

WithMockRateLimit simulates rate limiting behavior

<a name="OllamaConfig"></a>
## type [OllamaConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L70-L77>)

OllamaConfig holds configuration for Ollama embedding provider

```go
type OllamaConfig struct {
    ServerURL  string        `mapstructure:"server_url" yaml:"server_url" env:"OLLAMA_SERVER_URL" default:"http://localhost:11434"`
    Model      string        `mapstructure:"model" yaml:"model" env:"OLLAMA_MODEL" validate:"required"`
    Timeout    time.Duration `mapstructure:"timeout" yaml:"timeout" env:"OLLAMA_TIMEOUT" default:"30s"`
    MaxRetries int           `mapstructure:"max_retries" yaml:"max_retries" env:"OLLAMA_MAX_RETRIES" default:"3"`
    KeepAlive  string        `mapstructure:"keep_alive" yaml:"keep_alive" env:"OLLAMA_KEEP_ALIVE" default:"5m"`
    Enabled    bool          `mapstructure:"enabled" yaml:"enabled" env:"OLLAMA_ENABLED" default:"true"`
}
```

<a name="OllamaConfig.Validate"></a>
### func \(\*OllamaConfig\) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L168>)

```go
func (c *OllamaConfig) Validate() error
```

ValidateOllama validates Ollama configuration

<a name="OpenAIConfig"></a>
## type [OpenAIConfig](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L59-L67>)

OpenAIConfig holds configuration for OpenAI embedding provider

```go
type OpenAIConfig struct {
    APIKey     string        `mapstructure:"api_key" yaml:"api_key" env:"OPENAI_API_KEY" validate:"required"`
    Model      string        `mapstructure:"model" yaml:"model" env:"OPENAI_MODEL" default:"text-embedding-ada-002"`
    BaseURL    string        `mapstructure:"base_url" yaml:"base_url" env:"OPENAI_BASE_URL"`
    APIVersion string        `mapstructure:"api_version" yaml:"api_version" env:"OPENAI_API_VERSION"`
    Timeout    time.Duration `mapstructure:"timeout" yaml:"timeout" env:"OPENAI_TIMEOUT" default:"30s"`
    MaxRetries int           `mapstructure:"max_retries" yaml:"max_retries" env:"OPENAI_MAX_RETRIES" default:"3"`
    Enabled    bool          `mapstructure:"enabled" yaml:"enabled" env:"OPENAI_ENABLED" default:"true"`
}
```

<a name="OpenAIConfig.Validate"></a>
### func \(\*OpenAIConfig\) [Validate](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L157>)

```go
func (c *OpenAIConfig) Validate() error
```

ValidateOpenAI validates OpenAI configuration

<a name="Option"></a>
## type [Option](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L11>)

Option is a functional option for configuring embedders

```go
type Option func(*optionConfig)
```

<a name="WithMaxRetries"></a>
### func [WithMaxRetries](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L28>)

```go
func WithMaxRetries(maxRetries int) Option
```

WithMaxRetries sets the maximum number of retries for failed operations

<a name="WithModel"></a>
### func [WithModel](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L35>)

```go
func WithModel(model string) Option
```

WithModel sets the model to use for embeddings

<a name="WithTimeout"></a>
### func [WithTimeout](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/config.go#L21>)

```go
func WithTimeout(timeout time.Duration) Option
```

WithTimeout sets the timeout for embedding operations

<a name="ProviderRegistry"></a>
## type [ProviderRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L23-L26>)

ProviderRegistry is the global factory for creating embedder instances. It maintains a registry of available providers and their creation functions.

```go
type ProviderRegistry struct {
    // contains filtered or unexported fields
}
```

<a name="GetGlobalRegistry"></a>
### func [GetGlobalRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L89>)

```go
func GetGlobalRegistry() *ProviderRegistry
```

GetGlobalRegistry returns the global registry instance for advanced usage.

<a name="NewProviderRegistry"></a>
### func [NewProviderRegistry](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L29>)

```go
func NewProviderRegistry() *ProviderRegistry
```

NewProviderRegistry creates a new ProviderRegistry instance.

<a name="ProviderRegistry.Create"></a>
### func \(\*ProviderRegistry\) [Create](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L43>)

```go
func (f *ProviderRegistry) Create(ctx context.Context, name string, config Config) (iface.Embedder, error)
```

Create creates a new embedder instance using the registered provider.

<a name="ProviderRegistry.ListProviders"></a>
### func \(\*ProviderRegistry\) [ListProviders](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L59>)

```go
func (f *ProviderRegistry) ListProviders() []string
```

ListProviders returns a list of all registered provider names.

<a name="ProviderRegistry.Register"></a>
### func \(\*ProviderRegistry\) [Register](<https://github.com/lookatitude/beluga-ai/blob/main/pkg/embeddings/factory.go#L36>)

```go
func (f *ProviderRegistry) Register(name string, creator func(ctx context.Context, config Config) (iface.Embedder, error))
```

Register registers a new embedder provider with the factory.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

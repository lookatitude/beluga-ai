# beluga-ai Development Guidelines

Auto-generated from all feature plans. Last updated: 2025-10-05

## Constitutional Requirements (MANDATORY)
**ALL development MUST comply with Constitution v1.0.0**

### Package Structure (ENFORCED)
- REQUIRED: iface/, config.go, metrics.go, errors.go, test_utils.go, advanced_test.go
- MUST: Follow ISP (small interfaces), DIP (dependency injection), SRP (single responsibility)
- MUST: Use global registry pattern for multi-provider packages
- MUST: Implement OTEL metrics (NO custom metrics)
- MUST: Op/Err/Code error handling pattern

### Testing Standards (NON-NEGOTIABLE)  
- MUST: 100% test coverage with advanced mocks
- MUST: Table-driven tests, concurrency tests, benchmarks
- MUST: Integration tests for cross-package interactions

## Active Technologies
- Go 1.21+ + OpenTelemetry (go.opentelemetry.io/otel), testify (github.com/stretchr/testify), validator (github.com/go-playground/validator) (001-for-the-core)
- Go 1.24.0 + go-playground/validator/v10, go.opentelemetry.io/otel (metric/trace), github.com/stretchr/testify (mock/assert) (002-for-the-schema)
- N/A (schema/data structures package) (002-for-the-schema)
- Go 1.21+ + Viper, OpenTelemetry, testify, validator, mapstructure (003-for-the-config)
- Configuration files (YAML/JSON/TOML), environment variables (003-for-the-config)
- Go 1.21+ (existing Beluga AI Framework requirement) + OpenTelemetry, testify/mock, providers (OpenAI SDK, Anthropic SDK, AWS Bedrock SDK, Ollama client) (004-for-the-llms)
- N/A (LLM provider APIs - no persistent storage required) (004-for-the-llms)
- Go 1.21+ (existing Beluga AI Framework requirement) + OpenTelemetry (metrics, tracing, logging), testify/mock (testing), existing ChatModel providers (OpenAI) (005-for-the-chatmodels)
- N/A (chat model provider APIs - no persistent storage required) (005-for-the-chatmodels)
- Go 1.24.0 (toolchain go1.24.2) + go/ast, go/parser, go/token (for AST analysis), testify/mock (for mock pattern detection), go/format (for code generation) (001-go-package-by)
- N/A (analysis tool, no persistent storage required) (001-go-package-by)
- Go 1.24.0 + github.com/stretchr/testify/mock (for mock.Mock type) (002-beluga-ai-dependency)
- N/A (file system only) (002-beluga-ai-dependency)
- Go 1.24.0 + GitHub Actions, gomarkdoc (for API docs), GoReleaser (for releases), release-please (for semantic versioning) (003-the-github-workflows)
- N/A (workflow configuration files only) (003-the-github-workflows)
- N/A (ephemeral audio streams, conversation history via pkg/memory) (004-feature-voice-agents)
- Go 1.24, YAML (GitHub Actions workflows), Bash (validation scripts) (005-adjust-the-workflows)
- Go 1.24.1 (toolchain go1.24.2) (006-lets-make-sure)
- N/A (in-memory conversation context, no persistent storage required) (006-lets-make-sure)

## Project Structure
```
src/
tests/
```

## Commands
# Add commands for Go 1.21+

## Code Style
Go 1.21+: Follow standard conventions

## Recent Changes
- 006-lets-make-sure: Added Go 1.24.1 (toolchain go1.24.2)
- 005-adjust-the-workflows: Added Go 1.24, YAML (GitHub Actions workflows), Bash (validation scripts)
- 004-feature-voice-agents: Added Go 1.21+

<!-- MANUAL ADDITIONS START -->
<!-- MANUAL ADDITIONS END -->

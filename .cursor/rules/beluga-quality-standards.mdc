---
description: Enforce quality assurance (linting, testing, security).
globs: **/*.go
alwaysApply: true
---
# Beluga AI Quality Standards

**MANDATORY**: All code MUST pass these checks.

## Requirements Checklist

### 1. Build & Format
-   **Go Version**: 1.24+
-   **Build**: `make build` (MUST pass)
-   **Format**: `make fmt-check` (MUST pass). Fix: `make fmt`.

### 2. Linting & Static Analysis
-   **Lint**: `make lint` (golangci-lint v2.6.2). Fix: `make lint-fix`.
-   **Vet**: `make vet` (MUST pass).

### 3. Testing
-   **All Tests**: `make test` (MUST pass).
-   **Unit**: `make test-unit` (Race detection enabled).
-   **Integration**: `make test-integration` (15m timeout).
-   **Race**: `make test-race` (MUST pass).
-   **Coverage**: `make test-coverage` (Target: 100%, Min: 80%).

### 4. Security
-   **Scan**: `make security` (gosec, govulncheck, gitleaks).
-   **Secrets**: **NO** secrets in code (`gitleaks` must pass).
-   **Optional**: `make security-full` (Trivy).

## CI/CD Workflow
**Local Check**: `make ci-local`
1.  Format (`fmt-check`)
2.  Lint (Advisory)
3.  Vet
4.  Security
5.  Unit Tests
6.  Integration Tests
7.  Coverage
8.  Build

## Tools
-   `make install-tools` (golangci-lint, gosec, govulncheck, gofumpt, benchstat).
-   `make install-system-tools` (gitleaks, jq).

---
description: Use knowledge base for context and updates.
globs: **/*
alwaysApply: true
---
# Beluga AI Knowledge Base Integration

**MANDATORY**: Use `.project-kb` if present.

## Usage Workflow

1.  **Check**: `glob_file_search(".project-kb")`
2.  **Query**: Before editing/creating.
    ```javascript
    kb_auto_context({ query: "pattern for pkg/llms", project: "beluga-ai" })
    kb_search({ project: "beluga-ai", query: "OTEL metrics", limit: 5 })
    ```
3.  **Work**: Edit, create, refactor.
4.  **Update (MANDATORY)**: After significant changes.
    ```javascript
    // Add/Update
    kb_add({
      project: "beluga-ai",
      content: "File content...",
      file_path: "pkg/llms/config.go",
      doc_type: "code", // or "doc", "config", "test"
      metadata: {
        package: "llms",
        type: "config",
        related_packages: ["config", "monitoring"]
      }
    })
    
    // Delete old if needed
    kb_delete({ project: "beluga-ai", metadata_filter: { file_path: "..." } })
    ```

## When to Use
-   **Query**: Before editing, creating features, debugging, refactoring, adding tests.
-   **Update**: After creating/modifying files, features, architecture, tests.

## Best Practices
1.  **Query First**: Get context.
2.  **Update Immediately**: Don't defer.
3.  **Metadata**: Include `package`, `type`, `related_packages`.
4.  **Integration**: Link to Design/Arch/Test standards.
